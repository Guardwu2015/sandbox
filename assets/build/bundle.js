(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Info=function(t,e){var i=document.title,o=$(e.appendCredits);e.appendCredits&&$(".credits").append(o),e.title&&$("#info-title").text(e.title),e.subtitle&&$("#info-subtitle").text(e.subtitle),e.titleCss&&$("#info-title").css(e.titleCss),e.subtitleCss&&$("#info-subtitle").css(e.subtitleCss),e.documentTitle&&(document.title=e.documentTitle),e.showArrowNext&&$(".arrow-next").show(),$("#info").show(),t.emitter.on("destroy",function(){document.title=i,$("#info-title").text(""),$("#info-subtitle").text(""),$("#info-title").attr("style",""),$("#info-subtitle").attr("style",""),$(".arrow-next").hide(),$("#info").hide(),o.remove()})};module.exports=Info;


},{}],2:[function(require,module,exports){
var Stars=function(t){this.poem=t,this.object=null,this.count=3e4,this.depth=5e3,this.minDepth=700,this.color=11184810,this.addObject()};module.exports=Stars,Stars.prototype={generateGeometry:function(){var t,e,o,h,i,r;r=new THREE.Geometry;for(var s=0;s<this.count;s++)t=Math.random()*this.depth+this.minDepth,e=2*Math.random()*Math.PI,o=Math.cos(e)*t,i=Math.sin(e)*t,h=(.5-Math.random())*this.depth,r.vertices.push(new THREE.Vector3(o,h,i));return r},addObject:function(){var t;t=this.generateGeometry(),this.object=new THREE.PointCloud(t,new THREE.PointCloudMaterial({size:3*this.poem.ratio,color:this.color,fog:!1})),this.poem.scene.add(this.object)}};


},{}],3:[function(require,module,exports){
function setupTexture(e,t,n){var o=new Image,r=new THREE.Texture(o);return o.src="assets/images/cloud1024.png",$("body").append(o),r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,$(o).on("load",function(){n.needsUpdate=!0,r.needsUpdate=!0}),t.add(e),r}var glslify=require("glslify"),createShader=require("three-glslify")(THREE),Clouds=function(e,t){var n=_.extend({width:500,offset:new THREE.Vector2(1,1),color:new THREE.Vector4(.5,1,.7,1),height:-200,rotation:Math.PI/2},t),o=new THREE.PlaneGeometry(n.width,n.width),r=createShader(require("glslify/simple-adapter.js")("\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}","\n#define GLSLIFY 1\n\nuniform float time;\nuniform vec4 color;\nuniform vec2 offset;\nuniform sampler2D texture;\nvarying vec2 vUv;\nvoid main() {\n  vec4 texel = texture2D(texture, vUv * 0.1 + (offset + time * 0.00001) * offset) + texture2D(texture, vUv * 0.22 + (offset + time * 0.0000055) * offset);\n  float edges = 0.5 - length(vUv - 0.5);\n  gl_FragColor = color * edges * vec4(1.0, 1.0, 1.0, texel.w * texel.w * 2.5);\n}",[{name:"time",type:"float"},{name:"color",type:"vec4"},{name:"offset",type:"vec2"},{name:"texture",type:"sampler2D"}],[]));r.side=THREE.BackSide,r.uniforms={time:{type:"f",value:0},texture:{type:"t",value:null},offset:{type:"v2",value:n.offset},color:{type:"v4",value:n.color}};var i=new THREE.ShaderMaterial(r);i.transparent=!0,i.blending=THREE.AdditiveBlending,i.side=THREE.DoubleSide,i.depthTest=!1;var a=new THREE.Mesh(o,i);a.rotation.x=n.rotation,a.position.y=n.height,a.scale.multiplyScalar(10),r.uniforms.texture.value=setupTexture(a,e.scene,i),e.emitter.on("update",function(t){var n=e.camera.object.position;r.uniforms.time.value=t.elapsed,a.position.set(n.x,a.position.y,n.z)})};module.exports=Clouds;


},{"glslify":62,"glslify/simple-adapter.js":63,"three-glslify":104}],4:[function(require,module,exports){
var Glslify=require("glslify"),CreateShader=require("three-glslify")(THREE),LoadTexture=require("../../../utils/loadTexture"),Random=require("../../../utils/random"),internals={createMaterial:function(e,n){var t=CreateShader(require("glslify/simple-adapter.js")("\n#define GLSLIFY 1\n\nuniform float elapsed;\nuniform float uRange;\nattribute float size;\nattribute float aOffset;\nvarying float vAlpha;\nvoid main() {\n  vec3 movement = vec3(sin(elapsed * 0.002 * aOffset) * uRange * 0.003, elapsed * (-uRange / 100000.0 - uRange / 100000.0 * aOffset), cos(elapsed * 0.002 * aOffset) * uRange * 0.003);\n  vec3 range = vec3(uRange, uRange * 0.3, uRange);\n  vec3 cameraOffset = cameraPosition - range;\n  vec3 moduloPosition = mod(position + movement - cameraOffset, range * 2.0) + cameraOffset;\n  vec4 mvPosition = modelViewMatrix * vec4(moduloPosition, 1.0);\n  gl_PointSize = size * (uRange / (length(mvPosition.xyz) + 1.0));\n  vAlpha = 0.5 * min(1.0, max(0.0, 1.0 - (length(mvPosition.xyz) / uRange)));\n  gl_Position = projectionMatrix * mvPosition;\n}","\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform sampler2D texture;\nuniform float elapsed;\nvarying float vAlpha;\nvoid main() {\n  gl_FragColor = vec4(color, vAlpha) * texture2D(texture, gl_PointCoord);\n}",[{name:"elapsed",type:"float"},{name:"uRange",type:"float"},{name:"color",type:"vec3"},{name:"texture",type:"sampler2D"},{name:"elapsed",type:"float"}],[{name:"size",type:"float"},{name:"aOffset",type:"float"}])),a=new THREE.ShaderMaterial(_.extend(t,{blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}));return a.uniforms.color={type:"c",value:e},a.uniforms.uRange={type:"f",value:n},a},createGeometry:function(e,n,t,a){for(var r=new THREE.BufferGeometry,o=new Float32Array(3*n),i=new Float32Array(n),l=new Float32Array(n),u=0;n>u;u++)o[3*u+0]=Random.range(-t,t),o[3*u+1]=.3*Random.range(-t,t),o[3*u+2]=Random.range(-t,t),i[u]=Random.range(a[0],a[1]),l[u]=Random.range(0,1);return r.addAttribute("position",new THREE.BufferAttribute(o,3)),r.addAttribute("size",new THREE.BufferAttribute(i,1)),r.addAttribute("aOffset",new THREE.BufferAttribute(l,1)),r},createMeshAndStart:function(e,n,t){var a=new THREE.PointCloud(n,t);a.frustumCulled=!1;LoadTexture("assets/images/sinegravitycloud.png",t.uniforms.texture,"value").then(function(){e.scene.add(a),e.emitter.on("update",internals.updateFn(e,a))});return a},updateFn:function(e,n){return function(e){n.material.uniforms.elapsed.value=e.elapsed}}};module.exports=function(e,n){{var t=_.extend({count:3e3,color:new THREE.Color(7864319),range:300,sizeRange:[3,8]},n),a=internals.createMaterial(t.color,t.range),r=internals.createGeometry(a,t.count,t.range,t.sizeRange);internals.createMeshAndStart(e,r,a)}return{}};


},{"../../../utils/loadTexture":45,"../../../utils/random":46,"glslify":62,"glslify/simple-adapter.js":63,"three-glslify":104}],5:[function(require,module,exports){
var Camera=function(e,i,t){var o=_.extend({fov:50,near:3,far:1e4,aspectRatio:window.innerWidth/window.innerHeight},e);this.object=new THREE.PerspectiveCamera(o.fov,o.aspect,o.near,o.far),this.object.position.x=_.isNumber(e.x)?e.x:0,this.object.position.y=_.isNumber(e.y)?e.y:0,this.object.position.z=_.isNumber(e.z)?e.z:500,i.add(this.object),t.on("resize",this.resize.bind(this))};module.exports=Camera,Camera.prototype={resize:function(){this.object.aspect=window.innerWidth/window.innerHeight,this.object.updateProjectionMatrix()}};


},{}],6:[function(require,module,exports){
function updateCamera(t,e){var a=new THREE.Vector3;return function(n){a.copy(e).multiplyScalar(n.unitDt),t.add(a)}}var ConstantMove=function(t,e){var a=_.extend({x:0,y:0,z:0},e),n=new THREE.Vector3(a.x,a.y,a.z);t.emitter.on("update",updateCamera(t.camera.object.position,n))};module.exports=ConstantMove;


},{}],7:[function(require,module,exports){
var OrbitControls=require("../../vendor/OrbitControls"),Controls=function(t,o){this.poem=t,this.properties=o,this.controls=new OrbitControls(this.poem.camera.object,this.poem.canvas),_.extend(this.controls,o),this.poem.emitter.on("update",this.controls.update.bind(this.controls))};module.exports=Controls;


},{"../../vendor/OrbitControls":48}],8:[function(require,module,exports){
function mouseMove(e,o,n,u){var t=new THREE.Vector3(1,0,0),s=new THREE.Vector3(0,1,0),a=new THREE.Quaternion,m=new THREE.Quaternion,r=0,p=0;return function(i){i.preventDefault();var f=i.pageX,v=i.pageY,c=e.x-f,l=e.y-v;p+=c*n,r+=l*u,r=Math.min(r,.45*Math.PI),r=Math.max(r,.45*-Math.PI),a.setFromAxisAngle(s,p),m.setFromAxisAngle(t,r),o.multiplyQuaternions(a,m),e.x=f,e.y=v}}function mouseUp(e,o){return function(){e.off("mouseleave",o.mouseUp),e.off("mouseup",o.mouseUp),e.off("mousemove",o.mouseMove)}}function mouseDown(e,o,n){return function(u){u.preventDefault(),n.x=u.pageX,n.y=u.pageY,e.on("mouseleave",o.mouseUp),e.on("mouseup",o.mouseUp),e.on("mousemove",o.mouseMove)}}function stopHandlers(e,o){return function(){e.off("mouseleave",o.mouseUp),e.off("mouseup",o.mouseUp),e.off("mousemove",o.mouseMove),e.off("mousedown",o.mouseDown)}}function startMouseHandlers(e,o,n,u,t){var s={x:0,y:0},a=$(e),m={},r=(new THREE.Quaternion).copy(o.quaternion);return m.mouseMove=mouseMove(s,r,u,t),m.mouseUp=mouseUp(a,m),m.mouseDown=mouseDown(a,m,s),a.on("mousedown",m.mouseDown),n.emitter.on("destroy",stopHandlers(a,m)),r}function updateCamera(e,o,n){return function(u){e.slerp(o,n*u.unitDt)}}var Swivel=function(e,o){var n=_.extend({easing:.5,speedX:.002,speedY:.002},o),u=startMouseHandlers(e.canvas,e.camera.object,e,n.speedX,n.speedY);e.emitter.on("update",updateCamera(e.camera.object.quaternion,u,n.easing))};module.exports=Swivel;


},{}],9:[function(require,module,exports){
var Touches=require("touches"),EventEmitter=require("events").EventEmitter;module.exports=function(e,t){var n=new THREE.Vector2,o=new THREE.Vector2,i=function(t,i){t.preventDefault(),o.x=2*(i[0]/e.canvas.offsetWidth)-1,o.y=-2*(i[1]/e.canvas.offsetHeight)+1,n.x=i[0],n.y=i[1]},r=Touches(e.canvas,{filtered:!0}).on("start",i).on("move",i).on("end",function(e){n.x=null,n.y=null,o.x=null,o.y=null});return e.emitter.on("destroy",function(){r.disable()}),{emitter:r,pixelPosition:n,normalizedPosition:o}};


},{"events":112,"touches":106}],10:[function(require,module,exports){
var TrackCameraLights=function(e,t){this.lights=[];var a=new THREE.AmbientLight(1118481,1,0);a.position.set(0,2e3,1e3);var i=(new THREE.PointLight(16777215,.3,0),new THREE.PointLight(16777215,1,0));i.position.set(3e3,2e3,5e3);var o=new THREE.PointLight(16777215,1,0);o.position.set(-1e3,-1e3,-1e3);var n=new THREE.PointLight(16777215,2,0);n.position.set(-700,500,-1e3),e.scene.add(a),e.camera.object.add(i),e.camera.object.add(o),e.camera.object.add(n)};module.exports=TrackCameraLights,TrackCameraLights.prototype={};


},{}],11:[function(require,module,exports){
var MrDoobStats=require("../../vendor/Stats"),Stats=function(t){this.poem=t,this.stats=new MrDoobStats,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",$(this.poem.div).append(this.stats.domElement),this.poem.emitter.on("update",this.stats.update.bind(this.stats))};module.exports=Stats;


},{"../../vendor/Stats":49}],12:[function(require,module,exports){
var createManifestLoader=require("poem-manifests"),EventEmitter=require("events").EventEmitter,_emitter=new EventEmitter,_loader=null,init=function(e,t){_loader=createManifestLoader(t,{emitter:_emitter,getGraph:function(t,r){return e(t,_emitter)},globalManifest:{}}),_emitter.on("load",function(e){window.poem=e.graph})},load=function(e){return _loader.load(e)};module.exports={init:init,load:load,emitter:_emitter};


},{"events":112,"poem-manifests":81}],13:[function(require,module,exports){
var Camera=require("../components/cameras/Camera"),Renderer=require("./renderer"),CreateLoop=require("poem-loop"),internals={ratio:_.isNumber(window.devicePixelRatio)?window.devicePixelRatio:1,createFog:function(e,r,o){var a=_.extend({color:2236962,nearFactor:.5,farFactor:2},r);e.fog=new THREE.Fog(a.color,o*a.nearFactor,o*a.farFactor)}};module.exports=function(e,r){var o=_.extend({camera:null,fog:null,renderer:null},e.config),a=CreateLoop(),n=a.emitter,t=new THREE.Scene,i=new Camera(o.camera,t,n);return internals.createFog(t,o.fog,i.object.position.z),Renderer(o.renderer,t,i.object,n),r.once("load",a.start),r.on("unload",function(){a.stop(),n.emit("destroy")}),{emitter:n,canvas:$("canvas")[0],scene:t,ratio:internals.ratio,camera:i,$div:$("#container"),loop:a,start:a.start,stop:a.stop}};


},{"../components/cameras/Camera":5,"./renderer":14,"poem-loop":77}],14:[function(require,module,exports){
function addEffectsComposer(e){{var r=new THREE.BloomPass(1.5,15,16,512),n=new THREE.ShaderPass(THREE.CopyShader),d=new THREE.ShaderPass(THREE.FXAAShader);new THREE.ShaderPass(chromaticAberrationShader)}d.uniforms.resolution.value.set(1/(window.innerWidth*_ratio),1/(window.innerHeight*_ratio)),n.renderToScreen=!0;var i=new THREE.EffectComposer(_renderer);return i.renderTarget1.setSize(window.innerWidth*_ratio,window.innerHeight*_ratio),i.renderTarget2.setSize(window.innerWidth*_ratio,window.innerHeight*_ratio),i.addPass(e),i.addPass(d),i.addPass(r),i.addPass(n),i}function addSceneAndCameraToEffects(e,r){_rendererPass.scene=e,_rendererPass.camera=r}function addRenderer(){var e=new THREE.WebGLRenderer;return e.setPixelRatio(_ratio),e.setSize(window.innerWidth,window.innerHeight),document.getElementById("container").appendChild(e.domElement),e}function handleNewPoem(e,r,n,d){var i=_.extend({clearColor:2236962,useEffects:!1,useVR:!1},e);return _webGLRenderer.setClearColor(i.clearColor),i.useVR?(_renderer=new StereoEffect(_webGLRenderer),_renderer.separation=10):_renderer=_webGLRenderer,addSceneAndCameraToEffects(r,n),newResizeHandler(n),i.useEffects?(_webGLRenderer.autoClear=!1,d.on("draw",function(){_composer.render(r,n)})):(_webGLRenderer.autoClear=!0,d.on("draw",function(){_renderer.render(r,n)})),_renderer}require("../postprocessing"),require("../shaders/CopyShader"),require("../shaders/FilmShader"),require("../shaders/ConvolutionShader"),require("../shaders/FXAAShader");var chromaticAberrationShader=require("../postprocessing/chromaticAberration"),StereoEffect=require("../vendor/StereoEffect"),_ratio=_.isNumber(window.devicePixelRatio)?window.devicePixelRatio:1,_webGLRenderer=addRenderer(),_renderer=_webGLRenderer,_rendererPass=new THREE.RenderPass,_composer=addEffectsComposer(_rendererPass),newResizeHandler=function(){var e,r=$(window);return function(n){var d=function(){_renderer.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()};e&&$(window).off("resize",e),r.on("resize",d),d(),e=d}}();module.exports=handleNewPoem;


},{"../postprocessing":34,"../postprocessing/chromaticAberration":33,"../shaders/ConvolutionShader":35,"../shaders/CopyShader":36,"../shaders/FXAAShader":37,"../shaders/FilmShader":38,"../vendor/StereoEffect":50}],15:[function(require,module,exports){
var crossroads=require("crossroads"),hasher=require("hasher"),manifestToPoem=require("./manifestToPoem"),_baseUrl="/sandbox",_defaultLevel,routing={start:function(e,a){function o(e,a){crossroads.parse(e)}_defaultLevel=_.first(_.keys(a)),manifestToPoem.init(e,a),crossroads.addRoute("/",routing.showMainTitles),crossroads.addRoute("/{name}",routing.loadUpALevel),crossroads.addRoute(/.*/,function(){hasher.replaceHash("")}),hasher.initialized.add(o),hasher.changed.add(o),hasher.init()},showMainTitles:function(){_gaq.push(["_trackPageview",_baseUrl]),manifestToPoem.load(_defaultLevel)},loadUpALevel:function(e){_gaq.push(["_trackPageview",_baseUrl+"/#level/"+e]);var a=manifestToPoem.load(e);a||manifestToPoem.load(_defaultLevel)}};module.exports=routing;


},{"./manifestToPoem":12,"crossroads":59,"hasher":64}],16:[function(require,module,exports){
function handlers(e){var o;manifestToPoem.emitter.on("load",function(e){o=e.graph}),e.emitter.on("close",function(){o&&o.start()}),e.emitter.on("open",function(){o&&o.stop()})}var poemMenu=require("poem-menu"),routing=require("./routing"),mute=require("../sound/mute"),manifestToPoem=require("./manifestToPoem");window.mute=mute,module.exports=function(e){var o=poemMenu(e,{top:"Three.js Sandbox",bottom:mute.el});handlers(o)};


},{"../sound/mute":40,"./manifestToPoem":12,"./routing":15,"poem-menu":84}],17:[function(require,module,exports){
var random=require("../utils/random"),loadTexture=require("../utils/loadTexture"),RSVP=require("rsvp"),destroyMesh=require("../utils/destroyMesh"),mute=require("../sound/mute"),Earth=function(t,e){this.poem=t,this.geometry=null,this.material=null,this.mesh=null,this.texture=null,$("#LevelSelect").hide(),this.radius=e.radius>0?e.radius:250,this.$a=$("<a href='http://svs.gsfc.nasa.gov/cgi-bin/details.cgi?aid=11719'></a>"),this.$a.append($("<img class='nasa-logo wide' src='assets/images/nasa-goddard.png' />")),this.$a.attr("title","Map visualization credit to NASA's Goddard Space Flight Center"),this.poem.$div.append(this.$a),this.poem.emitter.on("destroy",this.destroy.bind(this)),this.start()};module.exports=Earth,Earth.prototype={start:function(){this.createTexture(),this.geometry=new THREE.SphereGeometry(this.radius,64,64),this.material=new THREE.MeshPhongMaterial({map:this.texture,shininess:25,specular:1118481}),this.mesh=new THREE.Mesh(this.geometry,this.material),this.poem.scene.add(this.mesh),this.poem.emitter.on("update",this.update.bind(this))},createTexture:function(){this.video=document.createElement("video"),this.$video=$(this.video),this.video.controls=!0,this.video.loop=!0,this.video.muted=mute.muted(),mute.emitter.on("change",function(t){this.video.muted=t}.bind(this)),this.video.src=this.video.canPlayType("video/mp4")?"assets/video/earthco2-large.mp4":"assets/video/earthco2.webm",this.video.load(),this.video.play(),this.canvas=document.createElement("canvas"),this.canvas.width=1920,this.canvas.height=960,this.ctx2d=this.canvas.getContext("2d"),this.ctx2d.fillStyle="#000000",this.ctx2d.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new THREE.Texture(this.canvas),this.texture.minFilter=THREE.LinearFilter,this.texture.magFilter=THREE.LinearFilter},error:function(){},update:function(t){this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.ctx2d.drawImage(this.video,0,0),this.texture&&(this.texture.needsUpdate=!0)),this.mesh.rotation.y+=5e-5*t.dt},destroy:function(){this.$a.remove(),this.video.pause(),destroyMesh(this.mesh),this.texture.dispose()}};


},{"../sound/mute":40,"../utils/destroyMesh":43,"../utils/loadTexture":45,"../utils/random":46,"rsvp":95}],18:[function(require,module,exports){
function createGeometry(e,t){var i=new THREE.PlaneGeometry(e,e,t,t);return i.applyMatrix((new THREE.Matrix4).makeRotationX(.5*Math.PI)),i}function createTexture(e,t){var i=new Image,n=new THREE.Texture(i);return i.src="assets/images/cloud1024.png",n.wrapT=THREE.RepeatWrapping,n.wrapS=THREE.RepeatWrapping,$(i).on("load",function(){n.needsUpdate=!0,t.add(e)}),n}function updateShader(){}function createMeshGrid(e,t,i,n){for(var a,o=createGeometry(t/i,Math.floor(n/i)),r=new THREE.Object3D,l=t/i,s=0;i>s;s++)for(var c=0;i>c;c++)a=new THREE.Mesh(o,e),r.add(a),a.position.set(s*l,0,c*l);return r}function updateModuloMeshGrid(e,t,i){var n=t.length,a=i/2;return function(){for(var o,r=0;n>r;r++)o=t[r].position,o.set((o.x-e.x+a)%i+e.x-a,o.y,(o.z-e.z+a)%i+e.z-a)}}var glslify=require("glslify"),createShader=require("three-glslify")(THREE),EndlessTerrain=function(e,t){var i=_.extend({width:4e3,gridLength:16,totalPolygonDensity:1024,positionY:0},t),n=createShader(require("glslify/simple-adapter.js")("\n#define GLSLIFY 1\n\nuniform sampler2D terrain;\nuniform float heightScale;\nuniform float width;\nvarying float height;\nvarying vec2 vUv;\nvarying float vCameraDistance;\nvoid main() {\n  vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n  vUv = vec2(modelPosition.x, modelPosition.z) / width;\n  height = texture2D(terrain, vUv * 0.3).w;\n  vCameraDistance = distance(modelPosition.xyz, cameraPosition);\n  vec4 modifiedPosition = vec4(position.x, position.y + height * heightScale, position.z, 1.0);\n  gl_Position = projectionMatrix * modelViewMatrix * modifiedPosition;\n}","\n#define GLSLIFY 1\n\nvec3 a_x_hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nuniform float width;\nvarying float height;\nvarying vec2 vUv;\nvarying float vCameraDistance;\nvoid main() {\n  float hueX = abs(0.5 - fract(vUv.x * 0.8)) * 2.0;\n  float hueY = abs(0.5 - fract(vUv.y * 0.63)) * 2.0;\n  gl_FragColor = vec4(a_x_hsv2rgb(vec3((hueX + hueY) * 0.2 + 0.3, mix(height, 0.5, 0.8), mix(height, 1.2, 0.35))), 1.0);\n  float fogFactor = smoothstep(0.0, 1.0, vCameraDistance / width);\n  vec3 fogColor = vec3(0.14, 0.14, 0.14);\n  gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n}",[{name:"terrain",type:"sampler2D"},{name:"heightScale",type:"float"},{name:"width",type:"float"},{name:"width",type:"float"}],[])),a=new THREE.ShaderMaterial(n);a.side=THREE.DoubleSide;var o=createMeshGrid(a,i.width,i.gridLength,i.totalPolygonDensity);o.position.y=i.positionY,n.uniforms.terrain.value=createTexture(o,e.scene),n.uniforms.heightScale.value=i.width/20,n.uniforms.width.value=i.width/2,e.emitter.on("update",updateModuloMeshGrid(e.camera.object.position,o.children,i.width))};module.exports=EndlessTerrain;


},{"glslify":62,"glslify/simple-adapter.js":63,"three-glslify":104}],19:[function(require,module,exports){
var random=require("../utils/random"),Grid=function(e,r){this.poem=e;for(var i=new THREE.LineBasicMaterial({color:3158064}),s=new THREE.Geometry,t=-75,E=25,n=0;40>=n;n++)s.vertices.push(new THREE.Vector3(-500,t,n*E-500)),s.vertices.push(new THREE.Vector3(500,t,n*E-500)),s.vertices.push(new THREE.Vector3(n*E-500,t,-500)),s.vertices.push(new THREE.Vector3(n*E-500,t,500));this.grid=new THREE.Line(s,i,THREE.LinePieces),this.poem.scene.add(this.grid)};module.exports=Grid;


},{"../utils/random":46}],20:[function(require,module,exports){
var calculateSquaredTextureWidth=require("../../utils/calculateSquaredTextureWidth"),loadTexture=require("../../utils/loadTexture"),loadText=require("../../utils/loadText"),RSVP=require("rsvp"),MeshGroup=function(e){THREE.Object3D.call(this),this.poem=e,this.type="MeshGroup",this.bufferGeometry=new THREE.BufferGeometry,this.matricesTextureWidth=null,this.matricesData=null,this.matrixIndices=null,this.texture=null,this.vertexShader=null,this.fragmentShader=null,this.loaded=RSVP.all([loadTexture("assets/images/sinegravitycloud.png",this,"texture"),loadText("js/demos/MeshGroupBoxDemo/shader.vert",this,"vertexShader"),loadText("js/demos/MeshGroupBoxDemo/shader.frag",this,"fragmentShader")])["catch"](function(e){throw new Error("Could not load assets for the MeshGroup",e)})};MeshGroup.prototype=_.extend(Object.create(THREE.Object3D.prototype),{build:function(e){this.loaded.then(function(){this.buildGeometry(),this.buildMatrices(),this.buildMaterial(),this.object=new THREE.PointCloud(this.bufferGeometry,this.material),e.add(this.object),this.poem.emitter.on("update",this.update.bind(this))}.bind(this))},buildGeometry:function(){var e,t,r,i,s,a=new THREE.Geometry,h=[];for(t=0,r=this.children.length;r>t;t++)if(e=this.children[t].geometry)for(a.merge(e),i=a.vertices.length-e.vertices.length,s=a.vertices.length;s>i;i++)h[i]=t;this.bufferGeometry.fromGeometry(a)},generateTransformMatrixIndices:function(e){var t,r,i,s,a,h,u=[],n=0;for(i=0,s=e.length;s>i;i++)if(r=e[i].geometry)for(t=3*r.faces.length,n+=t,a=n-t,h=n;h>a;a++)u[a]=i;return new Float32Array(u)},buildMatrices:function(){this.matricesTextureWidth=calculateSquaredTextureWidth(16*this.children.length),this.matricesData=new Float32Array(this.matricesTextureWidth*this.matricesTextureWidth*4),this.matricesTexture=new THREE.DataTexture(this.matricesData,this.matricesTextureWidth,this.matricesTextureWidth,THREE.RGBAFormat,THREE.FloatType),this.matricesTexture.minFilter=THREE.NearestFilter,this.matricesTexture.magFilter=THREE.NearestFilter,this.matricesTexture.generateMipmaps=!1,this.matricesTexture.flipY=!1,this.matricesTexture.needsUpdate=!0},buildMaterial:function(){this.attributes={transformMatrixIndex:{type:"f",value:null}},this.matrixIndices=this.generateTransformMatrixIndices(this.children),this.bufferGeometry.addAttribute("transformMatrixIndex",new THREE.BufferAttribute(this.matrixIndices,1)),this.uniforms={color:{type:"c",value:new THREE.Color(16711680)},matricesTexture:{type:"t",value:this.matricesTexture},time:{type:"f",value:Date.now()},texture:{type:"t",value:this.texture},matricesTextureWidth:{type:"f",value:this.matricesTextureWidth}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,attributes:this.attributes,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0})},update:function(){for(var e=0,t=this.children.length;t>e;e++)this.children[e].matrix.flattenToArrayOffset(this.matricesData,16*e),this.matricesTexture.needsUpdate=!0}}),module.exports=MeshGroup;


},{"../../utils/calculateSquaredTextureWidth":42,"../../utils/loadText":44,"../../utils/loadTexture":45,"rsvp":95}],21:[function(require,module,exports){
var MeshGroup=require("./MeshGroup"),random=require("../../utils/random"),twoPi=2*Math.PI,MeshGroupBoxDemo=function(o,t){this.poem=o,this.count=1e4,this.poem.emitter.on("update",this.update.bind(this)),this.group=new MeshGroup(o),this.boxes=this.generateBoxes(this.group),this.group.build(o.scene)};module.exports=MeshGroupBoxDemo,MeshGroupBoxDemo.prototype={generateBoxes:function(o){for(var t,e=[],r=(new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:65280}),this.count);r--;)t=new THREE.Mesh(new THREE.BoxGeometry(1,1,1)),t.position.x=random.range(-100,100),t.position.y=random.range(-100,100),t.position.z=random.range(-100,100),t.rotation.x=random.range(-twoPi,twoPi),t.rotation.y=random.range(-twoPi,twoPi),t.rotation.z=random.range(-twoPi,twoPi),t.velocity=new THREE.Vector3(random.range(-1,1),random.range(-1,1),random.range(-1,1)).multiplyScalar(.1),t.spin=new THREE.Vector3(random.range(-twoPi,twoPi),random.range(-twoPi,twoPi),random.range(-twoPi,twoPi)).multiplyScalar(.01),t.scale.multiplyScalar(random.range(1,2)),t.updateMatrix(),e.push(t),o.add(t);return e},update:function(o){for(var t,e=0;e<this.count;e++)t=this.boxes[e],t.position.add(t.velocity),t.rotation.x+=t.spin.x,t.rotation.y+=t.spin.y,t.rotation.z+=t.spin.z,t.updateMatrix()}};


},{"../../utils/random":46,"./MeshGroup":20}],22:[function(require,module,exports){
var random=require("../utils/random"),loadTexture=require("../utils/loadTexture"),loadText=require("../utils/loadText"),RSVP=require("rsvp"),SineGravityCloud=function(t,i){this.poem=t,this.object=null,this.material=null,this.attributes=null,this.uniforms=null,this.texture=null,this.vertexShader=null,this.fragmentShader=null,this.count=2e5,this.radius=200,this.pointSize=7,_.extend(this,i),RSVP.all([loadTexture("assets/images/sinegravitycloud.png",this,"texture"),loadText("assets/shaders/sinegravitycloud.vert",this,"vertexShader"),loadText("assets/shaders/sinegravitycloud.frag",this,"fragmentShader")]).then(this.start.bind(this),this.error.bind(this))};module.exports=SineGravityCloud,SineGravityCloud.prototype={start:function(){this.attributes={size:{type:"f",value:null},customColor:{type:"c",value:null}},this.uniforms={color:{type:"c",value:new THREE.Color(16777215)},texture:{type:"t",value:this.texture}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,attributes:this.attributes,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),this.geometry=new THREE.BufferGeometry,this.positions=new Float32Array(3*this.count),this.velocity=new Float32Array(3*this.count),this.colors=new Float32Array(3*this.count),this.sizes=new Float32Array(this.count);for(var t,i,s=new THREE.Color(0),e=0;e<this.count;e++)this.sizes[e]=this.pointSize,i=random.range(-1,1),this.positions[3*e+0]=i*this.radius,this.positions[3*e+1]=Math.sin(i*Math.PI*10)*this.radius,this.positions[3*e+2]=this.radius*-.5,this.velocity[3*e+0]=0*random.range(-.01,.01),this.velocity[3*e+1]=10*random.range(-.01,.01),this.velocity[3*e+2]=0*random.range(-.01,.01),t=.3*i+.65,s.setHSL(t,1,.55),this.colors[3*e+0]=s.r,this.colors[3*e+1]=s.g,this.colors[3*e+2]=s.b;this.geometry.addAttribute("position",new THREE.BufferAttribute(this.positions,3)),this.geometry.addAttribute("customColor",new THREE.BufferAttribute(this.colors,3)),this.geometry.addAttribute("size",new THREE.BufferAttribute(this.sizes,1)),this.object=new THREE.PointCloud(this.geometry,this.material),this.object.position.y-=.2*this.radius,this.poem.scene.add(this.object),this.object.scale.multiplyScalar(1.5),this.poem.emitter.on("update",this.update.bind(this))},error:function(t){throw new Error("Could not load assets for the SineGravityCloud",t)},update:function(t){for(var i,s=Math.cos(5e-5*t.now*1),e=Math.cos(5e-5*t.now*2),o=Math.cos(5e-5*t.now*3),r=0;r<this.count;r++)i=this.positions[3*r+0]*this.positions[3*r+0]+this.positions[3*r+1]*this.positions[3*r+1]+this.positions[3*r+2]*this.positions[3*r+2],this.velocity[3*r+0]-=s*this.positions[3*r+0]/i,this.velocity[3*r+1]-=e*this.positions[3*r+1]/i,this.velocity[3*r+2]-=o*this.positions[3*r+2]/i,this.positions[3*r+0]+=s*this.velocity[3*r+0],this.positions[3*r+1]+=e*this.velocity[3*r+1],this.positions[3*r+2]+=o*this.velocity[3*r+2];this.geometry.attributes.position.needsUpdate=!0}};


},{"../utils/loadText":44,"../utils/loadTexture":45,"../utils/random":46,"rsvp":95}],23:[function(require,module,exports){
var Random=require("../utils/random"),lerp=require("lerp"),internals={createMeshes:function(e,n,o,t){for(var i=[],r=0;r<t.count;r++){var a=new THREE.Mesh(n,o);a.position.x=Random.range(-t.dispersion,t.dispersion),a.position.y=Random.range(-t.dispersion,t.dispersion),a.position.z=Random.range(-t.dispersion,t.dispersion),a.rotation.x=Random.range(-Math.PI,Math.PI),a.rotation.y=Random.range(-Math.PI,Math.PI),a.rotation.z=Random.range(-Math.PI,Math.PI),a.velocity=t.velocity,a.flee=1,a.direction=new THREE.Vector3(Random.range(-1,1),Random.range(-1,1),Random.range(-1,1)),a.direction.normalize(),r>0&&(a.target=i[r-1].position),e.add(a),i.push(a)}return i[0].target=i[i.length-1].position,i},physicsMotionFn:function(e,n){var o=new THREE.Vector3;return function(t){for(var i=0;i<e.length;i++){var r=e[i];o.subVectors(r.target,r.position),o.normalize(),r.direction.lerp(o,n.turnSpeed*t.unitDt),r.flee=lerp(r.flee,1,n.fleeSlowdown),r.position.x+=r.direction.x*r.velocity*r.flee*t.unitDt,r.position.y+=r.direction.y*r.velocity*r.flee*t.unitDt,r.position.z+=r.direction.z*r.velocity*r.flee*t.unitDt}}},brownianMotionFn:function(e,n){return function(o){for(var t=0;t<e.length;t++)e[t].position.x+=Random.range(-5e-4,5e-4)*n*o.dt,e[t].position.y+=Random.range(-5e-4,5e-4)*n*o.dt,e[t].position.z+=Random.range(-5e-4,5e-4)*n*o.dt}},raycastFn:function(e,n,o,t){var i=new THREE.Raycaster;return function(r){i.setFromCamera(n,o);for(var a=0;a<e.length;a++){var s=e[a],d=i.ray.distanceToPoint(s.position);d<t.mouseRange&&(s.flee+=t.fleeSpeed*(t.mouseRange-d)/t.mouseRange)}}}};module.exports=function(e,n){var o=_.extend({count:10,dispersion:10,radius:1,mouseRef:"mouse",velocity:5,turnSpeed:.025,fleeSlowdown:.1,mouseRange:50,fleeSpeed:1},n),t=new THREE.TetrahedronGeometry(o.radius,0),i=new THREE.MeshLambertMaterial({color:52275,shading:THREE.FlatShading,fog:!1}),r=internals.createMeshes(e.scene,t,i,o),a=e[o.mouseRef];e.emitter.on("update",internals.physicsMotionFn(r,o)),e.emitter.on("update",internals.raycastFn(r,a.normalizedPosition,e.camera.object,o))};


},{"../utils/random":46,"lerp":66}],24:[function(require,module,exports){
var random=require("../../utils/random"),loadTexture=require("../../utils/loadTexture"),loadText=require("../../utils/loadText"),RSVP=require("rsvp"),simplex2=require("../../utils/simplex2"),TexturePositionalMatrices=function(t,e){this.poem=t,this.object=null,this.material=null,this.attributes=null,this.uniforms=null,this.texture=null,this.vertexShader=null,this.fragmentShader=null,this.count=5e4,this.radius=400,this.pointSize=14,RSVP.all([loadTexture("assets/images/sinegravitycloud.png",this,"texture"),loadText("js/demos/TexturePositionalMatrices/shader.vert",this,"vertexShader"),loadText("js/demos/TexturePositionalMatrices/shader.frag",this,"fragmentShader")]).then(this.start.bind(this),this.error.bind(this))};module.exports=TexturePositionalMatrices,TexturePositionalMatrices.prototype={start:function(){var t=3,e=8,i=e*t;this.geometry=new THREE.BufferGeometry,this.positions=new Float32Array(this.count*i),this.velocity=new Float32Array(this.count*t),this.colors=new Float32Array(this.count*i),this.sizes=new Float32Array(this.count*e),this.transformIndices=new Float32Array(this.count*e);var r,s,a,o=new THREE.Color(0),n=new THREE.BoxGeometry(1,1,1).vertices;for(s=0;s<this.count;s++)for(r=(this.positions[3*s+0]/this.radius*.3+.65)%1,r=random.range(0,1),o.setHSL(r,1,.55),a=0;a<n.length;a++){var u=s*i+a*t,h=s*e+a;this.sizes[h]=this.pointSize,this.transformIndices[h]=s,this.positions[u+0]=4*n[a].x,this.positions[u+1]=4*n[a].y,this.positions[u+2]=4*n[a].z,this.colors[u+0]=o.r,this.colors[u+1]=o.g,this.colors[u+2]=o.b}this.matricesTextureSize=this.calculateSquaredTextureSize(16*this.count),this.matrices=[],this.matricesData=new Float32Array(this.matricesTextureSize*this.matricesTextureSize*4);var l,m=new THREE.Matrix4,d=new THREE.Matrix4,c=new THREE.Matrix4,T=new THREE.Euler;for(s=0;s<this.count;s++)l=random.range(.5,2),c.makeScale(l,l,l),d.makeTranslation(.5*random.range(-this.radius,this.radius),.5*random.range(-this.radius,this.radius),.5*random.range(-this.radius,this.radius)),T.set(random.range(0,2*Math.PI),random.range(0,2*Math.PI),random.range(0,2*Math.PI)),m.makeRotationFromEuler(T),this.matrices[s]=(new THREE.Matrix4).multiply(d).multiply(m).multiply(c),this.matrices[s].flattenToArrayOffset(this.matricesData,16*s);this.matricesTexture=new THREE.DataTexture(this.matricesData,this.matricesTextureSize,this.matricesTextureSize,THREE.RGBAFormat,THREE.FloatType),this.matricesTexture.minFilter=THREE.NearestFilter,this.matricesTexture.magFilter=THREE.NearestFilter,this.matricesTexture.generateMipmaps=!1,this.matricesTexture.flipY=!1,this.matricesTexture.needsUpdate=!0,this.attributes={size:{type:"f",value:null},customColor:{type:"c",value:null},transformIndex:{type:"f",value:null}},this.uniforms={color:{type:"c",value:new THREE.Color(16777215)},texture:{type:"t",value:this.texture},matricesTexture:{type:"t",value:this.matricesTexture},time:{type:"f",value:Date.now()},matricesTextureSize:{type:"f",value:this.matricesTextureSize}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,attributes:this.attributes,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),this.geometry.addAttribute("position",new THREE.BufferAttribute(this.positions,3)),this.geometry.addAttribute("customColor",new THREE.BufferAttribute(this.colors,3)),this.geometry.addAttribute("size",new THREE.BufferAttribute(this.sizes,1)),this.geometry.addAttribute("transformIndex",new THREE.BufferAttribute(this.transformIndices,1)),this.object=new THREE.PointCloud(this.geometry,this.material),this.object.position.y-=.2*this.radius,this.poem.scene.add(this.object),this.poem.emitter.on("update",this.update.bind(this))},calculateSquaredTextureSize:function(t){for(var e=1,i=0;t/4>e*e;)i++,e=Math.pow(2,i);return e},error:function(t){throw new Error("Could not load assets for the TexturePositionalMatrices",t)},update:function(){{var t=new THREE.Matrix4;new THREE.Euler}return function(e){this.uniforms.time.value=e.now;for(var i,r,s=0;s<this.count;s++)i=e.now/1e3,r=1e3*s,t.makeTranslation(simplex2.range(i,r,-1,1),simplex2.range(i,r+333,-1,1),simplex2.range(i,r+666,-1,1)),this.matrices[s].multiplyMatrices(t,this.matrices[s]),this.matrices[s].flattenToArrayOffset(this.matricesData,16*s);this.matricesTexture.needsUpdate=!0}}()};


},{"../../utils/loadText":44,"../../utils/loadTexture":45,"../../utils/random":46,"../../utils/simplex2":47,"rsvp":95}],25:[function(require,module,exports){
var random=require("../../utils/random"),loadTexture=require("../../utils/loadTexture"),loadText=require("../../utils/loadText"),RSVP=require("rsvp"),UniformPositionalMatrices=function(t,i){this.poem=t,this.object=null,this.material=null,this.attributes=null,this.uniforms=null,this.texture=null,this.vertexShader=null,this.fragmentShader=null,this.count=2e5,this.radius=200,this.pointSize=7,RSVP.all([loadTexture("assets/images/sinegravitycloud.png",this,"texture"),loadText("js/demos/UniformPositionalMatrices/shader.vert",this,"vertexShader"),loadText("js/demos/UniformPositionalMatrices/shader.frag",this,"fragmentShader")]).then(this.start.bind(this),this.error.bind(this))};module.exports=UniformPositionalMatrices,UniformPositionalMatrices.prototype={start:function(){var t=50;this.attributes={size:{type:"f",value:null},customColor:{type:"c",value:null},transformIndex:{type:"f",value:null}},this.uniforms={color:{type:"c",value:new THREE.Color(16777215)},texture:{type:"t",value:this.texture},time:{type:"f",value:Date.now()},transformMatrix:{type:"m4v",value:[]}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,attributes:this.attributes,vertexShader:"#define TRANSFORM_MATRIX_COUNT "+t+"\n"+this.vertexShader,fragmentShader:this.fragmentShader,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),this.geometry=new THREE.BufferGeometry,this.positions=new Float32Array(3*this.count),this.velocity=new Float32Array(3*this.count),this.colors=new Float32Array(3*this.count),this.sizes=new Float32Array(this.count),this.transformIndices=new Float32Array(this.count);for(var i,e,s,r=new THREE.Color(0),o=0;o<this.count;o++)this.sizes[o]=this.pointSize,this.transformIndices[o]=random.rangeInt(0,t),e=random.rangeLow(.1,Math.PI),s=random.rangeLow(.3*Math.PI,Math.PI),this.positions[3*o+0]=Math.sin(e)*Math.cos(s)*this.radius*e,this.positions[3*o+1]=Math.sin(e)*Math.sin(s)*this.radius,this.positions[3*o+2]=Math.cos(e)*this.radius,i=(this.positions[3*o+0]/this.radius*.3+.65)%1,r.setHSL(i,1,.55),this.colors[3*o+0]=r.r,this.colors[3*o+1]=r.g,this.colors[3*o+2]=r.b;for(var a=0;t>a;a++)this.uniforms.transformMatrix.value[a]=(new THREE.Matrix4).makeTranslation(.5*random.range(-this.radius,this.radius),.5*random.range(-this.radius,this.radius),.5*random.range(-this.radius,this.radius));this.geometry.addAttribute("position",new THREE.BufferAttribute(this.positions,3)),this.geometry.addAttribute("customColor",new THREE.BufferAttribute(this.colors,3)),this.geometry.addAttribute("size",new THREE.BufferAttribute(this.sizes,1)),this.geometry.addAttribute("transformIndex",new THREE.BufferAttribute(this.transformIndices,1)),this.object=new THREE.PointCloud(this.geometry,this.material),this.object.position.y-=.2*this.radius,this.poem.scene.add(this.object),this.poem.emitter.on("update",this.update.bind(this))},error:function(t){throw new Error("Could not load assets for the UniformPositionalMatrices",t)},update:function(t){this.uniforms.time.value=t.now}};


},{"../../utils/loadText":44,"../../utils/loadTexture":45,"../../utils/random":46,"rsvp":95}],26:[function(require,module,exports){
require("./utils/ThreeConsole");var manifests=require("../manifests"),routing=require("./core/routing"),ui=require("./core/ui")(manifests);routing.start(require("./core/poem"),manifests);


},{"../manifests":53,"./core/poem":13,"./core/routing":15,"./core/ui":16,"./utils/ThreeConsole":41}],27:[function(require,module,exports){
THREE.BloomPass=function(e,r,o,n){e=void 0!==e?e:1,r=void 0!==r?r:25,o=void 0!==o?o:4,n=void 0!==n?n:256;var t={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat};this.renderTargetX=new THREE.WebGLRenderTarget(n,n,t),this.renderTargetY=new THREE.WebGLRenderTarget(n,n,t),void 0===THREE.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var i=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(i.uniforms),this.copyUniforms.opacity.value=e,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,blending:THREE.AdditiveBlending,transparent:!0}),void 0===THREE.ConvolutionShader&&console.error("THREE.BloomPass relies on THREE.ConvolutionShader");var a=THREE.ConvolutionShader;this.convolutionUniforms=THREE.UniformsUtils.clone(a.uniforms),this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurx,this.convolutionUniforms.cKernel.value=THREE.ConvolutionShader.buildKernel(o),this.materialConvolution=new THREE.ShaderMaterial({uniforms:this.convolutionUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{KERNEL_SIZE_FLOAT:r.toFixed(1),KERNEL_SIZE_INT:r.toFixed(0)}}),this.enabled=!0,this.needsSwap=!1,this.clear=!1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null),this.scene.add(this.quad)},THREE.BloomPass.prototype={render:function(e,r,o,n,t){t&&e.context.disable(e.context.STENCIL_TEST),this.quad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=o,this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurX,e.render(this.scene,this.camera,this.renderTargetX,!0),this.convolutionUniforms.tDiffuse.value=this.renderTargetX,this.convolutionUniforms.uImageIncrement.value=THREE.BloomPass.blurY,e.render(this.scene,this.camera,this.renderTargetY,!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetY,t&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,o,this.clear)}},THREE.BloomPass.blurX=new THREE.Vector2(.001953125,0),THREE.BloomPass.blurY=new THREE.Vector2(0,.001953125);


},{}],28:[function(require,module,exports){
THREE.EffectComposer=function(e,r){if(this.renderer=e,void 0===r){var t=window.innerWidth||1,i=window.innerHeight||1,s={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};r=new THREE.WebGLRenderTarget(t,i,s)}this.renderTarget1=r,this.renderTarget2=r.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},THREE.EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,r){this.passes.splice(r,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var r,t,i=!1,s=this.passes.length;for(t=0;s>t;t++)if(r=this.passes[t],r.enabled){if(r.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),r.needsSwap){if(i){var n=this.renderer.context;n.stencilFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.stencilFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}r instanceof THREE.MaskPass?i=!0:r instanceof THREE.ClearMaskPass&&(i=!1)}},reset:function(e){void 0===e&&(e=this.renderTarget1.clone(),e.width=window.innerWidth,e.height=window.innerHeight),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,r){var t=this.renderTarget1.clone();t.width=e,t.height=r,this.reset(t)}};


},{}],29:[function(require,module,exports){
THREE.FilmPass=function(e,i,s,r){void 0===THREE.FilmShader&&console.error("THREE.FilmPass relies on THREE.FilmShader");var n=THREE.FilmShader;this.uniforms=THREE.UniformsUtils.clone(n.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),void 0!==r&&(this.uniforms.grayscale.value=r),void 0!==e&&(this.uniforms.nIntensity.value=e),void 0!==i&&(this.uniforms.sIntensity.value=i),void 0!==s&&(this.uniforms.sCount.value=s),this.enabled=!0,this.renderToScreen=!1,this.needsSwap=!0,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null),this.scene.add(this.quad)},THREE.FilmPass.prototype={render:function(e,i,s,r){this.uniforms.tDiffuse.value=s,this.uniforms.time.value+=r,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,i,!1)}};


},{}],30:[function(require,module,exports){
THREE.MaskPass=function(e,s){this.scene=e,this.camera=s,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype={render:function(e,s,t,a){var n=e.context;n.colorMask(!1,!1,!1,!1),n.depthMask(!1);var i,r;this.inverse?(i=0,r=1):(i=1,r=0),n.enable(n.STENCIL_TEST),n.stencilOp(n.REPLACE,n.REPLACE,n.REPLACE),n.stencilFunc(n.ALWAYS,i,4294967295),n.clearStencil(r),e.render(this.scene,this.camera,t,this.clear),e.render(this.scene,this.camera,s,this.clear),n.colorMask(!0,!0,!0,!0),n.depthMask(!0),n.stencilFunc(n.EQUAL,1,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,s,t,a){var n=e.context;n.disable(n.STENCIL_TEST)}};


},{}],31:[function(require,module,exports){
THREE.RenderPass=function(e,r,l,a,o){this.scene=e,this.camera=r,this.overrideMaterial=l,this.clearColor=a,this.clearAlpha=void 0!==o?o:1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE.RenderPass.prototype={render:function(e,r,l,a){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,l,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}};


},{}],32:[function(require,module,exports){
THREE.ShaderPass=function(e,r){this.textureID=void 0!==r?r:"tDiffuse",this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype={render:function(e,r,t,s){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,r,this.clear)}};


},{}],33:[function(require,module,exports){
var glslify=require("glslify"),createShader=require("three-glslify")(THREE),shader=createShader(require("glslify/simple-adapter.js")("\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}","\n#define GLSLIFY 1\n\nhighp float a_x_random(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float dt = dot(co.xy, vec2(a, b));\n  highp float sn = mod(dt, 3.14);\n  return fract(sin(sn) * c);\n}\nuniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n  vec2 unitI_ToSide = (vUv * 2.0 - 1.0);\n  unitI_ToSide = pow(unitI_ToSide, vec2(3.0, 5.0)) * a_x_random(vUv) * -0.01;\n  vec4 texel = texture2D(tDiffuse, vUv);\n  vec4 smallshift = texture2D(tDiffuse, vUv + unitI_ToSide * 0.5);\n  vec4 bigshift = texture2D(tDiffuse, vUv + unitI_ToSide);\n  gl_FragColor = opacity * vec4(bigshift.x, texel.y, smallshift.z, texel.w);\n}",[{name:"opacity",type:"float"},{name:"tDiffuse",type:"sampler2D"}],[]));shader.uniforms.opacity.value=1,module.exports=shader;


},{"glslify":62,"glslify/simple-adapter.js":63,"three-glslify":104}],34:[function(require,module,exports){
require("./EffectComposer"),require("./MaskPass"),require("./BloomPass"),require("./RenderPass"),require("./ShaderPass"),require("./FilmPass");


},{"./BloomPass":27,"./EffectComposer":28,"./FilmPass":29,"./MaskPass":30,"./RenderPass":31,"./ShaderPass":32}],35:[function(require,module,exports){
THREE.ConvolutionShader={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{type:"t",value:null},uImageIncrement:{type:"v2",value:new THREE.Vector2(.001953125,0)},cKernel:{type:"fv1",value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vec2 imageCoord = vUv;","vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","imageCoord += uImageIncrement;","}","gl_FragColor = sum;","}"].join("\n"),buildKernel:function(e){function n(e,n){return Math.exp(-(e*e)/(2*n*n))}var r,i,o,t,v=25,a=2*Math.ceil(3*e)+1;for(a>v&&(a=v),t=.5*(a-1),i=new Array(a),o=0,r=0;a>r;++r)i[r]=n(r-t,e),o+=i[r];for(r=0;a>r;++r)i[r]/=o;return i}};


},{}],36:[function(require,module,exports){
THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")};


},{}],37:[function(require,module,exports){
THREE.FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")};


},{}],38:[function(require,module,exports){
THREE.FilmShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},nIntensity:{type:"f",value:.5},sIntensity:{type:"f",value:.05},sCount:{type:"f",value:4096},grayscale:{type:"i",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float x = vUv.x * vUv.y * time *  1000.0;","x = mod( x, 13.0 ) * mod( x, 123.0 );","float dx = mod( x, 0.01 );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")};


},{}],39:[function(require,module,exports){
var soundcloud=require("soundcloud-badge"),mute=require("./mute"),soundOff=!1,audio=null,fetchAndPlaySong=null,timesCalledSoundcloud=0,Music=function(u,o){fetchAndPlaySong=function(){var e=++timesCalledSoundcloud;soundcloud({client_id:"6057c9af862bf245d4c402179e317f52",song:o.url,dark:!1,getFonts:!1},function(u,n,d,t){if(e===timesCalledSoundcloud){if(mute.muted())return void $(".npm-scb-white").hide();if($(".npm-scb-white").show(),u)throw u;audio=new Audio,audio.src=n,audio.play(),audio.loop=!0,audio.volume=o.volume||.6,$(audio).on("loadedmetadata",function(){audio&&(audio.currentTime=o.startTime||0)})}}),u.emitter.on("destroy",function(){audio&&(audio.pause(),audio=null),$(".npm-scb-white").remove()})},mute.muted()||(fetchAndPlaySong(),fetchAndPlaySong=null)};Music.prototype.muted=!1,mute.emitter.on("mute",function(u){audio&&audio.pause(),$(".npm-scb-white").hide()}),mute.emitter.on("unmute",function(u){audio&&audio.play(),fetchAndPlaySong&&(fetchAndPlaySong(),fetchAndPlaySong=null),$(".npm-scb-white").show()}),module.exports=Music;


},{"./mute":40,"soundcloud-badge":96}],40:[function(require,module,exports){
var poemMute=require("poem-mute"),mute=poemMute();window.mutePrime=mute,window.mutePrimeEmitter=mute.emitter,module.exports=mute;


},{"poem-mute":89}],41:[function(require,module,exports){
function roundTo(o,n){return"number"==typeof n?Math.round(Math.pow(10,n)*o)/Math.pow(10,n):o}THREE.Console={vector:function(o,n){var e;e=o instanceof THREE.Vector2||o instanceof THREE.Vector3||o instanceof THREE.Vector4?[o]:o,console.table(_.map(e,function(o){return _.map(o.toArray(),function(o){return roundTo(o,n)})}))},face:function(o){var n;n=o instanceof THREE.Face3?[o]:o,console.table(_.map(n,function(o){return[o.a,o.b,o.c]}))},matrix:function(o,n){var e,t,r,c,a;for(a=[],t=0,c=o instanceof THREE.Matrix4?o.elements:o,e=0;e<c.length;e++)0===t&&a.push([]),r=roundTo(c[e],n),a[Math.floor(e/4)%4].push(r),t++,t%=4,e%16===15&&(console.table(a),a=[])}},window.consoleMatrix=THREE.Console.matrix,window.consoleVector=THREE.Console.vector,window.consoleFace=THREE.Console.face,module.exports=THREE.Console;


},{}],42:[function(require,module,exports){
var calculateSquaredTextureWidth=function(e){for(var r=1,t=0;e/4>r*r;)t++,r=Math.pow(2,t);return r};module.exports=calculateSquaredTextureWidth;


},{}],43:[function(require,module,exports){
module.exports=function(e){return function(){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}};


},{}],44:[function(require,module,exports){
var RSVP=require("rsvp"),loadText=function(e,t,n){var o=new RSVP.Promise(function(o,r){$.ajax(e,{dataType:"text"}).then(function(e){_.isObject(t)&&(t[n]=e),o(e)},function(e){r(e)})});return o};module.exports=loadText;


},{"rsvp":95}],45:[function(require,module,exports){
var RSVP=require("rsvp"),loadTexture=function(e,r,o){return new RSVP.Promise(function(t,u){THREE.ImageUtils.loadTexture(e,void 0,function(e){_.isObject(r)&&(r[o]=e),t(e)},u)})};module.exports=loadTexture;


},{"rsvp":95}],46:[function(require,module,exports){
var random={flip:function(){return Math.random()>.5?!0:!1},range:function(n,r){return Math.random()*(r-n)+n},rangeInt:function(n,r){return Math.floor(this.range(n,r+1))},rangeLow:function(n,r){return Math.random()*Math.random()*(r-n)+n},rangeHigh:function(n,r){return(1-Math.random()*Math.random())*(r-n)+n}};module.exports=random;


},{}],47:[function(require,module,exports){
function unitSimplex(n,e){return(generator.noise(n,e)+1)/2}var perlinSimplex=require("perlin-simplex"),generator=new perlinSimplex,simplex2={flip:function(n,e){return generator.noise(n,e)>0?!0:!1},range:function(n,e,r,i){return unitSimplex(n,e)*(i-r)+r},rangeInt:function(n,e,r,i){return Math.floor(this.range(r,i+1))},rangeLow:function(n,e,r,i){var t=unitSimplex(n,e);return t*t*(i-r)+r},rangeHigh:function(n,e,r,i){var t=unitSimplex(n,e);return(1-t*t)*(i-r)+r}};module.exports=simplex2;


},{"perlin-simplex":75}],48:[function(require,module,exports){
THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*E.autoRotateSpeed}function o(){return Math.pow(.95,E.zoomSpeed)}function i(t){if(E.enabled!==!1){if(t.preventDefault(),t.button===E.mouseButtons.ORBIT){if(E.noRotate===!0)return;j=V.ROTATE,f.set(t.clientX,t.clientY)}else if(t.button===E.mouseButtons.ZOOM){if(E.noZoom===!0)return;j=V.DOLLY,H.set(t.clientX,t.clientY)}else if(t.button===E.mouseButtons.PAN){if(E.noPan===!0)return;j=V.PAN,O.set(t.clientX,t.clientY)}j!==V.NONE&&(document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",s,!1),E.dispatchEvent(Y))}}function a(t){if(E.enabled!==!1){t.preventDefault();var e=E.domElement===document?E.domElement.body:E.domElement;if(j===V.ROTATE){if(E.noRotate===!0)return;b.set(t.clientX,t.clientY),T.subVectors(b,f),E.rotateLeft(2*Math.PI*T.x/e.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*T.y/e.clientHeight*E.rotateSpeed),f.copy(b)}else if(j===V.DOLLY){if(E.noZoom===!0)return;M.set(t.clientX,t.clientY),P.subVectors(M,H),P.y>0?E.dollyIn():E.dollyOut(),H.copy(M)}else if(j===V.PAN){if(E.noPan===!0)return;y.set(t.clientX,t.clientY),v.subVectors(y,O),E.pan(v.x,v.y),O.copy(y)}j!==V.NONE&&E.update()}}function s(){E.enabled!==!1&&(document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",s,!1),E.dispatchEvent(I),j=V.NONE)}function r(t){if(E.enabled!==!1&&E.noZoom!==!0&&j===V.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?E.dollyOut():E.dollyIn(),E.update(),E.dispatchEvent(Y),E.dispatchEvent(I)}}function c(t){if(E.enabled!==!1&&E.noKeys!==!0&&E.noPan!==!0)switch(t.keyCode){case E.keys.UP:E.pan(0,E.keyPanSpeed),E.update();break;case E.keys.BOTTOM:E.pan(0,-E.keyPanSpeed),E.update();break;case E.keys.LEFT:E.pan(E.keyPanSpeed,0),E.update();break;case E.keys.RIGHT:E.pan(-E.keyPanSpeed,0),E.update()}}function h(t){if(E.enabled!==!1){switch(t.touches.length){case 1:if(E.noRotate===!0)return;j=V.TOUCH_ROTATE,f.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(E.noZoom===!0)return;j=V.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);H.set(0,o);break;case 3:if(E.noPan===!0)return;j=V.TOUCH_PAN,O.set(t.touches[0].pageX,t.touches[0].pageY);break;default:j=V.NONE}j!==V.NONE&&E.dispatchEvent(Y)}}function u(t){if(E.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=E.domElement===document?E.domElement.body:E.domElement;switch(t.touches.length){case 1:if(E.noRotate===!0)return;if(j!==V.TOUCH_ROTATE)return;b.set(t.touches[0].pageX,t.touches[0].pageY),T.subVectors(b,f),E.rotateLeft(2*Math.PI*T.x/e.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*T.y/e.clientHeight*E.rotateSpeed),f.copy(b),E.update();break;case 2:if(E.noZoom===!0)return;if(j!==V.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(n*n+o*o);M.set(0,i),P.subVectors(M,H),P.y>0?E.dollyOut():E.dollyIn(),H.copy(M),E.update();break;case 3:if(E.noPan===!0)return;if(j!==V.TOUCH_PAN)return;y.set(t.touches[0].pageX,t.touches[0].pageY),v.subVectors(y,O),E.pan(v.x,v.y),O.copy(y),E.update();break;default:j=V.NONE}}}function d(){E.enabled!==!1&&(E.dispatchEvent(I),j=V.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var l,p,E=this,m=1e-6,f=new THREE.Vector2,b=new THREE.Vector2,T=new THREE.Vector2,O=new THREE.Vector2,y=new THREE.Vector2,v=new THREE.Vector2,g=new THREE.Vector3,R=new THREE.Vector3,H=new THREE.Vector2,M=new THREE.Vector2,P=new THREE.Vector2,L=0,N=0,A=1,w=new THREE.Vector3,k=new THREE.Vector3,x=new THREE.Quaternion,V={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},j=V.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var D=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),S=D.clone().inverse(),U={type:"change"},Y={type:"start"},I={type:"end"};this.rotateLeft=function(t){void 0===t&&(t=n()),N-=t},this.rotateUp=function(t){void 0===t&&(t=n()),L-=t},this.panLeft=function(t){var e=this.object.matrix.elements;g.set(e[0],e[1],e[2]),g.multiplyScalar(-t),w.add(g)},this.panUp=function(t){var e=this.object.matrix.elements;g.set(e[4],e[5],e[6]),g.multiplyScalar(t),w.add(g)},this.pan=function(t,e){var n=E.domElement===document?E.domElement.body:E.domElement;if(void 0!==E.object.fov){var o=E.object.position,i=o.clone().sub(E.target),a=i.length();a*=Math.tan(E.object.fov/2*Math.PI/180),E.panLeft(2*t*a/n.clientHeight),E.panUp(2*e*a/n.clientHeight)}else void 0!==E.object.top?(E.panLeft(t*(E.object.right-E.object.left)/n.clientWidth),E.panUp(e*(E.object.top-E.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){void 0===t&&(t=o()),A/=t},this.dollyOut=function(t){void 0===t&&(t=o()),A*=t},this.update=function(){var t=this.object.position;R.copy(t).sub(this.target),R.applyQuaternion(D),l=Math.atan2(R.x,R.z),p=Math.atan2(Math.sqrt(R.x*R.x+R.z*R.z),R.y),this.autoRotate&&j===V.NONE&&this.rotateLeft(n()),l+=N,p+=L,l=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,l)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(m,Math.min(Math.PI-m,p));var e=R.length()*A;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(w),R.x=e*Math.sin(p)*Math.sin(l),R.y=e*Math.cos(p),R.z=e*Math.sin(p)*Math.cos(l),R.applyQuaternion(S),t.copy(this.target).add(R),this.object.lookAt(this.target),N=0,L=0,A=1,w.set(0,0,0),(k.distanceToSquared(this.object.position)>m||8*(1-x.dot(this.object.quaternion))>m)&&(this.dispatchEvent(U),k.copy(this.object.position),x.copy(this.object.quaternion))},this.reset=function(){j=V.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return l},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",r,!1),this.domElement.addEventListener("DOMMouseScroll",r,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",d,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",c,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,module.exports=THREE.OrbitControls;


},{}],49:[function(require,module,exports){
var Stats=function(){var e=Date.now(),t=e,n=0,i=1/0,a=0,d=0,o=1/0,l=0,s=0,r=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),g(++r%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var p=document.createElement("div");p.id="fps",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(p);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",p.appendChild(h);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",p.appendChild(f);f.children.length<74;){var x=document.createElement("span");x.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(x)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var u=document.createElement("div");u.id="msText",u.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",u.innerHTML="MS",m.appendChild(u);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);v.children.length<74;){var y=document.createElement("span");y.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(y)}var g=function(e){switch(r=e){case 0:p.style.display="block",m.style.display="none";break;case 1:p.style.display="none",m.style.display="block"}},b=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:12,domElement:c,setMode:g,begin:function(){e=Date.now()},end:function(){var r=Date.now();return n=r-e,i=Math.min(i,n),a=Math.max(a,n),u.textContent=n+" MS ("+i+"-"+a+")",b(v,Math.min(30,30-n/200*30)),s++,r>t+1e3&&(d=Math.round(1e3*s/(r-t)),o=Math.min(o,d),l=Math.max(l,d),h.textContent=d+" FPS ("+o+"-"+l+")",b(f,Math.min(30,30-d/100*30)),t=r,s=0),r},update:function(){e=this.end()}}};"object"==typeof module&&(module.exports=Stats);


},{}],50:[function(require,module,exports){
THREE.StereoEffect=function(e){this.separation=3;var t,r,a=new THREE.Vector3,o=new THREE.Quaternion,i=new THREE.Vector3,n=new THREE.PerspectiveCamera,p=new THREE.PerspectiveCamera;e.autoClear=!1,this.setSize=function(a,o){t=a/2,r=o,e.setSize(a,o)},this.render=function(s,c){s.updateMatrixWorld(),void 0===c.parent&&c.updateMatrixWorld(),c.matrixWorld.decompose(a,o,i),n.fov=c.fov,n.aspect=.5*c.aspect,n.near=c.near,n.far=c.far,n.updateProjectionMatrix(),n.position.copy(a),n.quaternion.copy(o),n.translateX(-this.separation),p.near=c.near,p.far=c.far,p.projectionMatrix=n.projectionMatrix,p.position.copy(a),p.quaternion.copy(o),p.translateX(this.separation),e.setViewport(0,0,2*t,r),e.clear(),e.setViewport(0,0,t,r),e.render(s,n),e.setViewport(t,0,t,r),e.render(s,p)}},module.exports=THREE.StereoEffect;


},{}],51:[function(require,module,exports){
module.exports={name:"Carbon Dioxide Earth",description:"Mapping NASA Data",order:0,config:{camera:{x:-400,far:3e3}},components:{sphere:{construct:require("../js/demos/Earth"),properties:{}},controls:{construct:require("../js/components/cameras/Controls"),properties:{minDistance:500,maxDistance:1e3,zoomSpeed:.1,autoRotate:!0,autoRotateSpeed:.2}},info:{construct:require("../js/components/Info"),properties:{documentTitle:"Earth's CO2 – a Three.js Visualization adapted by Greg Tatum",title:"Earth's CO2",subtitle:"3d Visualisation of a map from NASA",appendCredits:"<br/> Map visualization by <a href='http://svs.gsfc.nasa.gov/cgi-bin/details.cgi?aid=11719'>NASA's Goddard Space Flight Center</a>",titleCss:{"font-size":"3.35em"},subtitleCss:{"font-size":"0.7em"},showArrowNext:!0}},stars:{construct:require("../js/components/Stars")},lights:{construct:require("../js/components/lights/TrackCameraLights")}}};


},{"../js/components/Info":1,"../js/components/Stars":2,"../js/components/cameras/Controls":7,"../js/components/lights/TrackCameraLights":10,"../js/demos/Earth":17}],52:[function(require,module,exports){
module.exports={name:"Endless Terrain",description:"An ever-repeating environment",order:0,config:{camera:{x:0,z:500,near:.1,fov:40},renderer:{useEffects:!0}},components:{endlessTerrain:{construct:require("../js/demos/EndlessTerrain/endless"),properties:{positionY:-250}},swivelCamera:{construct:require("../js/components/cameras/Swivel")},particles:{"function":require("../js/components/ambiance/particles/particles")},constantMove:{construct:require("../js/components/cameras/ConstantMove"),properties:{z:-1}},cloudsTop:{construct:require("../js/components/ambiance/Clouds"),properties:{height:200,rotation:Math.PI/2}},music:{construct:require("../js/sound/Music"),properties:{url:"https://soundcloud.com/synaptyx/mech-attack"}}}};


},{"../js/components/ambiance/Clouds":3,"../js/components/ambiance/particles/particles":4,"../js/components/cameras/ConstantMove":6,"../js/components/cameras/Swivel":8,"../js/demos/EndlessTerrain/endless":18,"../js/sound/Music":39}],53:[function(require,module,exports){
module.exports={meshGroupBoxDemo:require("./meshGroupBoxDemo"),carbonDioxideEarth:require("./carbonDioxideEarth"),endlessTerrain:require("./endlessTerrain"),tetrahedra:require("./tetrahedra"),sineGravityCloud:require("./sineGravityCloud"),uniformPositionalMatrices:require("./uniformPositionalMatrices"),texturePositionalMatrices:require("./texturePositionalMatrices")};


},{"./carbonDioxideEarth":51,"./endlessTerrain":52,"./meshGroupBoxDemo":54,"./sineGravityCloud":55,"./tetrahedra":56,"./texturePositionalMatrices":57,"./uniformPositionalMatrices":58}],54:[function(require,module,exports){
module.exports={name:"MeshGroup() Proof of Concept",description:"Batching multiple Three.js meshes into one draw call",order:50,config:{camera:{x:-400}},components:{demo:{construct:require("../js/demos/MeshGroupBoxDemo"),properties:{}},controls:{construct:require("../js/components/cameras/Controls")},grid:{construct:require("../js/demos/Grid")},stats:{construct:require("../js/components/utils/Stats")}}};


},{"../js/components/cameras/Controls":7,"../js/components/utils/Stats":11,"../js/demos/Grid":19,"../js/demos/MeshGroupBoxDemo":21}],55:[function(require,module,exports){
module.exports={name:"Sine Gravity Cloud",description:"An evolving cloud of movement",order:0,config:{camera:{x:-400},renderer:{useEffects:!1}},components:{controls:{construct:require("../js/components/cameras/Controls")},pointcloud:{construct:require("../js/demos/SineGravityCloud")},grid:{construct:require("../js/demos/Grid")}}};


},{"../js/components/cameras/Controls":7,"../js/demos/Grid":19,"../js/demos/SineGravityCloud":22}],56:[function(require,module,exports){
module.exports={name:"Tetrahedra",description:"Live coding demo",order:0,config:{camera:{x:-300,near:.1,far:1e4,fov:40},renderer:{useEffects:!0}},components:{controls:{construct:require("../js/components/cameras/Controls")},mouse:{"function":require("../js/components/hids/mouse-tracker")},tetrahedra:{"function":require("../js/demos/tetrahedra"),properties:{dispersion:150,radius:10,count:100,mouseRef:"mouse"}},lights:{construct:require("../js/components/lights/TrackCameraLights")},cloudsTop:{construct:require("../js/components/ambiance/Clouds"),properties:{width:2e3,height:1e3,rotation:-Math.PI/2}},cloudsBottom:{construct:require("../js/components/ambiance/Clouds"),properties:{width:2e3,height:-1e3,rotation:-Math.PI/2,offset:new THREE.Vector2(-.3,.8)}}}};


},{"../js/components/ambiance/Clouds":3,"../js/components/cameras/Controls":7,"../js/components/hids/mouse-tracker":9,"../js/components/lights/TrackCameraLights":10,"../js/demos/tetrahedra":23}],57:[function(require,module,exports){
module.exports={name:"MeshGroup() Pre-Cursor 2",description:"Position matrices packed into a texture",order:52,config:{camera:{x:-400}},components:{controls:{construct:require("../js/components/cameras/Controls")},texturePositionalMatrices:{construct:require("../js/demos/texturePositionalMatrices")},grid:{construct:require("../js/demos/Grid")},stats:{construct:require("../js/components/utils/Stats")}}};


},{"../js/components/cameras/Controls":7,"../js/components/utils/Stats":11,"../js/demos/Grid":19,"../js/demos/texturePositionalMatrices":24}],58:[function(require,module,exports){
module.exports={name:"MeshGroup() Pre-Cursor 1",description:"Position matrices set in uniforms",order:51,config:{camera:{x:-400}},components:{controls:{construct:require("../js/components/cameras/Controls")},uniformPositionalMatrices:{construct:require("../js/demos/uniformPositionalMatrices")},grid:{construct:require("../js/demos/Grid")},stats:{construct:require("../js/components/utils/Stats")}}};


},{"../js/components/cameras/Controls":7,"../js/components/utils/Stats":11,"../js/demos/Grid":19,"../js/demos/uniformPositionalMatrices":25}],59:[function(require,module,exports){
!function(){var e=function(e){function t(e,t){if(e.indexOf)return e.indexOf(t);for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function r(e,r){var n=t(e,r);-1!==n&&e.splice(n,1)}function n(e,t){return"[object "+t+"]"===Object.prototype.toString.call(e)}function i(e){return n(e,"RegExp")}function s(e){return n(e,"Array")}function a(e){return"function"==typeof e}function o(e){var t;return t=null===e||"null"===e?null:"true"===e?!0:"false"===e?!1:e===f||"undefined"===e?f:""===e||isNaN(e)?e:parseFloat(e)}function u(e){for(var t=e.length,r=[];t--;)r[t]=o(e[t]);return r}function h(e,t){for(var r,n,i=(e||"").replace("?","").split("&"),s=i.length,a={};s--;)r=i[s].split("="),n=t?o(r[1]):r[1],a[r[0]]="string"==typeof n?decodeURIComponent(n):n;return a}function p(){this.bypassed=new e.Signal,this.routed=new e.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function c(t,r,n,s){var a=i(t),o=s.patternLexer;this._router=s,this._pattern=t,this._paramsIds=a?null:o.getParamIds(t),this._optionalParamsIds=a?null:o.getOptionalParamsIds(t),this._matchRegexp=a?t:o.compilePattern(t,s.ignoreCase),this.matched=new e.Signal,this.switched=new e.Signal,r&&this.matched.add(r),this._priority=n||0}var l,d,f;return d=""===/t(.+)?/.exec("t")[1],p.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new p},addRoute:function(e,t,r){var n=new c(e,t,r,this);return this._sortedInsert(n),n},removeRoute:function(e){r(this._routes,e),e._destroy()},removeAllRoutes:function(){for(var e=this.getNumRoutes();e--;)this._routes[e]._destroy();this._routes.length=0},parse:function(e,t){if(e=e||"",t=t||[],this.ignoreState||e!==this._prevMatchedRequest&&e!==this._prevBypassedRequest){var r,n=this._getMatchedRoutes(e),i=0,s=n.length;if(s)for(this._prevMatchedRequest=e,this._notifyPrevRoutes(n,e),this._prevRoutes=n;s>i;)r=n[i],r.route.matched.dispatch.apply(r.route.matched,t.concat(r.params)),r.isFirst=!i,this.routed.dispatch.apply(this.routed,t.concat([e,r])),i+=1;else this._prevBypassedRequest=e,this.bypassed.dispatch.apply(this.bypassed,t.concat([e]));this._pipeParse(e,t)}},_notifyPrevRoutes:function(e,t){for(var r,n=0;r=this._prevRoutes[n++];)r.route.switched&&this._didSwitch(r.route,e)&&r.route.switched.dispatch(t)},_didSwitch:function(e,t){for(var r,n=0;r=t[n++];)if(r.route===e)return!1;return!0},_pipeParse:function(e,t){for(var r,n=0;r=this._piped[n++];)r.parse(e,t)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(e){var t=this._routes,r=t.length;do--r;while(t[r]&&e._priority<=t[r]._priority);t.splice(r+1,0,e)},_getMatchedRoutes:function(e){for(var t,r=[],n=this._routes,i=n.length;(t=n[--i])&&((!r.length||this.greedy||t.greedy)&&t.match(e)&&r.push({route:t,params:t._getParamsArray(e)}),this.greedyEnabled||!r.length););return r},pipe:function(e){this._piped.push(e)},unpipe:function(e){r(this._piped,e)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},l=new p,l.VERSION="0.12.0",l.NORM_AS_ARRAY=function(e,t){return[t.vals_]},l.NORM_AS_OBJECT=function(e,t){return[t]},c.prototype={greedy:!1,rules:void 0,match:function(e){return e=e||"",this._matchRegexp.test(e)&&this._validateParams(e)},_validateParams:function(e){var t,r=this.rules,n=this._getParamsObject(e);for(t in r)if("normalize_"!==t&&r.hasOwnProperty(t)&&!this._isValidParam(e,t,n))return!1;return!0},_isValidParam:function(e,r,n){var o=this.rules[r],u=n[r],h=!1,p=0===r.indexOf("?");return null==u&&this._optionalParamsIds&&-1!==t(this._optionalParamsIds,r)?h=!0:i(o)?(p&&(u=n[r+"_"]),h=o.test(u)):s(o)?(p&&(u=n[r+"_"]),h=this._isValidArrayRule(o,u)):a(o)&&(h=o(u,e,n)),h},_isValidArrayRule:function(e,r){if(!this._router.ignoreCase)return-1!==t(e,r);"string"==typeof r&&(r=r.toLowerCase());for(var n,i,s=e.length;s--;)if(n=e[s],i="string"==typeof n?n.toLowerCase():n,i===r)return!0;return!1},_getParamsObject:function(e){for(var r,n,i=this._router.shouldTypecast,s=this._router.patternLexer.getParamValues(e,this._matchRegexp,i),a={},u=s.length;u--;)n=s[u],this._paramsIds&&(r=this._paramsIds[u],0===r.indexOf("?")&&n&&(a[r+"_"]=n,n=h(n,i),s[u]=n),d&&""===n&&-1!==t(this._optionalParamsIds,r)&&(n=void 0,s[u]=n),a[r]=n),a[u]=n;return a.request_=i?o(e):e,a.vals_=s,a},_getParamsArray:function(e){var t,r=this.rules?this.rules.normalize_:null;return r=r||this._router.normalizeFn,t=r&&a(r)?r(e,this._getParamsObject(e)):this._getParamsObject(e).vals_},interpolate:function(e){var t=this._router.patternLexer.interpolate(this._pattern,e);if(!this._validateParams(t))throw new Error("Generated string doesn't validate against `Route.rules`.");return t},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},p.prototype.patternLexer=function(){function e(){var e,t;for(e in d)d.hasOwnProperty(e)&&(t=d[e],t.id="__CR_"+e+"__",t.save="save"in t?t.save.replace("{{id}}",t.id):t.id,t.rRestore=new RegExp(t.id,"g"))}function t(e,t){var r,n=[];for(e.lastIndex=0;r=e.exec(t);)n.push(r[1]);return n}function r(e){return t(l,e)}function n(e){return t(d.OP.rgx,e)}function i(e,t){return e=e||"",e&&(v===f?e=e.replace(p,""):v===_&&(e=e.replace(c,"")),e=s(e,"rgx","save"),e=e.replace(h,"\\$&"),e=s(e,"rRestore","res"),v===f&&(e="\\/?"+e)),v!==g&&(e+="\\/?"),new RegExp("^"+e+"$",t?"i":"")}function s(e,t,r){var n,i;for(i in d)d.hasOwnProperty(i)&&(n=d[i],e=e.replace(n[t],n[r]));return e}function a(e,t,r){var n=t.exec(e);return n&&(n.shift(),r&&(n=u(n))),n}function o(e,t){if("string"!=typeof e)throw new Error("Route pattern should be a string.");var r=function(e,r){var n;if(r="?"===r.substr(0,1)?r.substr(1):r,null!=t[r]){if("object"==typeof t[r]){var i=[];for(var s in t[r])i.push(encodeURI(s+"="+t[r][s]));n="?"+i.join("&")}else n=String(t[r]);if(-1===e.indexOf("*")&&-1!==n.indexOf("/"))throw new Error('Invalid value "'+n+'" for segment "'+e+'".')}else{if(-1!==e.indexOf("{"))throw new Error("The segment "+e+" is required.");n=""}return n};return d.OS.trail||(d.OS.trail=new RegExp("(?:"+d.OS.id+")+$")),e.replace(d.OS.rgx,d.OS.save).replace(l,r).replace(d.OS.trail,"").replace(d.OS.rRestore,"/")}var h=/[\\.+*?\^$\[\](){}\/'#]/g,p=/^\/|\/$/g,c=/\/$/g,l=/(?:\{|:)([^}:]+)(?:\}|:)/g,d={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},f=1,g=2,_=3,v=f;return e(),{strict:function(){v=g},loose:function(){v=f},legacy:function(){v=_},getParamIds:r,getOptionalParamsIds:n,getParamValues:a,compilePattern:i,interpolate:o}}(),l};"function"==typeof define&&define.amd?define(["signals"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("signals")):window.crossroads=e(window.signals)}();


},{"signals":60}],60:[function(require,module,exports){
!function(i){function t(i,t,n,e,s){this._listener=t,this._isOnce=n,this.context=e,this._signal=i,this._priority=s||0}function n(i,t){if("function"!=typeof i)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function e(){this._bindings=[],this._prevParams=null;var i=this;this.dispatch=function(){e.prototype.dispatch.apply(i,arguments)}}t.prototype={active:!0,params:null,execute:function(i){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(i):i,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(i,n,e,s){var r,o=this._indexOfListener(i,e);if(-1!==o){if(r=this._bindings[o],r.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else r=new t(this,i,n,e,s),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(i){var t=this._bindings.length;do--t;while(this._bindings[t]&&i._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,i)},_indexOfListener:function(i,t){for(var n,e=this._bindings.length;e--;)if(n=this._bindings[e],n._listener===i&&n.context===t)return e;return-1},has:function(i,t){return-1!==this._indexOfListener(i,t)},add:function(i,t,e){return n(i,"add"),this._registerListener(i,!1,t,e)},addOnce:function(i,t,e){return n(i,"addOnce"),this._registerListener(i,!0,t,e)},remove:function(i,t){n(i,"remove");var e=this._indexOfListener(i,t);return-1!==e&&(this._bindings[e]._destroy(),this._bindings.splice(e,1)),i},removeAll:function(){for(var i=this._bindings.length;i--;)this._bindings[i]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(i){if(this.active){var t,n=Array.prototype.slice.call(arguments),e=this._bindings.length;if(this.memorize&&(this._prevParams=n),e){t=this._bindings.slice(),this._shouldPropagate=!0;do e--;while(t[e]&&this._shouldPropagate&&t[e].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=e;s.Signal=e,"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:i.signals=s}(this);


},{}],61:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};


},{}],62:[function(require,module,exports){
function noop(){throw new Error("You should bundle your code using `glslify` as a transform.")}module.exports=noop;


},{}],63:[function(require,module,exports){
function programify(r,t,e,o){return{vertex:r,fragment:t,uniforms:e,attributes:o}}module.exports=programify;


},{}],64:[function(require,module,exports){
!function(){var e=function(e){var n=function(n){function t(e){return String(e||"").replace(/\W/g,"\\$&")}function a(e){if(!e)return"";var n=new RegExp("^"+t(l.prependHash)+"|"+t(l.appendHash)+"$","g");return e.replace(n,"")}function r(){var e=R.exec(l.getURL()),n=e&&e[1]||"";try{return l.raw?n:decodeURIComponent(n)}catch(t){return n}}function i(){return m?m.contentWindow.frameHash:null}function o(){m=y.createElement("iframe"),m.src="about:blank",m.style.display="none",y.body.appendChild(m)}function s(){if(m&&f!==i()){var e=m.contentWindow.document;e.open(),e.write("<html><head><title>"+y.title+'</title><script type="text/javascript">var frameHash="'+f+'";</script></head><body>&nbsp;</body></html>'),e.close()}}function c(e,n){if(f!==e){var t=f;f=e,x&&(n?m.contentWindow.frameHash=e:s()),l.changed.dispatch(a(e),a(t))}}function p(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,t)}function u(e,n,t){e.removeEventListener?e.removeEventListener(n,t,!1):e.detachEvent&&e.detachEvent("on"+n,t)}function d(e){e=Array.prototype.slice.call(arguments);var n=e.join(l.separator);return n=n?l.prependHash+n.replace(b,"")+l.appendHash:n}function h(e){return e=encodeURI(e),I&&z&&(e=e.replace(/\?/,"%3F")),e}var l,f,g,v,m,w,H=25,y=n.document,E=(n.history,e.Signal),R=/#(.*)$/,L=/(\?.*)|(\#.*)/,b=/^\#/,I=!1,U="onhashchange"in n&&7!==y.documentMode,x=I&&!U,z="file:"===location.protocol;return w=x?function(){var e=r(),n=i();n!==f&&n!==e?l.setHash(a(n)):e!==f&&c(e)}:function(){var e=r();e!==f&&c(e)},l={VERSION:"1.2.0",raw:!1,appendHash:"",prependHash:"/",separator:"/",changed:new E,stopped:new E,initialized:new E,init:function(){v||(f=r(),U?p(n,"hashchange",w):(x&&(m||o(),s()),g=setInterval(w,H)),v=!0,l.initialized.dispatch(a(f)))},stop:function(){v&&(U?u(n,"hashchange",w):(clearInterval(g),g=null),v=!1,l.stopped.dispatch(a(f)))},isActive:function(){return v},getURL:function(){return n.location.href},getBaseURL:function(){return l.getURL().replace(L,"")},setHash:function(e){e=d.apply(null,arguments),e!==f&&(c(e),e===f&&(l.raw||(e=h(e)),n.location.hash="#"+e))},replaceHash:function(e){e=d.apply(null,arguments),e!==f&&(c(e,!0),e===f&&(l.raw||(e=h(e)),n.location.replace("#"+e)))},getHash:function(){return a(f)},getHashAsArray:function(){return l.getHash().split(l.separator)},dispose:function(){l.stop(),l.initialized.dispose(),l.stopped.dispose(),l.changed.dispose(),m=l=n.hasher=null},toString:function(){return'[hasher version="'+l.VERSION+'" hash="'+l.getHash()+'"]'}},l.initialized.memorize=!0,l}(window);return n};"function"==typeof define&&define.amd?define(["signals"],e):"object"==typeof exports?module.exports=e(require("signals")):window.hasher=e(window.signals)}();


},{"signals":65}],65:[function(require,module,exports){
!function(i){function t(i,t,n,e,s){this._listener=t,this._isOnce=n,this.context=e,this._signal=i,this._priority=s||0}function n(i,t){if("function"!=typeof i)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function e(){this._bindings=[],this._prevParams=null;var i=this;this.dispatch=function(){e.prototype.dispatch.apply(i,arguments)}}t.prototype={active:!0,params:null,execute:function(i){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(i):i,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(i,n,e,s){var r,o=this._indexOfListener(i,e);if(-1!==o){if(r=this._bindings[o],r.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else r=new t(this,i,n,e,s),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(i){var t=this._bindings.length;do--t;while(this._bindings[t]&&i._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,i)},_indexOfListener:function(i,t){for(var n,e=this._bindings.length;e--;)if(n=this._bindings[e],n._listener===i&&n.context===t)return e;return-1},has:function(i,t){return-1!==this._indexOfListener(i,t)},add:function(i,t,e){return n(i,"add"),this._registerListener(i,!1,t,e)},addOnce:function(i,t,e){return n(i,"addOnce"),this._registerListener(i,!0,t,e)},remove:function(i,t){n(i,"remove");var e=this._indexOfListener(i,t);return-1!==e&&(this._bindings[e]._destroy(),this._bindings.splice(e,1)),i},removeAll:function(){for(var i=this._bindings.length;i--;)this._bindings[i]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(i){if(this.active){var t,n=Array.prototype.slice.call(arguments),e=this._bindings.length;if(this.memorize&&(this._prevParams=n),e){t=this._bindings.slice(),this._shouldPropagate=!0;do e--;while(t[e]&&this._shouldPropagate&&t[e].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=e;s.Signal=e,"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:i.signals=s}(this);


},{}],66:[function(require,module,exports){
function lerp(e,r,l){return e*(1-l)+r*l}module.exports=lerp;


},{}],67:[function(require,module,exports){
"use strict";function Promise(e){function n(e){return null===i?void f.push(e):void asap(function(){var n=i?e.onFulfilled:e.onRejected;if(null===n)return void(i?e.resolve:e.reject)(u);var t;try{t=n(u)}catch(o){return void e.reject(o)}e.resolve(t)})}function t(e){try{if(e===c)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void doResolve(n.bind(e),t,o)}i=!0,u=e,r()}catch(f){o(f)}}function o(e){i=!1,u=e,r()}function r(){for(var e=0,t=f.length;t>e;e++)n(f[e]);f=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var i=null,u=null,f=[],c=this;this.then=function(e,t){return new Promise(function(o,r){n(new Handler(e,t,o,r))})},doResolve(e,t,o)}function Handler(e,n,t,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=o}function doResolve(e,n,t){var o=!1;try{e(function(e){o||(o=!0,n(e))},function(e){o||(o=!0,t(e))})}catch(r){if(o)return;o=!0,t(r)}}var asap=require("asap");module.exports=Promise;


},{"asap":69}],68:[function(require,module,exports){
"use strict";function ValuePromise(e){this.then=function(n){return"function"!=typeof n?this:new Promise(function(r,t){asap(function(){try{r(n(e))}catch(o){t(o)}})})}}var Promise=require("./core.js"),asap=require("asap");module.exports=Promise,ValuePromise.prototype=Object.create(Promise.prototype);var TRUE=new ValuePromise(!0),FALSE=new ValuePromise(!1),NULL=new ValuePromise(null),UNDEFINED=new ValuePromise(void 0),ZERO=new ValuePromise(0),EMPTYSTRING=new ValuePromise("");Promise.resolve=function(e){if(e instanceof Promise)return e;if(null===e)return NULL;if(void 0===e)return UNDEFINED;if(e===!0)return TRUE;if(e===!1)return FALSE;if(0===e)return ZERO;if(""===e)return EMPTYSTRING;if("object"==typeof e||"function"==typeof e)try{var n=e.then;if("function"==typeof n)return new Promise(n.bind(e))}catch(r){return new Promise(function(e,n){n(r)})}return new ValuePromise(e)},Promise.from=Promise.cast=function(e){var n=new Error("Promise.from and Promise.cast are deprecated, use Promise.resolve instead");return n.name="Warning",console.warn(n.stack),Promise.resolve(e)},Promise.denodeify=function(e,n){return n=n||1/0,function(){var r=this,t=Array.prototype.slice.call(arguments);return new Promise(function(o,i){for(;t.length&&t.length>n;)t.pop();t.push(function(e,n){e?i(e):o(n)}),e.apply(r,t)})}},Promise.nodeify=function(e){return function(){var n=Array.prototype.slice.call(arguments),r="function"==typeof n[n.length-1]?n.pop():null;try{return e.apply(this,arguments).nodeify(r)}catch(t){if(null===r||"undefined"==typeof r)return new Promise(function(e,n){n(t)});asap(function(){r(t)})}}},Promise.all=function(){var e=1===arguments.length&&Array.isArray(arguments[0]),n=Array.prototype.slice.call(e?arguments[0]:arguments);if(!e){var r=new Error("Promise.all should be called with a single array, calling it with multiple arguments is deprecated");r.name="Warning",console.warn(r.stack)}return new Promise(function(e,r){function t(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,function(e){t(i,e)},r)}n[i]=u,0===--o&&e(n)}catch(a){r(a)}}if(0===n.length)return e([]);for(var o=n.length,i=0;i<n.length;i++)t(i,n[i])})},Promise.reject=function(e){return new Promise(function(n,r){r(e)})},Promise.race=function(e){return new Promise(function(n,r){e.forEach(function(e){Promise.resolve(e).then(n,r)})})},Promise.prototype.done=function(e,n){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(e){asap(function(){throw e})})},Promise.prototype.nodeify=function(e){return"function"!=typeof e?this:void this.then(function(n){asap(function(){e(null,n)})},function(n){asap(function(){e(n)})})},Promise.prototype["catch"]=function(e){return this.then(null,e)};


},{"./core.js":67,"asap":69}],69:[function(require,module,exports){
(function (process){
function flush(){for(;head.next;){head=head.next;var e=head.task;head.task=void 0;var s=head.domain;s&&(head.domain=void 0,s.enter());try{e()}catch(n){if(isNodeJS)throw s&&s.exit(),setTimeout(flush,0),s&&s.enter(),n;setTimeout(function(){throw n},0)}s&&s.exit()}flushing=!1}function asap(e){tail=tail.next={task:e,domain:isNodeJS&&process.domain,next:null},flushing||(flushing=!0,requestFlush())}var head={task:void 0,next:null},tail=head,flushing=!1,requestFlush=void 0,isNodeJS=!1;if("undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestFlush=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)requestFlush="undefined"!=typeof window?setImmediate.bind(window,flush):function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestFlush=function(){channel.port2.postMessage(0)}}else requestFlush=function(){setTimeout(flush,0)};module.exports=asap;


}).call(this,require('_process'))

},{"_process":113}],70:[function(require,module,exports){
(function(){"use strict";function n(n){var e=this,t={db:null};if(n)for(var r in n)t[r]=n[r];return new l(function(n,r){var o=v.open(t.name,t.version);o.onerror=function(){r(o.error)},o.onupgradeneeded=function(){o.result.createObjectStore(t.storeName)},o.onsuccess=function(){t.db=o.result,e._dbInfo=t,n()}})}function e(n,e){var t=this;"string"!=typeof n&&(window.console.warn(n+" used as a key, but it is not a string."),n=String(n));var r=new l(function(e,r){t.ready().then(function(){var o=t._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(n);a.onsuccess=function(){var n=a.result;void 0===n&&(n=null),e(n)},a.onerror=function(){r(a.error)}})["catch"](r)});return d(r,e),r}function t(n,e){var t=this,r=new l(function(e,r){t.ready().then(function(){var o=t._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor(),c=1;a.onsuccess=function(){var t=a.result;if(t){var r=n(t.value,t.key,c++);void 0!==r?e(r):t["continue"]()}else e()},a.onerror=function(){r(a.error)}})["catch"](r)});return d(r,e),r}function r(n,e,t){var r=this;"string"!=typeof n&&(window.console.warn(n+" used as a key, but it is not a string."),n=String(n));var o=new l(function(t,o){r.ready().then(function(){var i=r._dbInfo,a=i.db.transaction(i.storeName,"readwrite"),c=a.objectStore(i.storeName);null===e&&(e=void 0);var u=c.put(e,n);a.oncomplete=function(){void 0===e&&(e=null),t(e)},a.onabort=a.onerror=function(){o(u.error)}})["catch"](o)});return d(o,t),o}function o(n,e){var t=this;"string"!=typeof n&&(window.console.warn(n+" used as a key, but it is not a string."),n=String(n));var r=new l(function(e,r){t.ready().then(function(){var o=t._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),c=a["delete"](n);i.oncomplete=function(){e()},i.onerror=function(){r(c.error)},i.onabort=function(n){var e=n.target.error;"QuotaExceededError"===e&&r(e)}})["catch"](r)});return d(r,e),r}function i(n){var e=this,t=new l(function(n,t){e.ready().then(function(){var r=e._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),a=i.clear();o.oncomplete=function(){n()},o.onabort=o.onerror=function(){t(a.error)}})["catch"](t)});return d(t,n),t}function a(n){var e=this,t=new l(function(n,t){e.ready().then(function(){var r=e._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){n(i.result)},i.onerror=function(){t(i.error)}})["catch"](t)});return s(t,n),t}function c(n,e){var t=this,r=new l(function(e,r){return 0>n?void e(null):void t.ready().then(function(){var o=t._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,c=i.openCursor();c.onsuccess=function(){var t=c.result;return t?void(0===n?e(t.key):a?e(t.key):(a=!0,t.advance(n))):void e(null)},c.onerror=function(){r(c.error)}})["catch"](r)});return s(r,e),r}function u(n){var e=this,t=new l(function(n,t){e.ready().then(function(){var r=e._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var e=i.result;return e?(a.push(e.key),void e["continue"]()):void n(a)},i.onerror=function(){t(i.error)}})["catch"](t)});return s(t,n),t}function s(n,e){e&&n.then(function(n){e(null,n)},function(n){e(n)})}function d(n,e){e&&n.then(function(n){f(e,n)},function(n){e(n)})}function f(n,e){return n?setTimeout(function(){return n(null,e)},0):void 0}var l="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,v=v||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(v){var h={_driver:"asyncStorage",_initStorage:n,iterate:t,getItem:e,setItem:r,removeItem:o,clear:i,length:a,key:c,keys:u};"undefined"!=typeof module&&module.exports?module.exports=h:"function"==typeof define&&define.amd?define("asyncStorage",function(){return h}):this.asyncStorage=h}}).call(window);


},{"promise":68}],71:[function(require,module,exports){
(function(){"use strict";function e(e){var r=this,n={};if(e)for(var t in e)n[t]=e[t];n.keyPrefix=n.name+"/",r._dbInfo=n;var i=new l(function(e){g===v.DEFINE?require(["localforageSerializer"],e):e(g===v.EXPORT?require("./../utils/serializer"):c.localforageSerializer)});return i.then(function(e){return d=e,l.resolve()})}function r(e){var r=this,n=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,n=h.length-1;n>=0;n--){var t=h.key(n);0===t.indexOf(e)&&h.removeItem(t)}});return s(n,e),n}function n(e,r){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var t=n.ready().then(function(){var r=n._dbInfo,t=h.getItem(r.keyPrefix+e);return t&&(t=d.deserialize(t)),t});return s(t,r),t}function t(e,r){var n=this,t=n.ready().then(function(){for(var r=n._dbInfo.keyPrefix,t=r.length,i=h.length,o=0;i>o;o++){var a=h.key(o),u=h.getItem(a);if(u&&(u=d.deserialize(u)),u=e(u,a.substring(t),o+1),void 0!==u)return u}});return s(t,r),t}function i(e,r){var n=this,t=n.ready().then(function(){var r,t=n._dbInfo;try{r=h.key(e)}catch(i){r=null}return r&&(r=r.substring(t.keyPrefix.length)),r});return s(t,r),t}function o(e){var r=this,n=r.ready().then(function(){for(var e=r._dbInfo,n=h.length,t=[],i=0;n>i;i++)0===h.key(i).indexOf(e.keyPrefix)&&t.push(h.key(i).substring(e.keyPrefix.length));return t});return s(n,e),n}function a(e){var r=this,n=r.keys().then(function(e){return e.length});return s(n,e),n}function u(e,r){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var t=n.ready().then(function(){var r=n._dbInfo;h.removeItem(r.keyPrefix+e)});return s(t,r),t}function f(e,r,n){var t=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=t.ready().then(function(){void 0===r&&(r=null);var n=r;return new l(function(i,o){d.serialize(r,function(r,a){if(a)o(a);else try{var u=t._dbInfo;h.setItem(u.keyPrefix+e,r),i(n)}catch(f){("QuotaExceededError"===f.name||"NS_ERROR_DOM_QUOTA_REACHED"===f.name)&&o(f),o(f)}})})});return s(i,n),i}function s(e,r){r&&e.then(function(e){r(null,e)},function(e){r(e)})}var l="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,c=this,d=null,h=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;h=this.localStorage}catch(y){return}var v={DEFINE:1,EXPORT:2,WINDOW:3},g=v.WINDOW;"undefined"!=typeof module&&module.exports?g=v.EXPORT:"function"==typeof define&&define.amd&&(g=v.DEFINE);var m={_driver:"localStorageWrapper",_initStorage:e,iterate:t,getItem:n,setItem:f,removeItem:u,clear:r,length:a,key:i,keys:o};g===v.EXPORT?module.exports=m:g===v.DEFINE?define("localStorageWrapper",function(){return m}):this.localStorageWrapper=m}).call(window);


},{"./../utils/serializer":74,"promise":68}],72:[function(require,module,exports){
(function(){"use strict";function n(n){var t=this,e={db:null};if(n)for(var i in n)e[i]="string"!=typeof n[i]?n[i].toString():n[i];var o=new s(function(n){h===v.DEFINE?require(["localforageSerializer"],n):n(h===v.EXPORT?require("./../utils/serializer"):d.localforageSerializer)}),r=new s(function(i,o){try{e.db=E(e.name,String(e.version),e.description,e.size)}catch(r){return t.setDriver(t.LOCALSTORAGE).then(function(){return t._initStorage(n)}).then(i)["catch"](o)}e.db.transaction(function(n){n.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=e,i()},function(n,t){o(t)})})});return o.then(function(n){return l=n,r})}function t(n,t){var e=this;"string"!=typeof n&&(window.console.warn(n+" used as a key, but it is not a string."),n=String(n));var i=new s(function(t,i){e.ready().then(function(){var o=e._dbInfo;o.db.transaction(function(e){e.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[n],function(n,e){var i=e.rows.length?e.rows.item(0).value:null;i&&(i=l.deserialize(i)),t(i)},function(n,t){i(t)})})})["catch"](i)});return f(i,t),i}function e(n,t){var e=this,i=new s(function(t,i){e.ready().then(function(){var o=e._dbInfo;o.db.transaction(function(e){e.executeSql("SELECT * FROM "+o.storeName,[],function(e,i){for(var o=i.rows,r=o.length,u=0;r>u;u++){var a=o.item(u),c=a.value;if(c&&(c=l.deserialize(c)),c=n(c,a.key,u+1),void 0!==c)return void t(c)}t()},function(n,t){i(t)})})})["catch"](i)});return f(i,t),i}function i(n,t,e){var i=this;"string"!=typeof n&&(window.console.warn(n+" used as a key, but it is not a string."),n=String(n));var o=new s(function(e,o){i.ready().then(function(){void 0===t&&(t=null);var r=t;l.serialize(t,function(t,u){if(u)o(u);else{var a=i._dbInfo;a.db.transaction(function(i){i.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[n,t],function(){e(r)},function(n,t){o(t)})},function(n){n.code===n.QUOTA_ERR&&o(n)})}})})["catch"](o)});return f(o,e),o}function o(n,t){var e=this;"string"!=typeof n&&(window.console.warn(n+" used as a key, but it is not a string."),n=String(n));var i=new s(function(t,i){e.ready().then(function(){var o=e._dbInfo;o.db.transaction(function(e){e.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[n],function(){t()},function(n,t){i(t)})})})["catch"](i)});return f(i,t),i}function r(n){var t=this,e=new s(function(n,e){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(t){t.executeSql("DELETE FROM "+i.storeName,[],function(){n()},function(n,t){e(t)})})})["catch"](e)});return f(e,n),e}function u(n){var t=this,e=new s(function(n,e){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+i.storeName,[],function(t,e){var i=e.rows.item(0).c;n(i)},function(n,t){e(t)})})})["catch"](e)});return f(e,n),e}function a(n,t){var e=this,i=new s(function(t,i){e.ready().then(function(){var o=e._dbInfo;o.db.transaction(function(e){e.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[n+1],function(n,e){var i=e.rows.length?e.rows.item(0).key:null;t(i)},function(n,t){i(t)})})})["catch"](i)});return f(i,t),i}function c(n){var t=this,e=new s(function(n,e){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(t){t.executeSql("SELECT key FROM "+i.storeName,[],function(t,e){for(var i=[],o=0;o<e.rows.length;o++)i.push(e.rows.item(o).key);n(i)},function(n,t){e(t)})})})["catch"](e)});return f(e,n),e}function f(n,t){t&&n.then(function(n){t(null,n)},function(n){t(n)})}var s="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,d=this,l=null,E=this.openDatabase;if(E){var v={DEFINE:1,EXPORT:2,WINDOW:3},h=v.WINDOW;"undefined"!=typeof module&&module.exports?h=v.EXPORT:"function"==typeof define&&define.amd&&(h=v.DEFINE);var S={_driver:"webSQLStorage",_initStorage:n,iterate:e,getItem:t,setItem:i,removeItem:o,clear:r,length:u,key:a,keys:c};h===v.DEFINE?define("webSQLStorage",function(){return S}):h===v.EXPORT?module.exports=S:this.webSQLStorage=S}}).call(window);


},{"./../utils/serializer":74,"promise":68}],73:[function(require,module,exports){
(function(){"use strict";function e(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function r(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(arguments[0][t]=v(r[t])?r[t].slice():r[t])}return arguments[0]}function t(e){for(var r in a)if(a.hasOwnProperty(r)&&a[r]===e)return!0;return!1}function n(t){this._config=r({},d,t),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var n=0;n<s.length;n++)e(this,s[n]);this.setDriver(this._config.driver)}var i="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,o={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},u=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],s=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],f={DEFINE:1,EXPORT:2,WINDOW:3},d={description:"",driver:u.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},c=f.WINDOW;"undefined"!=typeof module&&module.exports?c=f.EXPORT:"function"==typeof define&&define.amd&&(c=f.DEFINE);var p=function(e){var r=r||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,t={};return t[a.WEBSQL]=!!e.openDatabase,t[a.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return r&&"function"==typeof r.open&&"undefined"!=typeof e.IDBKeyRange}catch(t){return!1}}(),t[a.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(r){return!1}}(),t}(this),v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=this;n.prototype.INDEXEDDB=a.INDEXEDDB,n.prototype.LOCALSTORAGE=a.LOCALSTORAGE,n.prototype.WEBSQL=a.WEBSQL,n.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var r in e)"storeName"===r&&(e[r]=e[r].replace(/\W/g,"_")),this._config[r]=e[r];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},n.prototype.defineDriver=function(e,r,n){var a=new i(function(r,n){try{var a=e._driver,u=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),f=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(u);if(t(e._driver))return void n(f);for(var d=s.concat("_initStorage"),c=0;c<d.length;c++){var v=d[c];if(!v||!e[v]||"function"!=typeof e[v])return void n(u)}var l=i.resolve(!0);"_support"in e&&(l=e._support&&"function"==typeof e._support?e._support():i.resolve(!!e._support)),l.then(function(t){p[a]=t,o[a]=e,r()},n)}catch(g){n(g)}});return a.then(r,n),a},n.prototype.driver=function(){return this._driver||null},n.prototype.ready=function(e){var r=this,t=new i(function(e,t){r._driverSet.then(function(){null===r._ready&&(r._ready=r._initStorage(r._config)),r._ready.then(e,t)})["catch"](t)});return t.then(e,e),t},n.prototype.setDriver=function(e,r,n){function a(){u._config.driver=u.driver()}var u=this;return"string"==typeof e&&(e=[e]),this._driverSet=new i(function(r,n){var a=u._getFirstSupportedDriver(e),s=new Error("No available storage method found.");if(!a)return u._driverSet=i.reject(s),void n(s);if(u._dbInfo=null,u._ready=null,t(a)){if(c===f.DEFINE)return void require([a],function(e){u._extend(e),r()});if(c===f.EXPORT){var d;switch(a){case u.INDEXEDDB:d=require("./drivers/indexeddb");break;case u.LOCALSTORAGE:d=require("./drivers/localstorage");break;case u.WEBSQL:d=require("./drivers/websql")}u._extend(d)}else u._extend(l[a])}else{if(!o[a])return u._driverSet=i.reject(s),void n(s);u._extend(o[a])}r()}),this._driverSet.then(a,a),this._driverSet.then(r,n),this._driverSet},n.prototype.supports=function(e){return!!p[e]},n.prototype._extend=function(e){r(this,e)},n.prototype._getFirstSupportedDriver=function(e){if(e&&v(e))for(var r=0;r<e.length;r++){var t=e[r];if(this.supports(t))return t}return null},n.prototype.createInstance=function(e){return new n(e)};var g=new n;c===f.DEFINE?define("localforage",function(){return g}):c===f.EXPORT?module.exports=g:this.localforage=g}).call(window);


},{"./drivers/indexeddb":70,"./drivers/localstorage":71,"./drivers/websql":72,"promise":68}],74:[function(require,module,exports){
(function(){"use strict";function r(r,e){var n="";if(r&&(n=r.toString()),r&&("[object ArrayBuffer]"===r.toString()||r.buffer&&"[object ArrayBuffer]"===r.buffer.toString())){var a,o=i;r instanceof ArrayBuffer?(a=r,o+=f):(a=r.buffer,"[object Int8Array]"===n?o+=l:"[object Uint8Array]"===n?o+=s:"[object Uint8ClampedArray]"===n?o+=c:"[object Int16Array]"===n?o+=y:"[object Uint16Array]"===n?o+=b:"[object Int32Array]"===n?o+=A:"[object Uint32Array]"===n?o+=g:"[object Float32Array]"===n?o+=d:"[object Float64Array]"===n?o+=w:e(new Error("Failed to get type for BinaryArray"))),e(o+t(a))}else if("[object Blob]"===n){var h=new FileReader;h.onload=function(){var r=t(this.result);e(i+u+r)},h.readAsArrayBuffer(r)}else try{e(JSON.stringify(r))}catch(j){window.console.error("Couldn't convert value into a JSON string: ",r),e(null,j)}}function e(r){if(r.substring(0,o)!==i)return JSON.parse(r);var e=r.substring(h),t=r.substring(o,h),a=n(e);switch(t){case f:return a;case u:return new Blob([a]);case l:return new Int8Array(a);case s:return new Uint8Array(a);case c:return new Uint8ClampedArray(a);case y:return new Int16Array(a);case b:return new Uint16Array(a);case A:return new Int32Array(a);case g:return new Uint32Array(a);case d:return new Float32Array(a);case w:return new Float64Array(a);default:throw new Error("Unkown type: "+t)}}function n(r){var e,n,t,i,o,f=.75*r.length,u=r.length,l=0;"="===r[r.length-1]&&(f--,"="===r[r.length-2]&&f--);var s=new ArrayBuffer(f),c=new Uint8Array(s);for(e=0;u>e;e+=4)n=a.indexOf(r[e]),t=a.indexOf(r[e+1]),i=a.indexOf(r[e+2]),o=a.indexOf(r[e+3]),c[l++]=n<<2|t>>4,c[l++]=(15&t)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return s}function t(r){var e,n=new Uint8Array(r),t="";for(e=0;e<n.length;e+=3)t+=a[n[e]>>2],t+=a[(3&n[e])<<4|n[e+1]>>4],t+=a[(15&n[e+1])<<2|n[e+2]>>6],t+=a[63&n[e+2]];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="__lfsc__:",o=i.length,f="arbf",u="blob",l="si08",s="ui08",c="uic8",y="si16",A="si32",b="ur16",g="ui32",d="fl32",w="fl64",h=o+f.length,j={serialize:r,deserialize:e,stringToBuffer:n,bufferToString:t};"undefined"!=typeof module&&module.exports?module.exports=j:"function"==typeof define&&define.amd?define("localforageSerializer",function(){return j}):this.localforageSerializer=j}).call(window);


},{}],75:[function(require,module,exports){
module.exports=SimplexNoise=function(t){void 0==t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(var r=0;256>r;r++)this.p[r]=Math.floor(256*t.random());this.perm=[];for(var r=0;512>r;r++)this.perm[r]=this.p[255&r];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]},SimplexNoise.prototype.dot=function(t,r,i){return t[0]*r+t[1]*i},SimplexNoise.prototype.noise=function(t,r){var i,s,h,o,e,p=.5*(Math.sqrt(3)-1),a=(t+r)*p,m=Math.floor(t+a),d=Math.floor(r+a),n=(3-Math.sqrt(3))/6,f=(m+d)*n,l=m-f,v=d-f,M=t-l,g=r-v;M>g?(o=1,e=0):(o=0,e=1);var u=M-o+n,x=g-e+n,c=M-1+2*n,N=g-1+2*n,S=255&m,y=255&d,q=this.perm[S+this.perm[y]]%12,b=this.perm[S+o+this.perm[y+e]]%12,j=this.perm[S+1+this.perm[y+1]]%12,k=.5-M*M-g*g;0>k?i=0:(k*=k,i=k*k*this.dot(this.grad3[q],M,g));var w=.5-u*u-x*x;0>w?s=0:(w*=w,s=w*w*this.dot(this.grad3[b],u,x));var z=.5-c*c-N*N;return 0>z?h=0:(z*=z,h=z*z*this.dot(this.grad3[j],c,N)),70*(i+s+h)},SimplexNoise.prototype.noise3d=function(t,r,i){var s,h,o,e,p,a,m,d,n,f,l=1/3,v=(t+r+i)*l,M=Math.floor(t+v),g=Math.floor(r+v),u=Math.floor(i+v),x=1/6,c=(M+g+u)*x,N=M-c,S=g-c,y=u-c,q=t-N,b=r-S,j=i-y;q>=b?b>=j?(p=1,a=0,m=0,d=1,n=1,f=0):q>=j?(p=1,a=0,m=0,d=1,n=0,f=1):(p=0,a=0,m=1,d=1,n=0,f=1):j>b?(p=0,a=0,m=1,d=0,n=1,f=1):j>q?(p=0,a=1,m=0,d=0,n=1,f=1):(p=0,a=1,m=0,d=1,n=1,f=0);var k=q-p+x,w=b-a+x,z=j-m+x,A=q-d+2*x,B=b-n+2*x,C=j-f+2*x,D=q-1+3*x,E=b-1+3*x,F=j-1+3*x,G=255&M,H=255&g,I=255&u,J=this.perm[G+this.perm[H+this.perm[I]]]%12,K=this.perm[G+p+this.perm[H+a+this.perm[I+m]]]%12,L=this.perm[G+d+this.perm[H+n+this.perm[I+f]]]%12,O=this.perm[G+1+this.perm[H+1+this.perm[I+1]]]%12,P=.6-q*q-b*b-j*j;0>P?s=0:(P*=P,s=P*P*this.dot(this.grad3[J],q,b,j));var Q=.6-k*k-w*w-z*z;0>Q?h=0:(Q*=Q,h=Q*Q*this.dot(this.grad3[K],k,w,z));var R=.6-A*A-B*B-C*C;0>R?o=0:(R*=R,o=R*R*this.dot(this.grad3[L],A,B,C));var T=.6-D*D-E*E-F*F;return 0>T?e=0:(T*=T,e=T*T*this.dot(this.grad3[O],D,E,F)),32*(s+h+o+e)};


},{}],76:[function(require,module,exports){
var _=require("lodash"),delta=function(t,e){return function(){var n,a;return n=Date.now(),a=n-this.now,a=Math.min(a,t),a=Math.max(a,e),this.elapsed+=a,this.now=n,a}},start=function(){this.now=Date.now()},reset=function(){this.now=0,this.elapsed=0},getValue=function(t){return function(){return this[t]}},clock=function(t){var e=_.extend({maxDt:60,minDt:16.66666667,autostart:!1},t),n=Object.preventExtensions({now:0,elapsed:0});return e.autostart!==!1&&start.bind(n)(),{start:start.bind(n),reset:reset.bind(n),now:getValue("now").bind(n),elapsed:getValue("elapsed").bind(n),delta:delta(e.maxDt,e.minDt).bind(n)}};module.exports=clock;


},{"lodash":78}],77:[function(require,module,exports){
var raf=require("raf"),EventEmitter=require("events").EventEmitter,_=require("lodash"),clock=require("./clock")(),start=function(t,e){return function(){this.started||(this.clockStarted||e.start(),t(),this.started=!0)}},stop=function(){raf.cancel(this.rafHandle),this.started=!1},createLoop=function(t,e,r){return function n(){this.rafHandle=raf(n.bind(this));var i=e.delta(),a=r({dt:i,unitDt:i/16.66666667,now:e.now(),elapsed:e.elapsed()});t.emit("update",a),t.emit("draw",a)}},passThrough=function(t){return t};module.exports=function(t){var e=_.extend({emitter:new EventEmitter,customizeEvent:passThrough},t),r=Object.preventExtensions({clockStarted:!1,started:!1,rafHandle:null}),n=createLoop(e.emitter,clock,e.customizeEvent).bind(r);return{start:start(n,clock).bind(r),stop:stop.bind(r),reset:clock.reset,emitter:e.emitter}};


},{"./clock":76,"events":112,"lodash":78,"raf":79}],78:[function(require,module,exports){
(function (global){
(function(){function n(n,r,t){for(var e=(t||0)-1,u=n?n.length:0;++e<u;)if(n[e]===r)return e;return-1}function r(r,t){var e=typeof t;if(r=r.cache,"boolean"==e||null==t)return r[t]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?t:m+t;return r=(r=r[e])&&r[u],"object"==e?r&&n(r,t)>-1?0:-1:r?0:-1}function t(n){var r=this.cache,t=typeof n;if("boolean"==t||null==n)r[n]=!0;else{"number"!=t&&"string"!=t&&(t="object");var e="number"==t?n:m+n,u=r[t]||(r[t]={});"object"==t?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function e(n){return n.charCodeAt(0)}function u(n,r){for(var t=n.criteria,e=r.criteria,u=-1,o=t.length;++u<o;){var a=t[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-r.index}function o(n){var r=-1,e=n.length,u=n[0],o=n[e/2|0],a=n[e-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=f();i["false"]=i["null"]=i["true"]=i.undefined=!1;var l=f();for(l.array=n,l.cache=i,l.push=t;++r<e;)l.push(n[r]);return l}function a(n){return"\\"+G[n]}function i(){return h.pop()||[]}function f(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(n){n.length=0,h.length<d&&h.push(n)}function c(n){var r=n.cache;r&&c(r),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,g.length<d&&g.push(n)}function p(n,r,t){r||(r=0),"undefined"==typeof t&&(t=n?n.length:0);for(var e=-1,u=t-r||0,o=Array(0>u?0:u);++e<u;)o[e]=n[r+e];return o}function s(t){function h(n){return n&&"object"==typeof n&&!Yt(n)&&Tt.call(n,"__wrapped__")?n:new g(n)}function g(n,r){this.__chain__=!!r,this.__wrapped__=n}function d(n){function r(){if(e){var n=p(e);$t.apply(n,arguments)}if(this instanceof r){var o=J(t.prototype),a=t.apply(o,n||arguments);return Sn(a)?a:o}return t.apply(u,n||arguments)}var t=n[0],e=n[2],u=n[4];return Xt(r,n),r}function G(n,r,t,e,u){if(t){var o=t(n);if("undefined"!=typeof o)return o}var a=Sn(n);if(!a)return n;var f=Nt.call(n);if(!K[f])return n;var c=Jt[f];switch(f){case F:case B:return new c(+n);case q:case P:return new c(n);case L:return o=c(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o}var s=Yt(n);if(r){var v=!e;e||(e=i()),u||(u=i());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=s?c(n.length):{}}else o=s?p(n):oe({},n);return s&&(Tt.call(n,"index")&&(o.index=n.index),Tt.call(n,"input")&&(o.input=n.input)),r?(e.push(n),u.push(o),(s?Xn:fe)(n,function(n,a){o[a]=G(n,r,t,e,u)}),v&&(l(e),l(u)),o):o}function J(n,r){return Sn(n)?zt(n):{}}function Q(n,r,t){if("function"!=typeof n)return Yr;if("undefined"==typeof r||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Qt.funcNames&&(e=!n.name),e=e||!Qt.funcDecomp,!e)){var u=At.call(n);Qt.funcNames||(e=!O.test(u)),e||(e=I.test(u),Xt(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return $r(n,r)}function X(n){function r(){var n=f?a:this;if(u){var h=p(u);$t.apply(h,arguments)}if((o||c)&&(h||(h=p(arguments)),o&&$t.apply(h,o),c&&h.length<i))return e|=16,X([t,s?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(t=n[v]),this instanceof r){n=J(t.prototype);var g=t.apply(n,h);return Sn(g)?g:n}return t.apply(n,h)}var t=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,s=8&e,v=t;return Xt(r,n),r}function Y(t,e){var u=-1,a=ln(),i=t?t.length:0,f=i>=b&&a===n,l=[];if(f){var p=o(e);p?(a=r,e=p):f=!1}for(;++u<i;){var s=t[u];a(e,s)<0&&l.push(s)}return f&&c(e),l}function nn(n,r,t,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Yt(i)||vn(i))){r||(i=nn(i,r,t));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else t||a.push(i)}return a}function rn(n,r,t,e,u,o){if(t){var a=t(n,r);if("undefined"!=typeof a)return!!a}if(n===r)return 0!==n||1/n==1/r;var f=typeof n,c=typeof r;if(!(n!==n||n&&V[f]||r&&V[c]))return!1;if(null==n||null==r)return n===r;var p=Nt.call(n),s=Nt.call(r);if(p==T&&(p=z),s==T&&(s=z),p!=s)return!1;switch(p){case F:case B:return+n==+r;case q:return n!=+n?r!=+r:0==n?1/n==1/r:n==+r;case L:case P:return n==jt(r)}var v=p==$;if(!v){var h=Tt.call(n,"__wrapped__"),g=Tt.call(r,"__wrapped__");if(h||g)return rn(h?n.__wrapped__:n,g?r.__wrapped__:r,t,e,u,o);if(p!=z)return!1;var y=n.constructor,m=r.constructor;if(y!=m&&!(In(y)&&y instanceof y&&In(m)&&m instanceof m)&&"constructor"in n&&"constructor"in r)return!1}var b=!u;u||(u=i()),o||(o=i());for(var d=u.length;d--;)if(u[d]==n)return o[d]==r;var _=0;if(a=!0,u.push(n),o.push(r),v){if(d=n.length,_=r.length,a=_==d,a||e)for(;_--;){var w=d,j=r[_];if(e)for(;w--&&!(a=rn(n[w],j,t,e,u,o)););else if(!(a=rn(n[_],j,t,e,u,o)))break}}else ie(r,function(r,i,f){return Tt.call(f,i)?(_++,a=Tt.call(n,i)&&rn(n[i],r,t,e,u,o)):void 0}),a&&!e&&ie(n,function(n,r,t){return Tt.call(t,r)?a=--_>-1:void 0});return u.pop(),o.pop(),b&&(l(u),l(o)),a}function tn(n,r,t,e,u){(Yt(r)?Xn:fe)(r,function(r,o){var a,i,f=r,l=n[o];if(r&&((i=Yt(r))||le(r))){for(var c=e.length;c--;)if(a=e[c]==r){l=u[c];break}if(!a){var p;t&&(f=t(l,r),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Yt(l)?l:[]:le(l)?l:{}),e.push(r),u.push(l),p||tn(l,r,t,e,u)}}else t&&(f=t(l,r),"undefined"==typeof f&&(f=r)),"undefined"!=typeof f&&(l=f);n[o]=l})}function en(n,r){return n+St(Ht()*(r-n+1))}function un(t,e,u){var a=-1,f=ln(),p=t?t.length:0,s=[],v=!e&&p>=b&&f===n,h=u||v?i():s;if(v){var g=o(h);f=r,h=g}for(;++a<p;){var y=t[a],m=u?u(y,a,t):y;(e?!a||h[h.length-1]!==m:f(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(l(h.array),c(h)):u&&l(h),s}function on(n){return function(r,t,e){var u={};t=h.createCallback(t,e,3);var o=-1,a=r?r.length:0;if("number"==typeof a)for(;++o<a;){var i=r[o];n(u,i,t(i,o,r),r)}else fe(r,function(r,e,o){n(u,r,t(r,e,o),o)});return u}}function an(n,r,t,e,u,o){var a=1&r,i=2&r,f=4&r,l=16&r,c=32&r;if(!i&&!In(n))throw new kt;l&&!t.length&&(r&=-17,l=t=!1),c&&!e.length&&(r&=-33,c=e=!1);var s=n&&n.__bindData__;if(s&&s!==!0)return s=p(s),s[2]&&(s[2]=p(s[2])),s[3]&&(s[3]=p(s[3])),!a||1&s[1]||(s[4]=u),!a&&1&s[1]&&(r|=8),!f||4&s[1]||(s[5]=o),l&&$t.apply(s[2]||(s[2]=[]),t),c&&Wt.apply(s[3]||(s[3]=[]),e),s[1]|=r,an.apply(null,s);var v=1==r||17===r?d:X;return v([n,r,t,e,u,o])}function fn(n){return re[n]}function ln(){var r=(r=h.indexOf)===br?n:r;return r}function cn(n){return"function"==typeof n&&Rt.test(n)}function pn(n){var r,t;return n&&Nt.call(n)==z&&(r=n.constructor,!In(r)||r instanceof r)?(ie(n,function(n,r){t=r}),"undefined"==typeof t||Tt.call(n,t)):!1}function sn(n){return te[n]}function vn(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Nt.call(n)==T||!1}function hn(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t=r,r=!1),G(n,r,"function"==typeof t&&Q(t,e,1))}function gn(n,r,t){return G(n,!0,"function"==typeof r&&Q(r,t,1))}function yn(n,r){var t=J(n);return r?oe(t,r):t}function mn(n,r,t){var e;return r=h.createCallback(r,t,3),fe(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function bn(n,r,t){var e;return r=h.createCallback(r,t,3),_n(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function dn(n,r,t){var e=[];ie(n,function(n,r){e.push(r,n)});var u=e.length;for(r=Q(r,t,3);u--&&r(e[u--],e[u],n)!==!1;);return n}function _n(n,r,t){var e=ne(n),u=e.length;for(r=Q(r,t,3);u--;){var o=e[u];if(r(n[o],o,n)===!1)break}return n}function wn(n){var r=[];return ie(n,function(n,t){In(n)&&r.push(t)}),r.sort()}function jn(n,r){return n?Tt.call(n,r):!1}function kn(n){for(var r=-1,t=ne(n),e=t.length,u={};++r<e;){var o=t[r];u[n[o]]=o}return u}function xn(n){return n===!0||n===!1||n&&"object"==typeof n&&Nt.call(n)==F||!1}function Cn(n){return n&&"object"==typeof n&&Nt.call(n)==B||!1}function On(n){return n&&1===n.nodeType||!1}function Nn(n){var r=!0;if(!n)return r;var t=Nt.call(n),e=n.length;return t==$||t==P||t==T||t==z&&"number"==typeof e&&In(n.splice)?!e:(fe(n,function(){return r=!1}),r)}function Rn(n,r,t,e){return rn(n,r,"function"==typeof t&&Q(t,e,2))}function En(n){return Pt(n)&&!Kt(parseFloat(n))}function In(n){return"function"==typeof n}function Sn(n){return!(!n||!V[typeof n])}function An(n){return Tn(n)&&n!=+n}function Dn(n){return null===n}function Tn(n){return"number"==typeof n||n&&"object"==typeof n&&Nt.call(n)==q||!1}function $n(n){return n&&"object"==typeof n&&Nt.call(n)==L||!1}function Fn(n){return"string"==typeof n||n&&"object"==typeof n&&Nt.call(n)==P||!1}function Bn(n){return"undefined"==typeof n}function Wn(n,r,t){var e={};return r=h.createCallback(r,t,3),fe(n,function(n,t,u){e[t]=r(n,t,u)}),e}function qn(n){var r=arguments,t=2;if(!Sn(n))return n;if("number"!=typeof r[2]&&(t=r.length),t>3&&"function"==typeof r[t-2])var e=Q(r[--t-1],r[t--],2);else t>2&&"function"==typeof r[t-1]&&(e=r[--t]);for(var u=p(arguments,1,t),o=-1,a=i(),f=i();++o<t;)tn(n,u[o],e,a,f);return l(a),l(f),n}function zn(n,r,t){var e={};if("function"!=typeof r){var u=[];ie(n,function(n,r){u.push(r)}),u=Y(u,nn(arguments,!0,!1,1));for(var o=-1,a=u.length;++o<a;){var i=u[o];e[i]=n[i]}}else r=h.createCallback(r,t,3),ie(n,function(n,t,u){r(n,t,u)||(e[t]=n)});return e}function Ln(n){for(var r=-1,t=ne(n),e=t.length,u=ht(e);++r<e;){var o=t[r];u[r]=[o,n[o]]}return u}function Pn(n,r,t){var e={};if("function"!=typeof r)for(var u=-1,o=nn(arguments,!0,!1,1),a=Sn(n)?o.length:0;++u<a;){var i=o[u];i in n&&(e[i]=n[i])}else r=h.createCallback(r,t,3),ie(n,function(n,t,u){r(n,t,u)&&(e[t]=n)});return e}function Kn(n,r,t,e){var u=Yt(n);if(null==t)if(u)t=[];else{var o=n&&n.constructor,a=o&&o.prototype;t=J(a)}return r&&(r=h.createCallback(r,e,4),(u?Xn:fe)(n,function(n,e,u){return r(t,n,e,u)})),t}function Un(n){for(var r=-1,t=ne(n),e=t.length,u=ht(e);++r<e;)u[r]=n[t[r]];return u}function Mn(n){for(var r=arguments,t=-1,e=nn(r,!0,!1,1),u=r[2]&&r[2][r[1]]===n?1:e.length,o=ht(u);++t<u;)o[t]=n[e[t]];return o}function Vn(n,r,t){var e=-1,u=ln(),o=n?n.length:0,a=!1;return t=(0>t?Mt(0,o+t):t)||0,Yt(n)?a=u(n,r,t)>-1:"number"==typeof o?a=(Fn(n)?n.indexOf(r,t):u(n,r,t))>-1:fe(n,function(n){return++e>=t?!(a=n===r):void 0}),a}function Gn(n,r,t){var e=!0;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&(e=!!r(n[u],u,n)););else fe(n,function(n,t,u){return e=!!r(n,t,u)});return e}function Hn(n,r,t){var e=[];r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o;){var a=n[u];r(a,u,n)&&e.push(a)}else fe(n,function(n,t,u){r(n,t,u)&&e.push(n)});return e}function Jn(n,r,t){r=h.createCallback(r,t,3);var e=-1,u=n?n.length:0;if("number"!=typeof u){var o;return fe(n,function(n,t,e){return r(n,t,e)?(o=n,!1):void 0}),o}for(;++e<u;){var a=n[e];if(r(a,e,n))return a}}function Qn(n,r,t){var e;return r=h.createCallback(r,t,3),Yn(n,function(n,t,u){return r(n,t,u)?(e=n,!1):void 0}),e}function Xn(n,r,t){var e=-1,u=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof u)for(;++e<u&&r(n[e],e,n)!==!1;);else fe(n,r);return n}function Yn(n,r,t){var e=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof e)for(;e--&&r(n[e],e,n)!==!1;);else{var u=ne(n);e=u.length,fe(n,function(n,t,o){return t=u?u[--e]:--e,r(o[t],t,o)})}return n}function Zn(n,r){var t=p(arguments,2),e=-1,u="function"==typeof r,o=n?n.length:0,a=ht("number"==typeof o?o:0);return Xn(n,function(n){a[++e]=(u?r:n[r]).apply(n,t)}),a}function nr(n,r,t){var e=-1,u=n?n.length:0;if(r=h.createCallback(r,t,3),"number"==typeof u)for(var o=ht(u);++e<u;)o[e]=r(n[e],e,n);else o=[],fe(n,function(n,t,u){o[++e]=r(n,t,u)});return o}function rr(n,r,t){var u=-(1/0),o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Yt(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];f>o&&(o=f)}else r=null==r&&Fn(n)?e:h.createCallback(r,t,3),Xn(n,function(n,t,e){var a=r(n,t,e);a>u&&(u=a,o=n)});return o}function tr(n,r,t){var u=1/0,o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Yt(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];o>f&&(o=f)}else r=null==r&&Fn(n)?e:h.createCallback(r,t,3),Xn(n,function(n,t,e){var a=r(n,t,e);u>a&&(u=a,o=n)});return o}function er(n,r,t,e){if(!n)return t;var u=arguments.length<3;r=h.createCallback(r,e,4);var o=-1,a=n.length;if("number"==typeof a)for(u&&(t=n[++o]);++o<a;)t=r(t,n[o],o,n);else fe(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)});return t}function ur(n,r,t,e){var u=arguments.length<3;return r=h.createCallback(r,e,4),Yn(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)}),t}function or(n,r,t){return r=h.createCallback(r,t,3),Hn(n,function(n,t,e){return!r(n,t,e)})}function ar(n,r,t){if(n&&"number"!=typeof n.length&&(n=Un(n)),null==r||t)return n?n[en(0,n.length-1)]:v;var e=ir(n);return e.length=Vt(Mt(0,r),e.length),e}function ir(n){var r=-1,t=n?n.length:0,e=ht("number"==typeof t?t:0);return Xn(n,function(n){var t=en(0,++r);e[r]=e[t],e[t]=n}),e}function fr(n){var r=n?n.length:0;return"number"==typeof r?r:ne(n).length}function lr(n,r,t){var e;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&!(e=r(n[u],u,n)););else fe(n,function(n,t,u){return!(e=r(n,t,u))});return!!e}function cr(n,r,t){var e=-1,o=Yt(r),a=n?n.length:0,p=ht("number"==typeof a?a:0);for(o||(r=h.createCallback(r,t,3)),Xn(n,function(n,t,u){var a=p[++e]=f();o?a.criteria=nr(r,function(r){return n[r]}):(a.criteria=i())[0]=r(n,t,u),a.index=e,a.value=n}),a=p.length,p.sort(u);a--;){var s=p[a];p[a]=s.value,o||l(s.criteria),c(s)}return p}function pr(n){return n&&"number"==typeof n.length?p(n):Un(n)}function sr(n){for(var r=-1,t=n?n.length:0,e=[];++r<t;){var u=n[r];u&&e.push(u)}return e}function vr(n){return Y(n,nn(arguments,!0,!0,1))}function hr(n,r,t){var e=-1,u=n?n.length:0;for(r=h.createCallback(r,t,3);++e<u;)if(r(n[e],e,n))return e;return-1}function gr(n,r,t){var e=n?n.length:0;for(r=h.createCallback(r,t,3);e--;)if(r(n[e],e,n))return e;return-1}function yr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=-1;for(r=h.createCallback(r,t,3);++o<u&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[0]:v;return p(n,0,Vt(Mt(0,e),u))}function mr(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(n=nr(n,t,e)),nn(n,r)}function br(r,t,e){if("number"==typeof e){var u=r?r.length:0;e=0>e?Mt(0,u+e):e||0}else if(e){var o=Nr(r,t);return r[o]===t?o:-1}return n(r,t,e)}function dr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else e=null==r||t?1:r||e;return p(n,0,Vt(Mt(0,u-e),u))}function _r(){for(var t=[],e=-1,u=arguments.length,a=i(),f=ln(),p=f===n,s=i();++e<u;){var v=arguments[e];(Yt(v)||vn(v))&&(t.push(v),a.push(p&&v.length>=b&&o(e?t[e]:s)))}var h=t[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=a[0];if(v=h[g],(d?r(d,v):f(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=a[e],(d?r(d,v):f(t[e],v))<0)continue n;m.push(v)}}for(;u--;)d=a[u],d&&c(d);return l(a),l(s),m}function wr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[u-1]:v;return p(n,Mt(0,u-e))}function jr(n,r,t){var e=n?n.length:0;for("number"==typeof t&&(e=(0>t?Mt(0,e+t):Vt(t,e-1))+1);e--;)if(n[e]===r)return e;return-1}function kr(n){for(var r=arguments,t=0,e=r.length,u=n?n.length:0;++t<e;)for(var o=-1,a=r[t];++o<u;)n[o]===a&&(Bt.call(n,o--,1),u--);return n}function xr(n,r,t){n=+n||0,t="number"==typeof t?t:+t||1,null==r&&(r=n,n=0);for(var e=-1,u=Mt(0,Et((r-n)/(t||1))),o=ht(u);++e<u;)o[e]=n,n+=t;return o}function Cr(n,r,t){var e=-1,u=n?n.length:0,o=[];for(r=h.createCallback(r,t,3);++e<u;){var a=n[e];r(a,e,n)&&(o.push(a),Bt.call(n,e--,1),u--)}return o}function Or(n,r,t){if("number"!=typeof r&&null!=r){var e=0,u=-1,o=n?n.length:0;for(r=h.createCallback(r,t,3);++u<o&&r(n[u],u,n);)e++}else e=null==r||t?1:Mt(0,r);return p(n,e)}function Nr(n,r,t,e){var u=0,o=n?n.length:u;for(t=t?h.createCallback(t,e,1):Yr,r=t(r);o>u;){var a=u+o>>>1;t(n[a])<r?u=a+1:o=a}return u}function Rr(){return un(nn(arguments,!0,!0))}function Er(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(t=h.createCallback(t,e,3)),un(n,r,t)}function Ir(n){return Y(n,p(arguments,1))}function Sr(){for(var n=-1,r=arguments.length;++n<r;){var t=arguments[n];if(Yt(t)||vn(t))var e=e?un(Y(e,t).concat(Y(t,e))):t}return e||[]}function Ar(){for(var n=arguments.length>1?arguments:arguments[0],r=-1,t=n?rr(ve(n,"length")):0,e=ht(0>t?0:t);++r<t;)e[r]=ve(n,r);return e}function Dr(n,r){var t=-1,e=n?n.length:0,u={};for(r||!e||Yt(n[0])||(r=[]);++t<e;){var o=n[t];r?u[o]=r[t]:o&&(u[o[0]]=o[1])}return u}function Tr(n,r){if(!In(r))throw new kt;return function(){return--n<1?r.apply(this,arguments):void 0}}function $r(n,r){return arguments.length>2?an(n,17,p(arguments,2),null,r):an(n,1,null,null,r)}function Fr(n){for(var r=arguments.length>1?nn(arguments,!0,!1,1):wn(n),t=-1,e=r.length;++t<e;){var u=r[t];n[u]=an(n[u],1,null,null,n)}return n}function Br(n,r){return arguments.length>2?an(r,19,p(arguments,2),null,n):an(r,3,null,null,n)}function Wr(){for(var n=arguments,r=n.length;r--;)if(!In(n[r]))throw new kt;return function(){for(var r=arguments,t=n.length;t--;)r=[n[t].apply(this,r)];return r[0]}}function qr(n,r){return r="number"==typeof r?r:+r||n.length,an(n,4,null,null,null,r)}function zr(n,r,t){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!In(n))throw new kt;if(r=Mt(0,r)||0,t===!0){var h=!0;s=!1}else Sn(t)&&(h=t.leading,p="maxWait"in t&&(Mt(r,t.maxWait)||0),s="trailing"in t?t.trailing:s);var g=function(){var t=r-(ge()-a);if(0>=t){u&&It(u);var p=l;u=f=l=v,p&&(c=ge(),o=n.apply(i,e),f||u||(e=i=null))}else f=Ft(g,t)},y=function(){f&&It(f),u=f=l=v,(s||p!==r)&&(c=ge(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=ge(),i=this,l=s&&(f||!h),p===!1)var t=h&&!f;else{u||h||(c=a);var v=p-(a-c),m=0>=v;m?(u&&(u=It(u)),c=a,o=n.apply(i,e)):u||(u=Ft(y,v))}return m&&f?f=It(f):f||r===p||(f=Ft(g,r)),t&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function Lr(n){if(!In(n))throw new kt;var r=p(arguments,1);return Ft(function(){n.apply(v,r)},1)}function Pr(n,r){if(!In(n))throw new kt;var t=p(arguments,2);return Ft(function(){n.apply(v,t)},r)}function Kr(n,r){if(!In(n))throw new kt;var t=function(){var e=t.cache,u=r?r.apply(this,arguments):m+arguments[0];return Tt.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return t.cache={},t}function Ur(n){var r,t;if(!In(n))throw new kt;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}}function Mr(n){return an(n,16,p(arguments,1))}function Vr(n){return an(n,32,null,p(arguments,1))}function Gr(n,r,t){var e=!0,u=!0;if(!In(n))throw new kt;return t===!1?e=!1:Sn(t)&&(e="leading"in t?t.leading:e,u="trailing"in t?t.trailing:u),U.leading=e,U.maxWait=r,U.trailing=u,zr(n,r,U)}function Hr(n,r){return an(r,16,[n])}function Jr(n){return function(){return n}}function Qr(n,r,t){var e=typeof n;if(null==n||"function"==e)return Q(n,r,t);if("object"!=e)return tt(n);var u=ne(n),o=u[0],a=n[o];return 1!=u.length||a!==a||Sn(a)?function(r){for(var t=u.length,e=!1;t--&&(e=rn(r[u[t]],n[u[t]],null,!0)););return e}:function(n){var r=n[o];return a===r&&(0!==a||1/a==1/r)}}function Xr(n){return null==n?"":jt(n).replace(ue,fn)}function Yr(n){return n}function Zr(n,r,t){var e=!0,u=r&&wn(r);r&&(t||u.length)||(null==t&&(t=r),o=g,r=n,n=h,u=wn(r)),t===!1?e=!1:Sn(t)&&"chain"in t&&(e=t.chain);var o=n,a=In(o);Xn(u,function(t){var u=n[t]=r[t];a&&(o.prototype[t]=function(){var r=this.__chain__,t=this.__wrapped__,a=[t];$t.apply(a,arguments);var i=u.apply(n,a);if(e||r){if(t===i&&Sn(i))return this;i=new o(i),i.__chain__=r}return i})})}function nt(){return t._=Ot,this}function rt(){}function tt(n){return function(r){return r[n]}}function et(n,r,t){var e=null==n,u=null==r;if(null==t&&("boolean"==typeof n&&u?(t=n,n=1):u||"boolean"!=typeof r||(t=r,u=!0)),e&&u&&(r=1),n=+n||0,u?(r=n,n=0):r=+r||0,t||n%1||r%1){var o=Ht();return Vt(n+o*(r-n+parseFloat("1e-"+((o+"").length-1))),r)}return en(n,r)}function ut(n,r){if(n){var t=n[r];return In(t)?n[r]():t}}function ot(n,r,t){var e=h.templateSettings;n=jt(n||""),t=ae({},t,e);var u,o=ae({},t.imports,e.imports),i=ne(o),f=Un(o),l=0,c=t.interpolate||E,p="__p += '",s=wt((t.escape||E).source+"|"+c.source+"|"+(c===N?x:E).source+"|"+(t.evaluate||E).source+"|$","g");n.replace(s,function(r,t,e,o,i,f){return e||(e=o),p+=n.slice(l,f).replace(S,a),t&&(p+="' +\n__e("+t+") +\n'"),i&&(u=!0,p+="';\n"+i+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+r.length,r}),p+="';\n";var g=t.variable,y=g;y||(g="obj",p="with ("+g+") {\n"+p+"\n}\n"),p=(u?p.replace(w,""):p).replace(j,"$1").replace(k,"$1;"),p="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+D++ +"]")+"\n*/";try{var b=mt(i,"return "+p+m).apply(v,f)}catch(d){throw d.source=p,d}return r?b(r):(b.source=p,b)}function at(n,r,t){n=(n=+n)>-1?n:0;var e=-1,u=ht(n);for(r=Q(r,t,1);++e<n;)u[e]=r(e);return u}function it(n){return null==n?"":jt(n).replace(ee,sn)}function ft(n){var r=++y;return jt(null==n?"":n)+r}function lt(n){return n=new g(n),n.__chain__=!0,n}function ct(n,r){return r(n),n}function pt(){return this.__chain__=!0,this}function st(){return jt(this.__wrapped__)}function vt(){return this.__wrapped__}t=t?Z.defaults(H.Object(),t,Z.pick(H,A)):H;var ht=t.Array,gt=t.Boolean,yt=t.Date,mt=t.Function,bt=t.Math,dt=t.Number,_t=t.Object,wt=t.RegExp,jt=t.String,kt=t.TypeError,xt=[],Ct=_t.prototype,Ot=t._,Nt=Ct.toString,Rt=wt("^"+jt(Nt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Et=bt.ceil,It=t.clearTimeout,St=bt.floor,At=mt.prototype.toString,Dt=cn(Dt=_t.getPrototypeOf)&&Dt,Tt=Ct.hasOwnProperty,$t=xt.push,Ft=t.setTimeout,Bt=xt.splice,Wt=xt.unshift,qt=function(){try{var n={},r=cn(r=_t.defineProperty)&&r,t=r(n,n,n)&&r}catch(e){}return t}(),zt=cn(zt=_t.create)&&zt,Lt=cn(Lt=ht.isArray)&&Lt,Pt=t.isFinite,Kt=t.isNaN,Ut=cn(Ut=_t.keys)&&Ut,Mt=bt.max,Vt=bt.min,Gt=t.parseInt,Ht=bt.random,Jt={};Jt[$]=ht,Jt[F]=gt,Jt[B]=yt,Jt[W]=mt,Jt[z]=_t,Jt[q]=dt,Jt[L]=wt,Jt[P]=jt,g.prototype=h.prototype;var Qt=h.support={};Qt.funcDecomp=!cn(t.WinRTError)&&I.test(s),Qt.funcNames="string"==typeof mt.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:h}},zt||(J=function(){function n(){}return function(r){if(Sn(r)){n.prototype=r;var e=new n;n.prototype=null}return e||t.Object()}}());var Xt=qt?function(n,r){M.value=r,qt(n,"__bindData__",M)}:rt,Yt=Lt||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Nt.call(n)==$||!1},Zt=function(n){var r,t=n,e=[];if(!t)return e;if(!V[typeof n])return e;for(r in t)Tt.call(t,r)&&e.push(r);return e},ne=Ut?function(n){return Sn(n)?Ut(n):[]}:Zt,re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te=kn(re),ee=wt("("+ne(te).join("|")+")","g"),ue=wt("["+ne(re).join("")+"]","g"),oe=function(n,r,t){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof t?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&V[typeof u])for(var c=-1,p=V[typeof u]&&ne(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ae=function(n,r,t){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof t?2:a.length;++i<f;)if(u=a[i],u&&V[typeof u])for(var l=-1,c=V[typeof u]&&ne(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},ie=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(e in u)if(r(u[e],e,n)===!1)return o;return o},fe=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(var a=-1,i=V[typeof u]&&ne(u),f=i?i.length:0;++a<f;)if(e=i[a],r(u[e],e,n)===!1)return o;return o},le=Dt?function(n){if(!n||Nt.call(n)!=z)return!1;var r=n.valueOf,t=cn(r)&&(t=Dt(r))&&Dt(t);return t?n==t||Dt(n)==t:pn(n)}:pn,ce=on(function(n,r,t){Tt.call(n,t)?n[t]++:n[t]=1}),pe=on(function(n,r,t){(Tt.call(n,t)?n[t]:n[t]=[]).push(r)}),se=on(function(n,r,t){n[t]=r}),ve=nr,he=Hn,ge=cn(ge=yt.now)&&ge||function(){return(new yt).getTime()},ye=8==Gt(_+"08")?Gt:function(n,r){return Gt(Fn(n)?n.replace(R,""):n,r||0)};return h.after=Tr,h.assign=oe,h.at=Mn,h.bind=$r,h.bindAll=Fr,h.bindKey=Br,h.chain=lt,h.compact=sr,h.compose=Wr,h.constant=Jr,h.countBy=ce,h.create=yn,h.createCallback=Qr,h.curry=qr,h.debounce=zr,h.defaults=ae,h.defer=Lr,h.delay=Pr,h.difference=vr,h.filter=Hn,h.flatten=mr,h.forEach=Xn,h.forEachRight=Yn,h.forIn=ie,h.forInRight=dn,h.forOwn=fe,h.forOwnRight=_n,h.functions=wn,h.groupBy=pe,h.indexBy=se,h.initial=dr,h.intersection=_r,h.invert=kn,h.invoke=Zn,h.keys=ne,h.map=nr,h.mapValues=Wn,h.max=rr,h.memoize=Kr,h.merge=qn,h.min=tr,h.omit=zn,h.once=Ur,h.pairs=Ln,h.partial=Mr,h.partialRight=Vr,h.pick=Pn,h.pluck=ve,h.property=tt,h.pull=kr,h.range=xr,h.reject=or,h.remove=Cr,h.rest=Or,h.shuffle=ir,h.sortBy=cr,h.tap=ct,h.throttle=Gr,h.times=at,h.toArray=pr,h.transform=Kn,h.union=Rr,h.uniq=Er,h.values=Un,h.where=he,h.without=Ir,h.wrap=Hr,h.xor=Sr,h.zip=Ar,h.zipObject=Dr,h.collect=nr,h.drop=Or,h.each=Xn,h.eachRight=Yn,h.extend=oe,h.methods=wn,h.object=Dr,h.select=Hn,h.tail=Or,h.unique=Er,h.unzip=Ar,Zr(h),h.clone=hn,h.cloneDeep=gn,h.contains=Vn,h.escape=Xr,h.every=Gn,h.find=Jn,h.findIndex=hr,h.findKey=mn,h.findLast=Qn,h.findLastIndex=gr,h.findLastKey=bn,h.has=jn,h.identity=Yr,h.indexOf=br,h.isArguments=vn,h.isArray=Yt,h.isBoolean=xn,h.isDate=Cn,h.isElement=On,h.isEmpty=Nn,h.isEqual=Rn,h.isFinite=En,h.isFunction=In,h.isNaN=An,h.isNull=Dn,h.isNumber=Tn,h.isObject=Sn,h.isPlainObject=le,h.isRegExp=$n,h.isString=Fn,h.isUndefined=Bn,h.lastIndexOf=jr,h.mixin=Zr,h.noConflict=nt,h.noop=rt,h.now=ge,h.parseInt=ye,h.random=et,h.reduce=er,h.reduceRight=ur,h.result=ut,h.runInContext=s,h.size=fr,h.some=lr,h.sortedIndex=Nr,h.template=ot,h.unescape=it,h.uniqueId=ft,h.all=Gn,h.any=lr,h.detect=Jn,h.findWhere=Jn,h.foldl=er,h.foldr=ur,h.include=Vn,h.inject=er,Zr(function(){var n={};return fe(h,function(r,t){h.prototype[t]||(n[t]=r)}),n}(),!1),h.first=yr,h.last=wr,h.sample=ar,h.take=yr,h.head=yr,fe(h,function(n,r){var t="sample"!==r;h.prototype[r]||(h.prototype[r]=function(r,e){var u=this.__chain__,o=n(this.__wrapped__,r,e);return u||null!=r&&(!e||t&&"function"==typeof r)?new g(o,u):o})}),h.VERSION="2.4.1",h.prototype.chain=pt,h.prototype.toString=st,h.prototype.value=vt,h.prototype.valueOf=vt,Xn(["join","pop","shift"],function(n){var r=xt[n];h.prototype[n]=function(){var n=this.__chain__,t=r.apply(this.__wrapped__,arguments);return n?new g(t,n):t}}),Xn(["push","reverse","sort","unshift"],function(n){var r=xt[n];h.prototype[n]=function(){return r.apply(this.__wrapped__,arguments),this}}),Xn(["concat","slice","splice"],function(n){var r=xt[n];h.prototype[n]=function(){return new g(r.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var v,h=[],g=[],y=0,m=+new Date+"",b=75,d=40,_=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,R=RegExp("^["+_+"]*0+(?=.$)"),E=/($^)/,I=/\bthis\b/,S=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],D=0,T="[object Arguments]",$="[object Array]",F="[object Boolean]",B="[object Date]",W="[object Function]",q="[object Number]",z="[object Object]",L="[object RegExp]",P="[object String]",K={};K[W]=!1,K[T]=K[$]=K[F]=K[B]=K[q]=K[z]=K[L]=K[P]=!0;var U={leading:!1,maxWait:0,trailing:!1},M={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=V[typeof window]&&window||this,J=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(H=Y);var Z=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:H._=Z}).call(this);


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],79:[function(require,module,exports){
for(var now=require("performance-now"),global="undefined"==typeof window?{}:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=global["request"+suffix],caf=global["cancel"+suffix]||global["cancelRequest"+suffix],isNative=!0,i=0;i<vendors.length&&!raf;i++)raf=global[vendors[i]+"Request"+suffix],caf=global[vendors[i]+"Cancel"+suffix]||global[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){isNative=!1;var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(e){if(0===queue.length){var a=now(),l=Math.max(0,frameDuration-(a-last));last=l+a,setTimeout(function(){var e=queue.slice(0);queue.length=0;for(var a=0;a<e.length;a++)if(!e[a].cancelled)try{e[a].callback(last)}catch(l){setTimeout(function(){throw l},0)}},Math.round(l))}return queue.push({handle:++id,callback:e,cancelled:!1}),id},caf=function(e){for(var a=0;a<queue.length;a++)queue[a].handle===e&&(queue[a].cancelled=!0)}}module.exports=function(e){return isNative?raf.call(global,function(){e.apply(this,arguments)}):raf.call(global,e)},module.exports.cancel=function(){caf.apply(global,arguments)};


},{"performance-now":80}],80:[function(require,module,exports){
(function (process){
(function(){var e,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(module.exports=function(){return(e()-r)/1e6},n=process.hrtime,e=function(){var e;return e=n(),1e9*e[0]+e[1]},r=e()):Date.now?(module.exports=function(){return Date.now()-r},r=Date.now()):(module.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this);


}).call(this,require('_process'))

},{"_process":113}],81:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,_=require("lodash"),load=function(t,e,n,i){return function(r){var s=this.slug,a=t[r],u=this.manifest;if(!_.isObject(a))return!1;this.slug&&i.emit("unload",{slug:s,manifest:u});var o=n(a,r);return parseManifest(e,o),parseManifest(a,o),this.manifest=a,this.slug=r,i.emit("load",{slug:r,globalManifest:e,manifest:a,graph:o}),!0}},parseManifest=function(t,e){return _.each(t.components,function(t,n){var i;_.isObject(t)?(i=_.isObject(t.properties)?t.properties:{},e[n]=_.isObject(t["function"])?t["function"](e,i):_.isObject(t.construct)?new t.construct(e,i):t):e[n]=t}),e},createBlankObject=function(){return{}};module.exports=function(t,e){var n=_.extend({globalManifest:{},getGraph:createBlankObject,emitter:new EventEmitter},e),i=Object.preventExtensions({slug:null,manifest:null});return{load:load(t,n.globalManifest,n.getGraph,n.emitter).bind(i),emitter:n.emitter}};


},{"events":112,"lodash":82}],82:[function(require,module,exports){
(function (global){
(function(){function n(n,r,t){for(var e=(t||0)-1,u=n?n.length:0;++e<u;)if(n[e]===r)return e;return-1}function r(r,t){var e=typeof t;if(r=r.cache,"boolean"==e||null==t)return r[t]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?t:m+t;return r=(r=r[e])&&r[u],"object"==e?r&&n(r,t)>-1?0:-1:r?0:-1}function t(n){var r=this.cache,t=typeof n;if("boolean"==t||null==n)r[n]=!0;else{"number"!=t&&"string"!=t&&(t="object");var e="number"==t?n:m+n,u=r[t]||(r[t]={});"object"==t?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function e(n){return n.charCodeAt(0)}function u(n,r){for(var t=n.criteria,e=r.criteria,u=-1,o=t.length;++u<o;){var a=t[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-r.index}function o(n){var r=-1,e=n.length,u=n[0],o=n[e/2|0],a=n[e-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=f();i["false"]=i["null"]=i["true"]=i.undefined=!1;var l=f();for(l.array=n,l.cache=i,l.push=t;++r<e;)l.push(n[r]);return l}function a(n){return"\\"+G[n]}function i(){return h.pop()||[]}function f(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(n){n.length=0,h.length<d&&h.push(n)}function c(n){var r=n.cache;r&&c(r),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,g.length<d&&g.push(n)}function p(n,r,t){r||(r=0),"undefined"==typeof t&&(t=n?n.length:0);for(var e=-1,u=t-r||0,o=Array(0>u?0:u);++e<u;)o[e]=n[r+e];return o}function s(t){function h(n){return n&&"object"==typeof n&&!Yt(n)&&Tt.call(n,"__wrapped__")?n:new g(n)}function g(n,r){this.__chain__=!!r,this.__wrapped__=n}function d(n){function r(){if(e){var n=p(e);$t.apply(n,arguments)}if(this instanceof r){var o=J(t.prototype),a=t.apply(o,n||arguments);return Sn(a)?a:o}return t.apply(u,n||arguments)}var t=n[0],e=n[2],u=n[4];return Xt(r,n),r}function G(n,r,t,e,u){if(t){var o=t(n);if("undefined"!=typeof o)return o}var a=Sn(n);if(!a)return n;var f=Nt.call(n);if(!K[f])return n;var c=Jt[f];switch(f){case F:case B:return new c(+n);case q:case P:return new c(n);case L:return o=c(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o}var s=Yt(n);if(r){var v=!e;e||(e=i()),u||(u=i());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=s?c(n.length):{}}else o=s?p(n):oe({},n);return s&&(Tt.call(n,"index")&&(o.index=n.index),Tt.call(n,"input")&&(o.input=n.input)),r?(e.push(n),u.push(o),(s?Xn:fe)(n,function(n,a){o[a]=G(n,r,t,e,u)}),v&&(l(e),l(u)),o):o}function J(n,r){return Sn(n)?zt(n):{}}function Q(n,r,t){if("function"!=typeof n)return Yr;if("undefined"==typeof r||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Qt.funcNames&&(e=!n.name),e=e||!Qt.funcDecomp,!e)){var u=At.call(n);Qt.funcNames||(e=!O.test(u)),e||(e=I.test(u),Xt(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return $r(n,r)}function X(n){function r(){var n=f?a:this;if(u){var h=p(u);$t.apply(h,arguments)}if((o||c)&&(h||(h=p(arguments)),o&&$t.apply(h,o),c&&h.length<i))return e|=16,X([t,s?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(t=n[v]),this instanceof r){n=J(t.prototype);var g=t.apply(n,h);return Sn(g)?g:n}return t.apply(n,h)}var t=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,s=8&e,v=t;return Xt(r,n),r}function Y(t,e){var u=-1,a=ln(),i=t?t.length:0,f=i>=b&&a===n,l=[];if(f){var p=o(e);p?(a=r,e=p):f=!1}for(;++u<i;){var s=t[u];a(e,s)<0&&l.push(s)}return f&&c(e),l}function nn(n,r,t,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Yt(i)||vn(i))){r||(i=nn(i,r,t));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else t||a.push(i)}return a}function rn(n,r,t,e,u,o){if(t){var a=t(n,r);if("undefined"!=typeof a)return!!a}if(n===r)return 0!==n||1/n==1/r;var f=typeof n,c=typeof r;if(!(n!==n||n&&V[f]||r&&V[c]))return!1;if(null==n||null==r)return n===r;var p=Nt.call(n),s=Nt.call(r);if(p==T&&(p=z),s==T&&(s=z),p!=s)return!1;switch(p){case F:case B:return+n==+r;case q:return n!=+n?r!=+r:0==n?1/n==1/r:n==+r;case L:case P:return n==jt(r)}var v=p==$;if(!v){var h=Tt.call(n,"__wrapped__"),g=Tt.call(r,"__wrapped__");if(h||g)return rn(h?n.__wrapped__:n,g?r.__wrapped__:r,t,e,u,o);if(p!=z)return!1;var y=n.constructor,m=r.constructor;if(y!=m&&!(In(y)&&y instanceof y&&In(m)&&m instanceof m)&&"constructor"in n&&"constructor"in r)return!1}var b=!u;u||(u=i()),o||(o=i());for(var d=u.length;d--;)if(u[d]==n)return o[d]==r;var _=0;if(a=!0,u.push(n),o.push(r),v){if(d=n.length,_=r.length,a=_==d,a||e)for(;_--;){var w=d,j=r[_];if(e)for(;w--&&!(a=rn(n[w],j,t,e,u,o)););else if(!(a=rn(n[_],j,t,e,u,o)))break}}else ie(r,function(r,i,f){return Tt.call(f,i)?(_++,a=Tt.call(n,i)&&rn(n[i],r,t,e,u,o)):void 0}),a&&!e&&ie(n,function(n,r,t){return Tt.call(t,r)?a=--_>-1:void 0});return u.pop(),o.pop(),b&&(l(u),l(o)),a}function tn(n,r,t,e,u){(Yt(r)?Xn:fe)(r,function(r,o){var a,i,f=r,l=n[o];if(r&&((i=Yt(r))||le(r))){for(var c=e.length;c--;)if(a=e[c]==r){l=u[c];break}if(!a){var p;t&&(f=t(l,r),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Yt(l)?l:[]:le(l)?l:{}),e.push(r),u.push(l),p||tn(l,r,t,e,u)}}else t&&(f=t(l,r),"undefined"==typeof f&&(f=r)),"undefined"!=typeof f&&(l=f);n[o]=l})}function en(n,r){return n+St(Ht()*(r-n+1))}function un(t,e,u){var a=-1,f=ln(),p=t?t.length:0,s=[],v=!e&&p>=b&&f===n,h=u||v?i():s;if(v){var g=o(h);f=r,h=g}for(;++a<p;){var y=t[a],m=u?u(y,a,t):y;(e?!a||h[h.length-1]!==m:f(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(l(h.array),c(h)):u&&l(h),s}function on(n){return function(r,t,e){var u={};t=h.createCallback(t,e,3);var o=-1,a=r?r.length:0;if("number"==typeof a)for(;++o<a;){var i=r[o];n(u,i,t(i,o,r),r)}else fe(r,function(r,e,o){n(u,r,t(r,e,o),o)});return u}}function an(n,r,t,e,u,o){var a=1&r,i=2&r,f=4&r,l=16&r,c=32&r;if(!i&&!In(n))throw new kt;l&&!t.length&&(r&=-17,l=t=!1),c&&!e.length&&(r&=-33,c=e=!1);var s=n&&n.__bindData__;if(s&&s!==!0)return s=p(s),s[2]&&(s[2]=p(s[2])),s[3]&&(s[3]=p(s[3])),!a||1&s[1]||(s[4]=u),!a&&1&s[1]&&(r|=8),!f||4&s[1]||(s[5]=o),l&&$t.apply(s[2]||(s[2]=[]),t),c&&Wt.apply(s[3]||(s[3]=[]),e),s[1]|=r,an.apply(null,s);var v=1==r||17===r?d:X;return v([n,r,t,e,u,o])}function fn(n){return re[n]}function ln(){var r=(r=h.indexOf)===br?n:r;return r}function cn(n){return"function"==typeof n&&Rt.test(n)}function pn(n){var r,t;return n&&Nt.call(n)==z&&(r=n.constructor,!In(r)||r instanceof r)?(ie(n,function(n,r){t=r}),"undefined"==typeof t||Tt.call(n,t)):!1}function sn(n){return te[n]}function vn(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Nt.call(n)==T||!1}function hn(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t=r,r=!1),G(n,r,"function"==typeof t&&Q(t,e,1))}function gn(n,r,t){return G(n,!0,"function"==typeof r&&Q(r,t,1))}function yn(n,r){var t=J(n);return r?oe(t,r):t}function mn(n,r,t){var e;return r=h.createCallback(r,t,3),fe(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function bn(n,r,t){var e;return r=h.createCallback(r,t,3),_n(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function dn(n,r,t){var e=[];ie(n,function(n,r){e.push(r,n)});var u=e.length;for(r=Q(r,t,3);u--&&r(e[u--],e[u],n)!==!1;);return n}function _n(n,r,t){var e=ne(n),u=e.length;for(r=Q(r,t,3);u--;){var o=e[u];if(r(n[o],o,n)===!1)break}return n}function wn(n){var r=[];return ie(n,function(n,t){In(n)&&r.push(t)}),r.sort()}function jn(n,r){return n?Tt.call(n,r):!1}function kn(n){for(var r=-1,t=ne(n),e=t.length,u={};++r<e;){var o=t[r];u[n[o]]=o}return u}function xn(n){return n===!0||n===!1||n&&"object"==typeof n&&Nt.call(n)==F||!1}function Cn(n){return n&&"object"==typeof n&&Nt.call(n)==B||!1}function On(n){return n&&1===n.nodeType||!1}function Nn(n){var r=!0;if(!n)return r;var t=Nt.call(n),e=n.length;return t==$||t==P||t==T||t==z&&"number"==typeof e&&In(n.splice)?!e:(fe(n,function(){return r=!1}),r)}function Rn(n,r,t,e){return rn(n,r,"function"==typeof t&&Q(t,e,2))}function En(n){return Pt(n)&&!Kt(parseFloat(n))}function In(n){return"function"==typeof n}function Sn(n){return!(!n||!V[typeof n])}function An(n){return Tn(n)&&n!=+n}function Dn(n){return null===n}function Tn(n){return"number"==typeof n||n&&"object"==typeof n&&Nt.call(n)==q||!1}function $n(n){return n&&"object"==typeof n&&Nt.call(n)==L||!1}function Fn(n){return"string"==typeof n||n&&"object"==typeof n&&Nt.call(n)==P||!1}function Bn(n){return"undefined"==typeof n}function Wn(n,r,t){var e={};return r=h.createCallback(r,t,3),fe(n,function(n,t,u){e[t]=r(n,t,u)}),e}function qn(n){var r=arguments,t=2;if(!Sn(n))return n;if("number"!=typeof r[2]&&(t=r.length),t>3&&"function"==typeof r[t-2])var e=Q(r[--t-1],r[t--],2);else t>2&&"function"==typeof r[t-1]&&(e=r[--t]);for(var u=p(arguments,1,t),o=-1,a=i(),f=i();++o<t;)tn(n,u[o],e,a,f);return l(a),l(f),n}function zn(n,r,t){var e={};if("function"!=typeof r){var u=[];ie(n,function(n,r){u.push(r)}),u=Y(u,nn(arguments,!0,!1,1));for(var o=-1,a=u.length;++o<a;){var i=u[o];e[i]=n[i]}}else r=h.createCallback(r,t,3),ie(n,function(n,t,u){r(n,t,u)||(e[t]=n)});return e}function Ln(n){for(var r=-1,t=ne(n),e=t.length,u=ht(e);++r<e;){var o=t[r];u[r]=[o,n[o]]}return u}function Pn(n,r,t){var e={};if("function"!=typeof r)for(var u=-1,o=nn(arguments,!0,!1,1),a=Sn(n)?o.length:0;++u<a;){var i=o[u];i in n&&(e[i]=n[i])}else r=h.createCallback(r,t,3),ie(n,function(n,t,u){r(n,t,u)&&(e[t]=n)});return e}function Kn(n,r,t,e){var u=Yt(n);if(null==t)if(u)t=[];else{var o=n&&n.constructor,a=o&&o.prototype;t=J(a)}return r&&(r=h.createCallback(r,e,4),(u?Xn:fe)(n,function(n,e,u){return r(t,n,e,u)})),t}function Un(n){for(var r=-1,t=ne(n),e=t.length,u=ht(e);++r<e;)u[r]=n[t[r]];return u}function Mn(n){for(var r=arguments,t=-1,e=nn(r,!0,!1,1),u=r[2]&&r[2][r[1]]===n?1:e.length,o=ht(u);++t<u;)o[t]=n[e[t]];return o}function Vn(n,r,t){var e=-1,u=ln(),o=n?n.length:0,a=!1;return t=(0>t?Mt(0,o+t):t)||0,Yt(n)?a=u(n,r,t)>-1:"number"==typeof o?a=(Fn(n)?n.indexOf(r,t):u(n,r,t))>-1:fe(n,function(n){return++e>=t?!(a=n===r):void 0}),a}function Gn(n,r,t){var e=!0;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&(e=!!r(n[u],u,n)););else fe(n,function(n,t,u){return e=!!r(n,t,u)});return e}function Hn(n,r,t){var e=[];r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o;){var a=n[u];r(a,u,n)&&e.push(a)}else fe(n,function(n,t,u){r(n,t,u)&&e.push(n)});return e}function Jn(n,r,t){r=h.createCallback(r,t,3);var e=-1,u=n?n.length:0;if("number"!=typeof u){var o;return fe(n,function(n,t,e){return r(n,t,e)?(o=n,!1):void 0}),o}for(;++e<u;){var a=n[e];if(r(a,e,n))return a}}function Qn(n,r,t){var e;return r=h.createCallback(r,t,3),Yn(n,function(n,t,u){return r(n,t,u)?(e=n,!1):void 0}),e}function Xn(n,r,t){var e=-1,u=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof u)for(;++e<u&&r(n[e],e,n)!==!1;);else fe(n,r);return n}function Yn(n,r,t){var e=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof e)for(;e--&&r(n[e],e,n)!==!1;);else{var u=ne(n);e=u.length,fe(n,function(n,t,o){return t=u?u[--e]:--e,r(o[t],t,o)})}return n}function Zn(n,r){var t=p(arguments,2),e=-1,u="function"==typeof r,o=n?n.length:0,a=ht("number"==typeof o?o:0);return Xn(n,function(n){a[++e]=(u?r:n[r]).apply(n,t)}),a}function nr(n,r,t){var e=-1,u=n?n.length:0;if(r=h.createCallback(r,t,3),"number"==typeof u)for(var o=ht(u);++e<u;)o[e]=r(n[e],e,n);else o=[],fe(n,function(n,t,u){o[++e]=r(n,t,u)});return o}function rr(n,r,t){var u=-(1/0),o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Yt(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];f>o&&(o=f)}else r=null==r&&Fn(n)?e:h.createCallback(r,t,3),Xn(n,function(n,t,e){var a=r(n,t,e);a>u&&(u=a,o=n)});return o}function tr(n,r,t){var u=1/0,o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Yt(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];o>f&&(o=f)}else r=null==r&&Fn(n)?e:h.createCallback(r,t,3),Xn(n,function(n,t,e){var a=r(n,t,e);u>a&&(u=a,o=n)});return o}function er(n,r,t,e){if(!n)return t;var u=arguments.length<3;r=h.createCallback(r,e,4);var o=-1,a=n.length;if("number"==typeof a)for(u&&(t=n[++o]);++o<a;)t=r(t,n[o],o,n);else fe(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)});return t}function ur(n,r,t,e){var u=arguments.length<3;return r=h.createCallback(r,e,4),Yn(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)}),t}function or(n,r,t){return r=h.createCallback(r,t,3),Hn(n,function(n,t,e){return!r(n,t,e)})}function ar(n,r,t){if(n&&"number"!=typeof n.length&&(n=Un(n)),null==r||t)return n?n[en(0,n.length-1)]:v;var e=ir(n);return e.length=Vt(Mt(0,r),e.length),e}function ir(n){var r=-1,t=n?n.length:0,e=ht("number"==typeof t?t:0);return Xn(n,function(n){var t=en(0,++r);e[r]=e[t],e[t]=n}),e}function fr(n){var r=n?n.length:0;return"number"==typeof r?r:ne(n).length}function lr(n,r,t){var e;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&!(e=r(n[u],u,n)););else fe(n,function(n,t,u){return!(e=r(n,t,u))});return!!e}function cr(n,r,t){var e=-1,o=Yt(r),a=n?n.length:0,p=ht("number"==typeof a?a:0);for(o||(r=h.createCallback(r,t,3)),Xn(n,function(n,t,u){var a=p[++e]=f();o?a.criteria=nr(r,function(r){return n[r]}):(a.criteria=i())[0]=r(n,t,u),a.index=e,a.value=n}),a=p.length,p.sort(u);a--;){var s=p[a];p[a]=s.value,o||l(s.criteria),c(s)}return p}function pr(n){return n&&"number"==typeof n.length?p(n):Un(n)}function sr(n){for(var r=-1,t=n?n.length:0,e=[];++r<t;){var u=n[r];u&&e.push(u)}return e}function vr(n){return Y(n,nn(arguments,!0,!0,1))}function hr(n,r,t){var e=-1,u=n?n.length:0;for(r=h.createCallback(r,t,3);++e<u;)if(r(n[e],e,n))return e;return-1}function gr(n,r,t){var e=n?n.length:0;for(r=h.createCallback(r,t,3);e--;)if(r(n[e],e,n))return e;return-1}function yr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=-1;for(r=h.createCallback(r,t,3);++o<u&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[0]:v;return p(n,0,Vt(Mt(0,e),u))}function mr(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(n=nr(n,t,e)),nn(n,r)}function br(r,t,e){if("number"==typeof e){var u=r?r.length:0;e=0>e?Mt(0,u+e):e||0}else if(e){var o=Nr(r,t);return r[o]===t?o:-1}return n(r,t,e)}function dr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else e=null==r||t?1:r||e;return p(n,0,Vt(Mt(0,u-e),u))}function _r(){for(var t=[],e=-1,u=arguments.length,a=i(),f=ln(),p=f===n,s=i();++e<u;){var v=arguments[e];(Yt(v)||vn(v))&&(t.push(v),a.push(p&&v.length>=b&&o(e?t[e]:s)))}var h=t[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=a[0];if(v=h[g],(d?r(d,v):f(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=a[e],(d?r(d,v):f(t[e],v))<0)continue n;m.push(v)}}for(;u--;)d=a[u],d&&c(d);return l(a),l(s),m}function wr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[u-1]:v;return p(n,Mt(0,u-e))}function jr(n,r,t){var e=n?n.length:0;for("number"==typeof t&&(e=(0>t?Mt(0,e+t):Vt(t,e-1))+1);e--;)if(n[e]===r)return e;return-1}function kr(n){for(var r=arguments,t=0,e=r.length,u=n?n.length:0;++t<e;)for(var o=-1,a=r[t];++o<u;)n[o]===a&&(Bt.call(n,o--,1),u--);return n}function xr(n,r,t){n=+n||0,t="number"==typeof t?t:+t||1,null==r&&(r=n,n=0);for(var e=-1,u=Mt(0,Et((r-n)/(t||1))),o=ht(u);++e<u;)o[e]=n,n+=t;return o}function Cr(n,r,t){var e=-1,u=n?n.length:0,o=[];for(r=h.createCallback(r,t,3);++e<u;){var a=n[e];r(a,e,n)&&(o.push(a),Bt.call(n,e--,1),u--)}return o}function Or(n,r,t){if("number"!=typeof r&&null!=r){var e=0,u=-1,o=n?n.length:0;for(r=h.createCallback(r,t,3);++u<o&&r(n[u],u,n);)e++}else e=null==r||t?1:Mt(0,r);return p(n,e)}function Nr(n,r,t,e){var u=0,o=n?n.length:u;for(t=t?h.createCallback(t,e,1):Yr,r=t(r);o>u;){var a=u+o>>>1;t(n[a])<r?u=a+1:o=a}return u}function Rr(){return un(nn(arguments,!0,!0))}function Er(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(t=h.createCallback(t,e,3)),un(n,r,t)}function Ir(n){return Y(n,p(arguments,1))}function Sr(){for(var n=-1,r=arguments.length;++n<r;){var t=arguments[n];if(Yt(t)||vn(t))var e=e?un(Y(e,t).concat(Y(t,e))):t}return e||[]}function Ar(){for(var n=arguments.length>1?arguments:arguments[0],r=-1,t=n?rr(ve(n,"length")):0,e=ht(0>t?0:t);++r<t;)e[r]=ve(n,r);return e}function Dr(n,r){var t=-1,e=n?n.length:0,u={};for(r||!e||Yt(n[0])||(r=[]);++t<e;){var o=n[t];r?u[o]=r[t]:o&&(u[o[0]]=o[1])}return u}function Tr(n,r){if(!In(r))throw new kt;return function(){return--n<1?r.apply(this,arguments):void 0}}function $r(n,r){return arguments.length>2?an(n,17,p(arguments,2),null,r):an(n,1,null,null,r)}function Fr(n){for(var r=arguments.length>1?nn(arguments,!0,!1,1):wn(n),t=-1,e=r.length;++t<e;){var u=r[t];n[u]=an(n[u],1,null,null,n)}return n}function Br(n,r){return arguments.length>2?an(r,19,p(arguments,2),null,n):an(r,3,null,null,n)}function Wr(){for(var n=arguments,r=n.length;r--;)if(!In(n[r]))throw new kt;return function(){for(var r=arguments,t=n.length;t--;)r=[n[t].apply(this,r)];return r[0]}}function qr(n,r){return r="number"==typeof r?r:+r||n.length,an(n,4,null,null,null,r)}function zr(n,r,t){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!In(n))throw new kt;if(r=Mt(0,r)||0,t===!0){var h=!0;s=!1}else Sn(t)&&(h=t.leading,p="maxWait"in t&&(Mt(r,t.maxWait)||0),s="trailing"in t?t.trailing:s);var g=function(){var t=r-(ge()-a);if(0>=t){u&&It(u);var p=l;u=f=l=v,p&&(c=ge(),o=n.apply(i,e),f||u||(e=i=null))}else f=Ft(g,t)},y=function(){f&&It(f),u=f=l=v,(s||p!==r)&&(c=ge(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=ge(),i=this,l=s&&(f||!h),p===!1)var t=h&&!f;else{u||h||(c=a);var v=p-(a-c),m=0>=v;m?(u&&(u=It(u)),c=a,o=n.apply(i,e)):u||(u=Ft(y,v))}return m&&f?f=It(f):f||r===p||(f=Ft(g,r)),t&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function Lr(n){if(!In(n))throw new kt;var r=p(arguments,1);return Ft(function(){n.apply(v,r)},1)}function Pr(n,r){if(!In(n))throw new kt;var t=p(arguments,2);return Ft(function(){n.apply(v,t)},r)}function Kr(n,r){if(!In(n))throw new kt;var t=function(){var e=t.cache,u=r?r.apply(this,arguments):m+arguments[0];return Tt.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return t.cache={},t}function Ur(n){var r,t;if(!In(n))throw new kt;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}}function Mr(n){return an(n,16,p(arguments,1))}function Vr(n){return an(n,32,null,p(arguments,1))}function Gr(n,r,t){var e=!0,u=!0;if(!In(n))throw new kt;return t===!1?e=!1:Sn(t)&&(e="leading"in t?t.leading:e,u="trailing"in t?t.trailing:u),U.leading=e,U.maxWait=r,U.trailing=u,zr(n,r,U)}function Hr(n,r){return an(r,16,[n])}function Jr(n){return function(){return n}}function Qr(n,r,t){var e=typeof n;if(null==n||"function"==e)return Q(n,r,t);if("object"!=e)return tt(n);var u=ne(n),o=u[0],a=n[o];return 1!=u.length||a!==a||Sn(a)?function(r){for(var t=u.length,e=!1;t--&&(e=rn(r[u[t]],n[u[t]],null,!0)););return e}:function(n){var r=n[o];return a===r&&(0!==a||1/a==1/r)}}function Xr(n){return null==n?"":jt(n).replace(ue,fn)}function Yr(n){return n}function Zr(n,r,t){var e=!0,u=r&&wn(r);r&&(t||u.length)||(null==t&&(t=r),o=g,r=n,n=h,u=wn(r)),t===!1?e=!1:Sn(t)&&"chain"in t&&(e=t.chain);var o=n,a=In(o);Xn(u,function(t){var u=n[t]=r[t];a&&(o.prototype[t]=function(){var r=this.__chain__,t=this.__wrapped__,a=[t];$t.apply(a,arguments);var i=u.apply(n,a);if(e||r){if(t===i&&Sn(i))return this;i=new o(i),i.__chain__=r}return i})})}function nt(){return t._=Ot,this}function rt(){}function tt(n){return function(r){return r[n]}}function et(n,r,t){var e=null==n,u=null==r;if(null==t&&("boolean"==typeof n&&u?(t=n,n=1):u||"boolean"!=typeof r||(t=r,u=!0)),e&&u&&(r=1),n=+n||0,u?(r=n,n=0):r=+r||0,t||n%1||r%1){var o=Ht();return Vt(n+o*(r-n+parseFloat("1e-"+((o+"").length-1))),r)}return en(n,r)}function ut(n,r){if(n){var t=n[r];return In(t)?n[r]():t}}function ot(n,r,t){var e=h.templateSettings;n=jt(n||""),t=ae({},t,e);var u,o=ae({},t.imports,e.imports),i=ne(o),f=Un(o),l=0,c=t.interpolate||E,p="__p += '",s=wt((t.escape||E).source+"|"+c.source+"|"+(c===N?x:E).source+"|"+(t.evaluate||E).source+"|$","g");n.replace(s,function(r,t,e,o,i,f){return e||(e=o),p+=n.slice(l,f).replace(S,a),t&&(p+="' +\n__e("+t+") +\n'"),i&&(u=!0,p+="';\n"+i+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+r.length,r}),p+="';\n";var g=t.variable,y=g;y||(g="obj",p="with ("+g+") {\n"+p+"\n}\n"),p=(u?p.replace(w,""):p).replace(j,"$1").replace(k,"$1;"),p="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+D++ +"]")+"\n*/";try{var b=mt(i,"return "+p+m).apply(v,f)}catch(d){throw d.source=p,d}return r?b(r):(b.source=p,b)}function at(n,r,t){n=(n=+n)>-1?n:0;var e=-1,u=ht(n);for(r=Q(r,t,1);++e<n;)u[e]=r(e);return u}function it(n){return null==n?"":jt(n).replace(ee,sn)}function ft(n){var r=++y;return jt(null==n?"":n)+r}function lt(n){return n=new g(n),n.__chain__=!0,n}function ct(n,r){return r(n),n}function pt(){return this.__chain__=!0,this}function st(){return jt(this.__wrapped__)}function vt(){return this.__wrapped__}t=t?Z.defaults(H.Object(),t,Z.pick(H,A)):H;var ht=t.Array,gt=t.Boolean,yt=t.Date,mt=t.Function,bt=t.Math,dt=t.Number,_t=t.Object,wt=t.RegExp,jt=t.String,kt=t.TypeError,xt=[],Ct=_t.prototype,Ot=t._,Nt=Ct.toString,Rt=wt("^"+jt(Nt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Et=bt.ceil,It=t.clearTimeout,St=bt.floor,At=mt.prototype.toString,Dt=cn(Dt=_t.getPrototypeOf)&&Dt,Tt=Ct.hasOwnProperty,$t=xt.push,Ft=t.setTimeout,Bt=xt.splice,Wt=xt.unshift,qt=function(){try{var n={},r=cn(r=_t.defineProperty)&&r,t=r(n,n,n)&&r}catch(e){}return t}(),zt=cn(zt=_t.create)&&zt,Lt=cn(Lt=ht.isArray)&&Lt,Pt=t.isFinite,Kt=t.isNaN,Ut=cn(Ut=_t.keys)&&Ut,Mt=bt.max,Vt=bt.min,Gt=t.parseInt,Ht=bt.random,Jt={};Jt[$]=ht,Jt[F]=gt,Jt[B]=yt,Jt[W]=mt,Jt[z]=_t,Jt[q]=dt,Jt[L]=wt,Jt[P]=jt,g.prototype=h.prototype;var Qt=h.support={};Qt.funcDecomp=!cn(t.WinRTError)&&I.test(s),Qt.funcNames="string"==typeof mt.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:h}},zt||(J=function(){function n(){}return function(r){if(Sn(r)){n.prototype=r;var e=new n;n.prototype=null}return e||t.Object()}}());var Xt=qt?function(n,r){M.value=r,qt(n,"__bindData__",M)}:rt,Yt=Lt||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Nt.call(n)==$||!1},Zt=function(n){var r,t=n,e=[];if(!t)return e;if(!V[typeof n])return e;for(r in t)Tt.call(t,r)&&e.push(r);return e},ne=Ut?function(n){return Sn(n)?Ut(n):[]}:Zt,re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te=kn(re),ee=wt("("+ne(te).join("|")+")","g"),ue=wt("["+ne(re).join("")+"]","g"),oe=function(n,r,t){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof t?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&V[typeof u])for(var c=-1,p=V[typeof u]&&ne(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ae=function(n,r,t){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof t?2:a.length;++i<f;)if(u=a[i],u&&V[typeof u])for(var l=-1,c=V[typeof u]&&ne(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},ie=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(e in u)if(r(u[e],e,n)===!1)return o;return o},fe=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(var a=-1,i=V[typeof u]&&ne(u),f=i?i.length:0;++a<f;)if(e=i[a],r(u[e],e,n)===!1)return o;return o},le=Dt?function(n){if(!n||Nt.call(n)!=z)return!1;var r=n.valueOf,t=cn(r)&&(t=Dt(r))&&Dt(t);return t?n==t||Dt(n)==t:pn(n)}:pn,ce=on(function(n,r,t){Tt.call(n,t)?n[t]++:n[t]=1}),pe=on(function(n,r,t){(Tt.call(n,t)?n[t]:n[t]=[]).push(r)}),se=on(function(n,r,t){n[t]=r}),ve=nr,he=Hn,ge=cn(ge=yt.now)&&ge||function(){return(new yt).getTime()},ye=8==Gt(_+"08")?Gt:function(n,r){return Gt(Fn(n)?n.replace(R,""):n,r||0)};return h.after=Tr,h.assign=oe,h.at=Mn,h.bind=$r,h.bindAll=Fr,h.bindKey=Br,h.chain=lt,h.compact=sr,h.compose=Wr,h.constant=Jr,h.countBy=ce,h.create=yn,h.createCallback=Qr,h.curry=qr,h.debounce=zr,h.defaults=ae,h.defer=Lr,h.delay=Pr,h.difference=vr,h.filter=Hn,h.flatten=mr,h.forEach=Xn,h.forEachRight=Yn,h.forIn=ie,h.forInRight=dn,h.forOwn=fe,h.forOwnRight=_n,h.functions=wn,h.groupBy=pe,h.indexBy=se,h.initial=dr,h.intersection=_r,h.invert=kn,h.invoke=Zn,h.keys=ne,h.map=nr,h.mapValues=Wn,h.max=rr,h.memoize=Kr,h.merge=qn,h.min=tr,h.omit=zn,h.once=Ur,h.pairs=Ln,h.partial=Mr,h.partialRight=Vr,h.pick=Pn,h.pluck=ve,h.property=tt,h.pull=kr,h.range=xr,h.reject=or,h.remove=Cr,h.rest=Or,h.shuffle=ir,h.sortBy=cr,h.tap=ct,h.throttle=Gr,h.times=at,h.toArray=pr,h.transform=Kn,h.union=Rr,h.uniq=Er,h.values=Un,h.where=he,h.without=Ir,h.wrap=Hr,h.xor=Sr,h.zip=Ar,h.zipObject=Dr,h.collect=nr,h.drop=Or,h.each=Xn,h.eachRight=Yn,h.extend=oe,h.methods=wn,h.object=Dr,h.select=Hn,h.tail=Or,h.unique=Er,h.unzip=Ar,Zr(h),h.clone=hn,h.cloneDeep=gn,h.contains=Vn,h.escape=Xr,h.every=Gn,h.find=Jn,h.findIndex=hr,h.findKey=mn,h.findLast=Qn,h.findLastIndex=gr,h.findLastKey=bn,h.has=jn,h.identity=Yr,h.indexOf=br,h.isArguments=vn,h.isArray=Yt,h.isBoolean=xn,h.isDate=Cn,h.isElement=On,h.isEmpty=Nn,h.isEqual=Rn,h.isFinite=En,h.isFunction=In,h.isNaN=An,h.isNull=Dn,h.isNumber=Tn,h.isObject=Sn,h.isPlainObject=le,h.isRegExp=$n,h.isString=Fn,h.isUndefined=Bn,h.lastIndexOf=jr,h.mixin=Zr,h.noConflict=nt,h.noop=rt,h.now=ge,h.parseInt=ye,h.random=et,h.reduce=er,h.reduceRight=ur,h.result=ut,h.runInContext=s,h.size=fr,h.some=lr,h.sortedIndex=Nr,h.template=ot,h.unescape=it,h.uniqueId=ft,h.all=Gn,h.any=lr,h.detect=Jn,h.findWhere=Jn,h.foldl=er,h.foldr=ur,h.include=Vn,h.inject=er,Zr(function(){var n={};return fe(h,function(r,t){h.prototype[t]||(n[t]=r)}),n}(),!1),h.first=yr,h.last=wr,h.sample=ar,h.take=yr,h.head=yr,fe(h,function(n,r){var t="sample"!==r;h.prototype[r]||(h.prototype[r]=function(r,e){var u=this.__chain__,o=n(this.__wrapped__,r,e);return u||null!=r&&(!e||t&&"function"==typeof r)?new g(o,u):o})}),h.VERSION="2.4.1",h.prototype.chain=pt,h.prototype.toString=st,h.prototype.value=vt,h.prototype.valueOf=vt,Xn(["join","pop","shift"],function(n){var r=xt[n];h.prototype[n]=function(){var n=this.__chain__,t=r.apply(this.__wrapped__,arguments);return n?new g(t,n):t}}),Xn(["push","reverse","sort","unshift"],function(n){var r=xt[n];h.prototype[n]=function(){return r.apply(this.__wrapped__,arguments),this}}),Xn(["concat","slice","splice"],function(n){var r=xt[n];h.prototype[n]=function(){return new g(r.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var v,h=[],g=[],y=0,m=+new Date+"",b=75,d=40,_=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,R=RegExp("^["+_+"]*0+(?=.$)"),E=/($^)/,I=/\bthis\b/,S=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],D=0,T="[object Arguments]",$="[object Array]",F="[object Boolean]",B="[object Date]",W="[object Function]",q="[object Number]",z="[object Object]",L="[object RegExp]",P="[object String]",K={};K[W]=!1,K[T]=K[$]=K[F]=K[B]=K[q]=K[z]=K[L]=K[P]=!0;var U={leading:!1,maxWait:0,trailing:!1},M={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=V[typeof window]&&window||this,J=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(H=Y);var Z=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:H._=Z}).call(this);


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],83:[function(require,module,exports){
var _=require("lodash"),colors={hexToArray:function(r){var o=colors.hexToString(r);return[parseInt(o[1]+o[2],16),parseInt(o[3]+o[4],16),parseInt(o[5]+o[6],16)]},arrayToHex:function(r){var o=_.map(r,function(r){var o=parseInt(r,10).toString(16);return o.length>1?o:"0"+o}).join("");return parseInt(o,16)},lightness:function(r,o){if("number"!=typeof r)throw new Error("hexColor must be in the form of 0x54AFFF");if(0>r||r>16777215)throw new Error("hexColor is out of range");var n=colors.hexToArray(r),e=255;0>o&&(o*=-1,e=0);var t=_.map(n,function(r){return r*(1-o)+e*o});return colors.arrayToHex(t)},mix:function(r,o,n){var e=colors.hexToArray(r),t=colors.hexToArray(o),a=_.map(e,function(r,o){return r*(1-n)+t[o]*n});return colors.arrayToHex(a)},hexToString:function(r){for(var o=parseInt(r,10).toString(16);o.length<6;)o="0"+o;return"#"+o}};module.exports=colors;


},{"lodash":88}],84:[function(require,module,exports){
(function (Buffer){
var insertCss=require("insert-css"),ClassList=require("class-list"),EventEmitter=require("events").EventEmitter,_=require("lodash"),colors=require("./colors"),_menuTemplate=null,_cssTemplate=null,_levelTemplate=null,sortAndFilterManifests=function(C){return _.chain(C).pairs().filter(function(C){return C[1].visible!==!1}).sortBy(function(C){return C[1].order}).value()},handlers=function(){var C=ClassList(document.body),g=!1,b=null,l=!1,t=function(C){C&&C.preventDefault(),g?I():W()},I=function(){C.remove("poem-menu-open"),b.emit("close"),g=!1},W=function(){C.add("poem-menu-open"),b.emit("open"),g=!0},o=function(C){b.emit("load",{slug:this.getAttribute("data-slug")}),I()};return function(C,g,e){b=g,l=C.preventDefault;var A=e.getElementsByClassName("poem-menu-burger")[0];A.addEventListener("click",t,!1);var c=e.getElementsByClassName("poem-menu-levels")[0].getElementsByTagName("a");return _.each(c,function(C){C.addEventListener("click",o,!1)}),e.getElementsByClassName("poem-menu-blocker")[0].addEventListener("click",I,!1),window.addEventListener("keydown",function(g){g.keyCode===C.toggleKey&&t(g)}),{close:I,open:W}}}(),loadTemplatesOnce=function(){var C=!0;return function(){C&&(C=!1,_menuTemplate=_.template(Buffer("PGRpdiBjbGFzcz0ncG9lbS1tZW51Jz4KCQoJPGEgY2xhc3M9InBvZW0tbWVudS1idXJnZXIiIGhyZWY9IiNtZW51IiB0aXRsZT0nSGl0IEVTQyBrZXkgdG8gb3Blbi9jbG9zZSc+CgkJPGRpdiBjbGFzcz0icG9lbS1tZW51LWJ1cmdlci1iYXJzIj48L2Rpdj4KCTwvYT4KCQoJPGRpdiBjbGFzcz0ncG9lbS1tZW51LXRvcCc+PC9kaXY+CgkKCTxkaXYgY2xhc3M9J3BvZW0tbWVudS1taWRkbGUnPgoJCTxkaXYgY2xhc3M9J3BvZW0tbWVudS1sZXZlbHMtdG9wJz48L2Rpdj4KCQk8ZGl2IGNsYXNzPSdwb2VtLW1lbnUtbGV2ZWxzJz4KCQkJPCU9IGxldmVscyAlPgoJCTwvZGl2PgoJCTxkaXYgY2xhc3M9J3BvZW0tbWVudS1sZXZlbHMtYm90dG9tJz48L2Rpdj4KCTwvZGl2PgoJCQoJPGRpdiBjbGFzcz0ncG9lbS1tZW51LWJvdHRvbSc+PC9kaXY+CgkKPC9kaXY+CjxkaXYgY2xhc3M9J3BvZW0tbWVudS1ibG9ja2VyJz48L2Rpdj4=","base64")),_levelTemplate=_.template(Buffer("PGEgaHJlZj0nIy88JS0gc2x1ZyAlPicgZGF0YS1zbHVnPSc8JS0gc2x1ZyAlPicgY2xhc3M9J3BvZW0tbWVudS1sZXZlbCc+Cgk8aDIgY2xhc3M9J3BvZW0tbWVudS1sZXZlbC1uYW1lJz48JS0gbWFuaWZlc3QubmFtZSAlPjwvaDE+Cgk8ZGl2IGNsYXNzPSdwb2VtLW1lbnUtbGV2ZWwtZGVzY3JpcHRpb24nPjwlLSBtYW5pZmVzdC5kZXNjcmlwdGlvbiAlPjwvZGl2Pgo8L2E+","base64")),_cssTemplate=_.template(Buffer("LnBvZW0tbWVudSwKLnBvZW0tbWVudSAqLAoucG9lbS1tZW51ICo6YmVmb3JlLAoucG9lbS1tZW51ICo6YWZ0ZXIgewoJLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OyAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLnBvZW0tbWVudSBhIHsKCWNvbG9yOiA8JT0gcHJpbWFyeSAlPjsKfQoucG9lbS1tZW51IHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMDBweCk7CiAgICAgICAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzAwcHgpOwogICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTMwMHB4KTsKICAgICAgICAgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMDBweCk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzAwcHgpOwogICAgdHJhbnNpdGlvbjogNTAwbXM7CiAgICB3aWR0aDogMzAwcHg7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBib3JkZXItcmlnaHQ6IDNweCBzb2xpZCA8JT0gbWVudUxpZ2h0ICU+OwogICAgYmFja2dyb3VuZDogPCU9IG1lbnVEYXJrICU+OwogICAgcGFkZGluZzogMWVtOwoJei1pbmRleDoxMDE7Cn0KLnBvZW0tbWVudS1vcGVuIC5wb2VtLW1lbnUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7CiAgICAgICAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKICAgICAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOwogICAgICAgICAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKICAgIGJveC1zaGFkb3c6IDAgMCAyZW0gcmdiYSgwLCAwLCAwLCAwLjE5KTsKfQoucG9lbS1tZW51LWJsb2NrZXIgewoJaGVpZ2h0OjA7Cgl3aWR0aDoxMDAlOwoJcG9zaXRpb246YWJzb2x1dGU7Cgl0b3A6MDsKCWxlZnQ6MDsKCXotaW5kZXg6MTAwOwoJY3Vyc29yOiBwb2ludGVyOwogICAgYmFja2dyb3VuZDogPCU9IG1lbnUgJT47CglvcGFjaXR5OjA7Cgktd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXM7CgkgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXM7CgkgICAgLW1zLXRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXM7CgkgICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXM7CgkgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXM7Cn0KLnBvZW0tbWVudS1vcGVuIC5wb2VtLW1lbnUtYmxvY2tlciB7CgloZWlnaHQ6MTAwJTsKCW9wYWNpdHk6MC43Owp9Ci5wb2VtLW1lbnUtb3BlbiAucG9lbS1tZW51LWNvbnRhaW5lciB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgzMDBweCk7CiAgICAgICAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgzMDBweCk7CiAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWCgzMDBweCk7CiAgICAgICAgIC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlWCgzMDBweCk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgzMDBweCk7CiAgICBvcGFjaXR5OiAwLjM7Cn0KLnBvZW0tbWVudS1jb250YWluZXIgewoJLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7CgkgICAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKCSAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOwoJICAgICAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7CgkgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKCWhlaWdodDogMTAwJTsKCXRyYW5zaXRpb246IHRyYW5zZm9ybSA1MDBtcywgb3BhY2l0eSA1MDBtczsKCXdpZHRoOiAxMDAlOwoJcG9zaXRpb246IGFic29sdXRlOwoJei1pbmRleDowOwp9Ci5wb2VtLW1lbnUtYnVyZ2VyIHsKCXBhZGRpbmc6IDEuNWVtIDAuNWVtOwoJZGlzcGxheTogaW5saW5lLWJsb2NrOwoJcG9zaXRpb246IGFic29sdXRlOwoJdG9wOiAwOwoJcmlnaHQ6IDA7Cgktd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDMuNGVtLCAwLjRlbSk7CgkgICAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDMuNGVtLCAwLjRlbSk7CgkgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDMuNGVtLCAwLjRlbSk7CgkgICAgIC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDMuNGVtLCAwLjRlbSk7CgkgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDMuNGVtLCAwLjRlbSk7Cgktd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDUwMG1zOwoJICAgLW1vei10cmFuc2l0aW9uOiAtbW96LXRyYW5zZm9ybSA1MDBtczsKCSAgICAtbXMtdHJhbnNpdGlvbjogLW1zLXRyYW5zZm9ybSA1MDBtczsKCSAgICAgLW8tdHJhbnNpdGlvbjogLW8tdHJhbnNmb3JtIDUwMG1zOwoJICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gNTAwbXM7Cn0KLnBvZW0tbWVudS1idXJnZXItYmFycyB7CglkaXNwbGF5OmJsb2NrOwoJaGVpZ2h0OjAuM2VtOwoJd2lkdGg6MmVtOwoJYmFja2dyb3VuZDogPCU9IGhhbWJ1cmdlciAlPjsKCXBvc2l0aW9uOnJlbGF0aXZlOwoJY3Vyc29yOiBwb2ludGVyOwoJLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgMC42NnM7CgkgICAtbW96LXRyYW5zaXRpb246IGFsbCAwLjY2czsKCSAgICAtbXMtdHJhbnNpdGlvbjogYWxsIDAuNjZzOwoJICAgICAtby10cmFuc2l0aW9uOiBhbGwgMC42NnM7CgkgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjY2czsKfQoucG9lbS1tZW51LWJ1cmdlci1iYXJzOmFmdGVyIHsKCWNvbnRlbnQ6Jyc7Cglwb3NpdGlvbjphYnNvbHV0ZTsKCXRvcDowLjhlbTsKCXdpZHRoOjJlbTsKCWhlaWdodDowLjNlbTsKCWJhY2tncm91bmQ6IDwlPSBoYW1idXJnZXIgJT47Cgktd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjY2czsKCSAgIC1tb3otdHJhbnNpdGlvbjogYWxsIDAuNjZzOwoJICAgIC1tcy10cmFuc2l0aW9uOiBhbGwgMC42NnM7CgkgICAgIC1vLXRyYW5zaXRpb246IGFsbCAwLjY2czsKCSAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNjZzOwp9Ci5wb2VtLW1lbnUtYnVyZ2VyLWJhcnM6YmVmb3JlIHsKCWNvbnRlbnQ6Jyc7Cglwb3NpdGlvbjphYnNvbHV0ZTsKCXRvcDotMC44ZW07Cgl3aWR0aDoyZW07CgloZWlnaHQ6MC4zZW07CgliYWNrZ3JvdW5kOjwlPSBoYW1idXJnZXIgJT47Cgktd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjY2czsKCSAgIC1tb3otdHJhbnNpdGlvbjogYWxsIDAuNjZzOwoJICAgIC1tcy10cmFuc2l0aW9uOiBhbGwgMC42NnM7CgkgICAgIC1vLXRyYW5zaXRpb246IGFsbCAwLjY2czsKCSAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNjZzOwp9CgoucG9lbS1tZW51LW9wZW4gLnBvZW0tbWVudS1idXJnZXItYmFycyB7CgliYWNrZ3JvdW5kOnRyYW5zcGFyZW50Owp9Ci5wb2VtLW1lbnUtb3BlbiAucG9lbS1tZW51LWJ1cmdlci1iYXJzOmJlZm9yZSB7Cgktd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMjI1ZGVnKTsKCSAgIC1tb3otdHJhbnNmb3JtOnJvdGF0ZSgyMjVkZWcpOwoJICAgIC1tcy10cmFuc2Zvcm06cm90YXRlKDIyNWRlZyk7CgkgICAgIC1vLXRyYW5zZm9ybTpyb3RhdGUoMjI1ZGVnKTsKCSAgICAgICAgdHJhbnNmb3JtOnJvdGF0ZSgyMjVkZWcpOwoJdG9wOjA7Cn0KLnBvZW0tbWVudS1vcGVuIC5wb2VtLW1lbnUtYnVyZ2VyLWJhcnM6YWZ0ZXIgewoJLXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0yMjVkZWcpOwoJICAgLW1vei10cmFuc2Zvcm06cm90YXRlKC0yMjVkZWcpOwoJICAgIC1tcy10cmFuc2Zvcm06cm90YXRlKC0yMjVkZWcpOwoJICAgICAtby10cmFuc2Zvcm06cm90YXRlKC0yMjVkZWcpOwoJICAgICAgICB0cmFuc2Zvcm06cm90YXRlKC0yMjVkZWcpOwoJdG9wOjA7Cn0KLnBvZW0tbWVudS1ib3R0b20gewoJcG9zaXRpb246IGFic29sdXRlOwoJYm90dG9tOiAwOwoJd2lkdGg6IDEwMCU7CglsZWZ0OiAwOwoJcGFkZGluZzogMWVtOwp9Ci5wb2VtLW1lbnUtYm90dG9tLW11dGUgewoJdGV4dC1hbGlnbjpyaWdodDsKfQoucG9lbS1tZW51LWJvdHRvbS1tdXRlIGltZyB7Cgl3aWR0aDo2MHB4Owp9Ci5wb2VtLW1lbnUtYm90dG9tLXJlc2V0IHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCWJvdHRvbToxLjNlbTsKCWxlZnQ6MWVtOwp9Ci5wb2VtLW1lbnUtdG9wIHsKICAgIGNvbG9yOiA8JT0gcHJpbWFyeSAlPjsKICAgIGZvbnQtc2l6ZTogMS43ZW07CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBmb250LXdlaWdodDogODAwOwogICAgbGluZS1oZWlnaHQ6IDEuMjsKICAgIG1hcmdpbi10b3A6IDAuMWVtOwp9Ci5wb2VtLW1lbnUtbWlkZGxlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICByaWdodDogMDsKICAgIHRvcDogNC40ZW07CiAgICBib3R0b206IDVlbTsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgcGFkZGluZzogMWVtOwogICAgYmFja2dyb3VuZDogPCU9IG1lbnUgJT47CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgPCU9IG1lbnVMaWdodCAlPjsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCA8JT0gbWVudURhcmsgJT47Cn0KLnBvZW0tbWVudS1sZXZlbC1uYW1lIHsKICAgIG1hcmdpbjogMDsKICAgIGZvbnQtd2VpZ2h0OiAxMDA7CiAgICBmb250LXNpemU6IDEuMWVtOwogICAgbWFyZ2luLWJvdHRvbTogMC4zZW07Cgljb2xvcjogPCU9IHByaW1hcnkgJT4KfQphOmhvdmVyIC5wb2VtLW1lbnUtbGV2ZWwtbmFtZSB7Cgljb2xvcjogPCU9IHByaW1hcnlBY3RpdmUgJT4KfQoucG9lbS1tZW51LWxldmVsLWRlc2NyaXB0aW9uIHsKICAgIGNvbG9yOiA8JT0gdGV4dCAlPjsKICAgIHRleHQtdHJhbnNmb3JtOiBub25lOwogICAgZm9udC1zaXplOiAwLjhlbTsKICAgIGZvbnQtd2VpZ2h0OiAxMDA7Cn0KYTpob3ZlciAucG9lbS1tZW51LWxldmVsLWRlc2NyaXB0aW9uIHsKCWNvbG9yOiA8JT0gdGV4dEFjdGl2ZSAlPgp9CgphLnBvZW0tbWVudS1sZXZlbCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGJvcmRlcjogMXB4IHNvbGlkIDwlPSBsZXZlbEFjdGl2ZSAlPjsKICAgIG1hcmdpbjogMS4zZW0gMDsKICAgIHBhZGRpbmc6IDAuNWVtOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgYm94LXNoYWRvdzogMCAwIDAuOWVtIHJnYmEoMCwgMCwgMCwgMC4yMik7CiAgICBiYWNrZ3JvdW5kOiA8JT0gbGV2ZWwgJT47CiAgICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDIwMG1zOwogICAgICAgLW1vei10cmFuc2l0aW9uOiAtbW96LXRyYW5zZm9ybSAyMDBtczsKICAgICAgICAtbXMtdHJhbnNpdGlvbjogLW1zLXRyYW5zZm9ybSAyMDBtczsKICAgICAgICAgLW8tdHJhbnNpdGlvbjogLW8tdHJhbnNmb3JtIDIwMG1zOwogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjAwbXM7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAtbW96LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgLW1zLXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgIC1vLXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7Cn0KYS5wb2VtLW1lbnUtbGV2ZWwtdGl0bGVzIHsKCXRleHQtYWxpZ246IGNlbnRlcjsKCXBhZGRpbmc6IDAuNGVtOwoJbWFyZ2luLXRvcDogMC41ZW07Cn0KYS5wb2VtLW1lbnUtbGV2ZWw6aG92ZXIgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuMDE1KTsKICAgICAgIC1tb3otdHJhbnNmb3JtOiBzY2FsZSgxLjAxNSk7CiAgICAgICAgLW1zLXRyYW5zZm9ybTogc2NhbGUoMS4wMTUpOwogICAgICAgICAtby10cmFuc2Zvcm06IHNjYWxlKDEuMDE1KTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAxNSk7Cn0KQG1lZGlhIChtYXgtd2lkdGg6NDAwcHgpIHsKCS5wb2VtLW1lbnUgewoJICAgIGZvbnQtc2l6ZTogMC44NWVtOwoJfQoJLnBvZW0tbWVudS1vcGVuIC5idXJnZXItd3JhcHBlciB7CgkgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTAuMWVtKTsKCSAgICAgICAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMC4xZW0pOwoJICAgICAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0wLjFlbSk7CgkgICAgICAgICAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTAuMWVtKTsKCSAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMC4xZW0pOwoJfQoJCgkucG9lbS1tZW51LXRvcCB7CgkgICAgdGV4dC1hbGlnbjogbGVmdDsKCSAgICBmb250LXNpemU6IDIuMWVtOwoJfQoJLnBvZW0tbWVudS1taWRkbGUgewoJICAgIHRvcDogNC44ZW07CgkgICAgYm90dG9tOiAzLjVlbTsKCX0KfQ==","base64")))}}(),runCssTemplates=function(C){var g=C.primaryColor>C.menuColor?1:-1,b=_cssTemplate(_.mapValues({hamburger:C.hamburgerColor,primaryActive:C.primaryColor,text:C.textColor,menu:C.menuColor,textActive:colors.lightness(C.textColor,.1*g),menuDark:colors.lightness(C.menuColor,g*-.2),menuLight:colors.lightness(C.menuColor,.2*g),primary:colors.mix(C.primaryColor,C.menuColor,.2),level:colors.mix(C.primaryColor,C.menuColor,.9),levelActive:colors.mix(C.primaryColor,C.menuColor,.6)},colors.hexToString));insertCss(b)},runHtmlTemplates=function(C,g){function b(C,g){_.isElement(g)?C.appendChild(g):C.innerHTML=g}var l=_.reduce(C,function(C,g){return C+_levelTemplate({slug:g[0],manifest:g[1]})},""),t=_menuTemplate({levels:l}),I=document.createElement("div");return I.innerHTML=t,b(I.getElementsByClassName("poem-menu-top")[0],g.top),b(I.getElementsByClassName("poem-menu-levels-top")[0],g.beforeLevels),b(I.getElementsByClassName("poem-menu-levels-bottom")[0],g.afterLevels),b(I.getElementsByClassName("poem-menu-bottom")[0],g.bottom),document.body.insertBefore(I,document.body.firstChild),I};module.exports=function(C,g){loadTemplatesOnce();var b=_.extend({hamburgerColor:16777215,primaryColor:5550079,textColor:10471137,menuColor:2567732,top:"Poem",beforeLevels:"",afterLevels:"",bottom:"",preventDefaultLevelLinks:!0,toggleKey:27},g),l=new EventEmitter,t=sortAndFilterManifests(C);runCssTemplates(b);var I=runHtmlTemplates(t,b),W=handlers(b,l,I);return{emitter:l,close:W.close,open:W.open}};


}).call(this,require("buffer").Buffer)

},{"./colors":83,"buffer":108,"class-list":85,"events":112,"insert-css":87,"lodash":88}],85:[function(require,module,exports){
function ClassList(n){function t(n){var t=s();indexof(t,n)>-1||(t.push(n),a(t))}function r(n){var t=s(),r=indexof(t,n);-1!==r&&(t.splice(r,1),a(t))}function e(n){return indexof(s(),n)>-1}function i(n){return e(n)?(r(n),!1):(t(n),!0)}function u(){return n.className}function o(n){var t=s();return t[n]||null}function s(){var t=n.className;return filter(t.split(" "),isTruthy)}function a(t){var r=t.length;n.className=t.join(" "),l.length=r;for(var e=0;e<t.length;e++)l[e]=t[e];delete t[r]}var f=n.classList;if(f)return f;var l={add:t,remove:r,contains:e,toggle:i,toString:u,length:0,item:o};return l}function filter(n,t){for(var r=[],e=0;e<n.length;e++)t(n[e])&&r.push(n[e]);return r}function isTruthy(n){return!!n}var indexof=require("indexof");module.exports=ClassList;


},{"indexof":86}],86:[function(require,module,exports){
var indexOf=[].indexOf;module.exports=function(e,n){if(indexOf)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1};


},{}],87:[function(require,module,exports){
var inserted={};module.exports=function(e,t){if(!inserted[e]){inserted[e]=!0;var n=document.createElement("style");n.setAttribute("type","text/css"),"textContent"in n?n.textContent=e:n.styleSheet.cssText=e;var s=document.getElementsByTagName("head")[0];t&&t.prepend?s.insertBefore(n,s.childNodes[0]):s.appendChild(n)}};


},{}],88:[function(require,module,exports){
(function (global){
(function(){function n(n,r,t){for(var e=(t||0)-1,u=n?n.length:0;++e<u;)if(n[e]===r)return e;return-1}function r(r,t){var e=typeof t;if(r=r.cache,"boolean"==e||null==t)return r[t]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?t:m+t;return r=(r=r[e])&&r[u],"object"==e?r&&n(r,t)>-1?0:-1:r?0:-1}function t(n){var r=this.cache,t=typeof n;if("boolean"==t||null==n)r[n]=!0;else{"number"!=t&&"string"!=t&&(t="object");var e="number"==t?n:m+n,u=r[t]||(r[t]={});"object"==t?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function e(n){return n.charCodeAt(0)}function u(n,r){for(var t=n.criteria,e=r.criteria,u=-1,o=t.length;++u<o;){var a=t[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-r.index}function o(n){var r=-1,e=n.length,u=n[0],o=n[e/2|0],a=n[e-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=f();i["false"]=i["null"]=i["true"]=i.undefined=!1;var l=f();for(l.array=n,l.cache=i,l.push=t;++r<e;)l.push(n[r]);return l}function a(n){return"\\"+G[n]}function i(){return h.pop()||[]}function f(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(n){n.length=0,h.length<d&&h.push(n)}function c(n){var r=n.cache;r&&c(r),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,g.length<d&&g.push(n)}function p(n,r,t){r||(r=0),"undefined"==typeof t&&(t=n?n.length:0);for(var e=-1,u=t-r||0,o=Array(0>u?0:u);++e<u;)o[e]=n[r+e];return o}function s(t){function h(n){return n&&"object"==typeof n&&!Yt(n)&&Tt.call(n,"__wrapped__")?n:new g(n)}function g(n,r){this.__chain__=!!r,this.__wrapped__=n}function d(n){function r(){if(e){var n=p(e);$t.apply(n,arguments)}if(this instanceof r){var o=J(t.prototype),a=t.apply(o,n||arguments);return Sn(a)?a:o}return t.apply(u,n||arguments)}var t=n[0],e=n[2],u=n[4];return Xt(r,n),r}function G(n,r,t,e,u){if(t){var o=t(n);if("undefined"!=typeof o)return o}var a=Sn(n);if(!a)return n;var f=Nt.call(n);if(!K[f])return n;var c=Jt[f];switch(f){case F:case B:return new c(+n);case q:case P:return new c(n);case L:return o=c(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o}var s=Yt(n);if(r){var v=!e;e||(e=i()),u||(u=i());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=s?c(n.length):{}}else o=s?p(n):oe({},n);return s&&(Tt.call(n,"index")&&(o.index=n.index),Tt.call(n,"input")&&(o.input=n.input)),r?(e.push(n),u.push(o),(s?Xn:fe)(n,function(n,a){o[a]=G(n,r,t,e,u)}),v&&(l(e),l(u)),o):o}function J(n,r){return Sn(n)?zt(n):{}}function Q(n,r,t){if("function"!=typeof n)return Yr;if("undefined"==typeof r||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Qt.funcNames&&(e=!n.name),e=e||!Qt.funcDecomp,!e)){var u=At.call(n);Qt.funcNames||(e=!O.test(u)),e||(e=I.test(u),Xt(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return $r(n,r)}function X(n){function r(){var n=f?a:this;if(u){var h=p(u);$t.apply(h,arguments)}if((o||c)&&(h||(h=p(arguments)),o&&$t.apply(h,o),c&&h.length<i))return e|=16,X([t,s?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(t=n[v]),this instanceof r){n=J(t.prototype);var g=t.apply(n,h);return Sn(g)?g:n}return t.apply(n,h)}var t=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,s=8&e,v=t;return Xt(r,n),r}function Y(t,e){var u=-1,a=ln(),i=t?t.length:0,f=i>=b&&a===n,l=[];if(f){var p=o(e);p?(a=r,e=p):f=!1}for(;++u<i;){var s=t[u];a(e,s)<0&&l.push(s)}return f&&c(e),l}function nn(n,r,t,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Yt(i)||vn(i))){r||(i=nn(i,r,t));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else t||a.push(i)}return a}function rn(n,r,t,e,u,o){if(t){var a=t(n,r);if("undefined"!=typeof a)return!!a}if(n===r)return 0!==n||1/n==1/r;var f=typeof n,c=typeof r;if(!(n!==n||n&&V[f]||r&&V[c]))return!1;if(null==n||null==r)return n===r;var p=Nt.call(n),s=Nt.call(r);if(p==T&&(p=z),s==T&&(s=z),p!=s)return!1;switch(p){case F:case B:return+n==+r;case q:return n!=+n?r!=+r:0==n?1/n==1/r:n==+r;case L:case P:return n==jt(r)}var v=p==$;if(!v){var h=Tt.call(n,"__wrapped__"),g=Tt.call(r,"__wrapped__");if(h||g)return rn(h?n.__wrapped__:n,g?r.__wrapped__:r,t,e,u,o);if(p!=z)return!1;var y=n.constructor,m=r.constructor;if(y!=m&&!(In(y)&&y instanceof y&&In(m)&&m instanceof m)&&"constructor"in n&&"constructor"in r)return!1}var b=!u;u||(u=i()),o||(o=i());for(var d=u.length;d--;)if(u[d]==n)return o[d]==r;var _=0;if(a=!0,u.push(n),o.push(r),v){if(d=n.length,_=r.length,a=_==d,a||e)for(;_--;){var w=d,j=r[_];if(e)for(;w--&&!(a=rn(n[w],j,t,e,u,o)););else if(!(a=rn(n[_],j,t,e,u,o)))break}}else ie(r,function(r,i,f){return Tt.call(f,i)?(_++,a=Tt.call(n,i)&&rn(n[i],r,t,e,u,o)):void 0}),a&&!e&&ie(n,function(n,r,t){return Tt.call(t,r)?a=--_>-1:void 0});return u.pop(),o.pop(),b&&(l(u),l(o)),a}function tn(n,r,t,e,u){(Yt(r)?Xn:fe)(r,function(r,o){var a,i,f=r,l=n[o];if(r&&((i=Yt(r))||le(r))){for(var c=e.length;c--;)if(a=e[c]==r){l=u[c];break}if(!a){var p;t&&(f=t(l,r),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Yt(l)?l:[]:le(l)?l:{}),e.push(r),u.push(l),p||tn(l,r,t,e,u)}}else t&&(f=t(l,r),"undefined"==typeof f&&(f=r)),"undefined"!=typeof f&&(l=f);n[o]=l})}function en(n,r){return n+St(Ht()*(r-n+1))}function un(t,e,u){var a=-1,f=ln(),p=t?t.length:0,s=[],v=!e&&p>=b&&f===n,h=u||v?i():s;if(v){var g=o(h);f=r,h=g}for(;++a<p;){var y=t[a],m=u?u(y,a,t):y;(e?!a||h[h.length-1]!==m:f(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(l(h.array),c(h)):u&&l(h),s}function on(n){return function(r,t,e){var u={};t=h.createCallback(t,e,3);var o=-1,a=r?r.length:0;if("number"==typeof a)for(;++o<a;){var i=r[o];n(u,i,t(i,o,r),r)}else fe(r,function(r,e,o){n(u,r,t(r,e,o),o)});return u}}function an(n,r,t,e,u,o){var a=1&r,i=2&r,f=4&r,l=16&r,c=32&r;if(!i&&!In(n))throw new kt;l&&!t.length&&(r&=-17,l=t=!1),c&&!e.length&&(r&=-33,c=e=!1);var s=n&&n.__bindData__;if(s&&s!==!0)return s=p(s),s[2]&&(s[2]=p(s[2])),s[3]&&(s[3]=p(s[3])),!a||1&s[1]||(s[4]=u),!a&&1&s[1]&&(r|=8),!f||4&s[1]||(s[5]=o),l&&$t.apply(s[2]||(s[2]=[]),t),c&&Wt.apply(s[3]||(s[3]=[]),e),s[1]|=r,an.apply(null,s);var v=1==r||17===r?d:X;return v([n,r,t,e,u,o])}function fn(n){return re[n]}function ln(){var r=(r=h.indexOf)===br?n:r;return r}function cn(n){return"function"==typeof n&&Rt.test(n)}function pn(n){var r,t;return n&&Nt.call(n)==z&&(r=n.constructor,!In(r)||r instanceof r)?(ie(n,function(n,r){t=r}),"undefined"==typeof t||Tt.call(n,t)):!1}function sn(n){return te[n]}function vn(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Nt.call(n)==T||!1}function hn(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t=r,r=!1),G(n,r,"function"==typeof t&&Q(t,e,1))}function gn(n,r,t){return G(n,!0,"function"==typeof r&&Q(r,t,1))}function yn(n,r){var t=J(n);return r?oe(t,r):t}function mn(n,r,t){var e;return r=h.createCallback(r,t,3),fe(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function bn(n,r,t){var e;return r=h.createCallback(r,t,3),_n(n,function(n,t,u){return r(n,t,u)?(e=t,!1):void 0}),e}function dn(n,r,t){var e=[];ie(n,function(n,r){e.push(r,n)});var u=e.length;for(r=Q(r,t,3);u--&&r(e[u--],e[u],n)!==!1;);return n}function _n(n,r,t){var e=ne(n),u=e.length;for(r=Q(r,t,3);u--;){var o=e[u];if(r(n[o],o,n)===!1)break}return n}function wn(n){var r=[];return ie(n,function(n,t){In(n)&&r.push(t)}),r.sort()}function jn(n,r){return n?Tt.call(n,r):!1}function kn(n){for(var r=-1,t=ne(n),e=t.length,u={};++r<e;){var o=t[r];u[n[o]]=o}return u}function xn(n){return n===!0||n===!1||n&&"object"==typeof n&&Nt.call(n)==F||!1}function Cn(n){return n&&"object"==typeof n&&Nt.call(n)==B||!1}function On(n){return n&&1===n.nodeType||!1}function Nn(n){var r=!0;if(!n)return r;var t=Nt.call(n),e=n.length;return t==$||t==P||t==T||t==z&&"number"==typeof e&&In(n.splice)?!e:(fe(n,function(){return r=!1}),r)}function Rn(n,r,t,e){return rn(n,r,"function"==typeof t&&Q(t,e,2))}function En(n){return Pt(n)&&!Kt(parseFloat(n))}function In(n){return"function"==typeof n}function Sn(n){return!(!n||!V[typeof n])}function An(n){return Tn(n)&&n!=+n}function Dn(n){return null===n}function Tn(n){return"number"==typeof n||n&&"object"==typeof n&&Nt.call(n)==q||!1}function $n(n){return n&&"object"==typeof n&&Nt.call(n)==L||!1}function Fn(n){return"string"==typeof n||n&&"object"==typeof n&&Nt.call(n)==P||!1}function Bn(n){return"undefined"==typeof n}function Wn(n,r,t){var e={};return r=h.createCallback(r,t,3),fe(n,function(n,t,u){e[t]=r(n,t,u)}),e}function qn(n){var r=arguments,t=2;if(!Sn(n))return n;if("number"!=typeof r[2]&&(t=r.length),t>3&&"function"==typeof r[t-2])var e=Q(r[--t-1],r[t--],2);else t>2&&"function"==typeof r[t-1]&&(e=r[--t]);for(var u=p(arguments,1,t),o=-1,a=i(),f=i();++o<t;)tn(n,u[o],e,a,f);return l(a),l(f),n}function zn(n,r,t){var e={};if("function"!=typeof r){var u=[];ie(n,function(n,r){u.push(r)}),u=Y(u,nn(arguments,!0,!1,1));for(var o=-1,a=u.length;++o<a;){var i=u[o];e[i]=n[i]}}else r=h.createCallback(r,t,3),ie(n,function(n,t,u){r(n,t,u)||(e[t]=n)});return e}function Ln(n){for(var r=-1,t=ne(n),e=t.length,u=ht(e);++r<e;){var o=t[r];u[r]=[o,n[o]]}return u}function Pn(n,r,t){var e={};if("function"!=typeof r)for(var u=-1,o=nn(arguments,!0,!1,1),a=Sn(n)?o.length:0;++u<a;){var i=o[u];i in n&&(e[i]=n[i])}else r=h.createCallback(r,t,3),ie(n,function(n,t,u){r(n,t,u)&&(e[t]=n)});return e}function Kn(n,r,t,e){var u=Yt(n);if(null==t)if(u)t=[];else{var o=n&&n.constructor,a=o&&o.prototype;t=J(a)}return r&&(r=h.createCallback(r,e,4),(u?Xn:fe)(n,function(n,e,u){return r(t,n,e,u)})),t}function Un(n){for(var r=-1,t=ne(n),e=t.length,u=ht(e);++r<e;)u[r]=n[t[r]];return u}function Mn(n){for(var r=arguments,t=-1,e=nn(r,!0,!1,1),u=r[2]&&r[2][r[1]]===n?1:e.length,o=ht(u);++t<u;)o[t]=n[e[t]];return o}function Vn(n,r,t){var e=-1,u=ln(),o=n?n.length:0,a=!1;return t=(0>t?Mt(0,o+t):t)||0,Yt(n)?a=u(n,r,t)>-1:"number"==typeof o?a=(Fn(n)?n.indexOf(r,t):u(n,r,t))>-1:fe(n,function(n){return++e>=t?!(a=n===r):void 0}),a}function Gn(n,r,t){var e=!0;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&(e=!!r(n[u],u,n)););else fe(n,function(n,t,u){return e=!!r(n,t,u)});return e}function Hn(n,r,t){var e=[];r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o;){var a=n[u];r(a,u,n)&&e.push(a)}else fe(n,function(n,t,u){r(n,t,u)&&e.push(n)});return e}function Jn(n,r,t){r=h.createCallback(r,t,3);var e=-1,u=n?n.length:0;if("number"!=typeof u){var o;return fe(n,function(n,t,e){return r(n,t,e)?(o=n,!1):void 0}),o}for(;++e<u;){var a=n[e];if(r(a,e,n))return a}}function Qn(n,r,t){var e;return r=h.createCallback(r,t,3),Yn(n,function(n,t,u){return r(n,t,u)?(e=n,!1):void 0}),e}function Xn(n,r,t){var e=-1,u=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof u)for(;++e<u&&r(n[e],e,n)!==!1;);else fe(n,r);return n}function Yn(n,r,t){var e=n?n.length:0;if(r=r&&"undefined"==typeof t?r:Q(r,t,3),"number"==typeof e)for(;e--&&r(n[e],e,n)!==!1;);else{var u=ne(n);e=u.length,fe(n,function(n,t,o){return t=u?u[--e]:--e,r(o[t],t,o)})}return n}function Zn(n,r){var t=p(arguments,2),e=-1,u="function"==typeof r,o=n?n.length:0,a=ht("number"==typeof o?o:0);return Xn(n,function(n){a[++e]=(u?r:n[r]).apply(n,t)}),a}function nr(n,r,t){var e=-1,u=n?n.length:0;if(r=h.createCallback(r,t,3),"number"==typeof u)for(var o=ht(u);++e<u;)o[e]=r(n[e],e,n);else o=[],fe(n,function(n,t,u){o[++e]=r(n,t,u)});return o}function rr(n,r,t){var u=-(1/0),o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Yt(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];f>o&&(o=f)}else r=null==r&&Fn(n)?e:h.createCallback(r,t,3),Xn(n,function(n,t,e){var a=r(n,t,e);a>u&&(u=a,o=n)});return o}function tr(n,r,t){var u=1/0,o=u;if("function"!=typeof r&&t&&t[r]===n&&(r=null),null==r&&Yt(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];o>f&&(o=f)}else r=null==r&&Fn(n)?e:h.createCallback(r,t,3),Xn(n,function(n,t,e){var a=r(n,t,e);u>a&&(u=a,o=n)});return o}function er(n,r,t,e){if(!n)return t;var u=arguments.length<3;r=h.createCallback(r,e,4);var o=-1,a=n.length;if("number"==typeof a)for(u&&(t=n[++o]);++o<a;)t=r(t,n[o],o,n);else fe(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)});return t}function ur(n,r,t,e){var u=arguments.length<3;return r=h.createCallback(r,e,4),Yn(n,function(n,e,o){t=u?(u=!1,n):r(t,n,e,o)}),t}function or(n,r,t){return r=h.createCallback(r,t,3),Hn(n,function(n,t,e){return!r(n,t,e)})}function ar(n,r,t){if(n&&"number"!=typeof n.length&&(n=Un(n)),null==r||t)return n?n[en(0,n.length-1)]:v;var e=ir(n);return e.length=Vt(Mt(0,r),e.length),e}function ir(n){var r=-1,t=n?n.length:0,e=ht("number"==typeof t?t:0);return Xn(n,function(n){var t=en(0,++r);e[r]=e[t],e[t]=n}),e}function fr(n){var r=n?n.length:0;return"number"==typeof r?r:ne(n).length}function lr(n,r,t){var e;r=h.createCallback(r,t,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&!(e=r(n[u],u,n)););else fe(n,function(n,t,u){return!(e=r(n,t,u))});return!!e}function cr(n,r,t){var e=-1,o=Yt(r),a=n?n.length:0,p=ht("number"==typeof a?a:0);for(o||(r=h.createCallback(r,t,3)),Xn(n,function(n,t,u){var a=p[++e]=f();o?a.criteria=nr(r,function(r){return n[r]}):(a.criteria=i())[0]=r(n,t,u),a.index=e,a.value=n}),a=p.length,p.sort(u);a--;){var s=p[a];p[a]=s.value,o||l(s.criteria),c(s)}return p}function pr(n){return n&&"number"==typeof n.length?p(n):Un(n)}function sr(n){for(var r=-1,t=n?n.length:0,e=[];++r<t;){var u=n[r];u&&e.push(u)}return e}function vr(n){return Y(n,nn(arguments,!0,!0,1))}function hr(n,r,t){var e=-1,u=n?n.length:0;for(r=h.createCallback(r,t,3);++e<u;)if(r(n[e],e,n))return e;return-1}function gr(n,r,t){var e=n?n.length:0;for(r=h.createCallback(r,t,3);e--;)if(r(n[e],e,n))return e;return-1}function yr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=-1;for(r=h.createCallback(r,t,3);++o<u&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[0]:v;return p(n,0,Vt(Mt(0,e),u))}function mr(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(n=nr(n,t,e)),nn(n,r)}function br(r,t,e){if("number"==typeof e){var u=r?r.length:0;e=0>e?Mt(0,u+e):e||0}else if(e){var o=Nr(r,t);return r[o]===t?o:-1}return n(r,t,e)}function dr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else e=null==r||t?1:r||e;return p(n,0,Vt(Mt(0,u-e),u))}function _r(){for(var t=[],e=-1,u=arguments.length,a=i(),f=ln(),p=f===n,s=i();++e<u;){var v=arguments[e];(Yt(v)||vn(v))&&(t.push(v),a.push(p&&v.length>=b&&o(e?t[e]:s)))}var h=t[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=a[0];if(v=h[g],(d?r(d,v):f(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=a[e],(d?r(d,v):f(t[e],v))<0)continue n;m.push(v)}}for(;u--;)d=a[u],d&&c(d);return l(a),l(s),m}function wr(n,r,t){var e=0,u=n?n.length:0;if("number"!=typeof r&&null!=r){var o=u;for(r=h.createCallback(r,t,3);o--&&r(n[o],o,n);)e++}else if(e=r,null==e||t)return n?n[u-1]:v;return p(n,Mt(0,u-e))}function jr(n,r,t){var e=n?n.length:0;for("number"==typeof t&&(e=(0>t?Mt(0,e+t):Vt(t,e-1))+1);e--;)if(n[e]===r)return e;return-1}function kr(n){for(var r=arguments,t=0,e=r.length,u=n?n.length:0;++t<e;)for(var o=-1,a=r[t];++o<u;)n[o]===a&&(Bt.call(n,o--,1),u--);return n}function xr(n,r,t){n=+n||0,t="number"==typeof t?t:+t||1,null==r&&(r=n,n=0);for(var e=-1,u=Mt(0,Et((r-n)/(t||1))),o=ht(u);++e<u;)o[e]=n,n+=t;return o}function Cr(n,r,t){var e=-1,u=n?n.length:0,o=[];for(r=h.createCallback(r,t,3);++e<u;){var a=n[e];r(a,e,n)&&(o.push(a),Bt.call(n,e--,1),u--)}return o}function Or(n,r,t){if("number"!=typeof r&&null!=r){var e=0,u=-1,o=n?n.length:0;for(r=h.createCallback(r,t,3);++u<o&&r(n[u],u,n);)e++}else e=null==r||t?1:Mt(0,r);return p(n,e)}function Nr(n,r,t,e){var u=0,o=n?n.length:u;for(t=t?h.createCallback(t,e,1):Yr,r=t(r);o>u;){var a=u+o>>>1;t(n[a])<r?u=a+1:o=a}return u}function Rr(){return un(nn(arguments,!0,!0))}function Er(n,r,t,e){return"boolean"!=typeof r&&null!=r&&(e=t,t="function"!=typeof r&&e&&e[r]===n?null:r,r=!1),null!=t&&(t=h.createCallback(t,e,3)),un(n,r,t)}function Ir(n){return Y(n,p(arguments,1))}function Sr(){for(var n=-1,r=arguments.length;++n<r;){var t=arguments[n];if(Yt(t)||vn(t))var e=e?un(Y(e,t).concat(Y(t,e))):t}return e||[]}function Ar(){for(var n=arguments.length>1?arguments:arguments[0],r=-1,t=n?rr(ve(n,"length")):0,e=ht(0>t?0:t);++r<t;)e[r]=ve(n,r);return e}function Dr(n,r){var t=-1,e=n?n.length:0,u={};for(r||!e||Yt(n[0])||(r=[]);++t<e;){var o=n[t];r?u[o]=r[t]:o&&(u[o[0]]=o[1])}return u}function Tr(n,r){if(!In(r))throw new kt;return function(){return--n<1?r.apply(this,arguments):void 0}}function $r(n,r){return arguments.length>2?an(n,17,p(arguments,2),null,r):an(n,1,null,null,r)}function Fr(n){for(var r=arguments.length>1?nn(arguments,!0,!1,1):wn(n),t=-1,e=r.length;++t<e;){var u=r[t];n[u]=an(n[u],1,null,null,n)}return n}function Br(n,r){return arguments.length>2?an(r,19,p(arguments,2),null,n):an(r,3,null,null,n)}function Wr(){for(var n=arguments,r=n.length;r--;)if(!In(n[r]))throw new kt;return function(){for(var r=arguments,t=n.length;t--;)r=[n[t].apply(this,r)];return r[0]}}function qr(n,r){return r="number"==typeof r?r:+r||n.length,an(n,4,null,null,null,r)}function zr(n,r,t){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!In(n))throw new kt;if(r=Mt(0,r)||0,t===!0){var h=!0;s=!1}else Sn(t)&&(h=t.leading,p="maxWait"in t&&(Mt(r,t.maxWait)||0),s="trailing"in t?t.trailing:s);var g=function(){var t=r-(ge()-a);if(0>=t){u&&It(u);var p=l;u=f=l=v,p&&(c=ge(),o=n.apply(i,e),f||u||(e=i=null))}else f=Ft(g,t)},y=function(){f&&It(f),u=f=l=v,(s||p!==r)&&(c=ge(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=ge(),i=this,l=s&&(f||!h),p===!1)var t=h&&!f;else{u||h||(c=a);var v=p-(a-c),m=0>=v;m?(u&&(u=It(u)),c=a,o=n.apply(i,e)):u||(u=Ft(y,v))}return m&&f?f=It(f):f||r===p||(f=Ft(g,r)),t&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function Lr(n){if(!In(n))throw new kt;var r=p(arguments,1);return Ft(function(){n.apply(v,r)},1)}function Pr(n,r){if(!In(n))throw new kt;var t=p(arguments,2);return Ft(function(){n.apply(v,t)},r)}function Kr(n,r){if(!In(n))throw new kt;var t=function(){var e=t.cache,u=r?r.apply(this,arguments):m+arguments[0];return Tt.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return t.cache={},t}function Ur(n){var r,t;if(!In(n))throw new kt;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}}function Mr(n){return an(n,16,p(arguments,1))}function Vr(n){return an(n,32,null,p(arguments,1))}function Gr(n,r,t){var e=!0,u=!0;if(!In(n))throw new kt;return t===!1?e=!1:Sn(t)&&(e="leading"in t?t.leading:e,u="trailing"in t?t.trailing:u),U.leading=e,U.maxWait=r,U.trailing=u,zr(n,r,U)}function Hr(n,r){return an(r,16,[n])}function Jr(n){return function(){return n}}function Qr(n,r,t){var e=typeof n;if(null==n||"function"==e)return Q(n,r,t);if("object"!=e)return tt(n);var u=ne(n),o=u[0],a=n[o];return 1!=u.length||a!==a||Sn(a)?function(r){for(var t=u.length,e=!1;t--&&(e=rn(r[u[t]],n[u[t]],null,!0)););return e}:function(n){var r=n[o];return a===r&&(0!==a||1/a==1/r)}}function Xr(n){return null==n?"":jt(n).replace(ue,fn)}function Yr(n){return n}function Zr(n,r,t){var e=!0,u=r&&wn(r);r&&(t||u.length)||(null==t&&(t=r),o=g,r=n,n=h,u=wn(r)),t===!1?e=!1:Sn(t)&&"chain"in t&&(e=t.chain);var o=n,a=In(o);Xn(u,function(t){var u=n[t]=r[t];a&&(o.prototype[t]=function(){var r=this.__chain__,t=this.__wrapped__,a=[t];$t.apply(a,arguments);var i=u.apply(n,a);if(e||r){if(t===i&&Sn(i))return this;i=new o(i),i.__chain__=r}return i})})}function nt(){return t._=Ot,this}function rt(){}function tt(n){return function(r){return r[n]}}function et(n,r,t){var e=null==n,u=null==r;if(null==t&&("boolean"==typeof n&&u?(t=n,n=1):u||"boolean"!=typeof r||(t=r,u=!0)),e&&u&&(r=1),n=+n||0,u?(r=n,n=0):r=+r||0,t||n%1||r%1){var o=Ht();return Vt(n+o*(r-n+parseFloat("1e-"+((o+"").length-1))),r)}return en(n,r)}function ut(n,r){if(n){var t=n[r];return In(t)?n[r]():t}}function ot(n,r,t){var e=h.templateSettings;n=jt(n||""),t=ae({},t,e);var u,o=ae({},t.imports,e.imports),i=ne(o),f=Un(o),l=0,c=t.interpolate||E,p="__p += '",s=wt((t.escape||E).source+"|"+c.source+"|"+(c===N?x:E).source+"|"+(t.evaluate||E).source+"|$","g");n.replace(s,function(r,t,e,o,i,f){return e||(e=o),p+=n.slice(l,f).replace(S,a),t&&(p+="' +\n__e("+t+") +\n'"),i&&(u=!0,p+="';\n"+i+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+r.length,r}),p+="';\n";var g=t.variable,y=g;y||(g="obj",p="with ("+g+") {\n"+p+"\n}\n"),p=(u?p.replace(w,""):p).replace(j,"$1").replace(k,"$1;"),p="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+D++ +"]")+"\n*/";try{var b=mt(i,"return "+p+m).apply(v,f)}catch(d){throw d.source=p,d}return r?b(r):(b.source=p,b)}function at(n,r,t){n=(n=+n)>-1?n:0;var e=-1,u=ht(n);for(r=Q(r,t,1);++e<n;)u[e]=r(e);return u}function it(n){return null==n?"":jt(n).replace(ee,sn)}function ft(n){var r=++y;return jt(null==n?"":n)+r}function lt(n){return n=new g(n),n.__chain__=!0,n}function ct(n,r){return r(n),n}function pt(){return this.__chain__=!0,this}function st(){return jt(this.__wrapped__)}function vt(){return this.__wrapped__}t=t?Z.defaults(H.Object(),t,Z.pick(H,A)):H;var ht=t.Array,gt=t.Boolean,yt=t.Date,mt=t.Function,bt=t.Math,dt=t.Number,_t=t.Object,wt=t.RegExp,jt=t.String,kt=t.TypeError,xt=[],Ct=_t.prototype,Ot=t._,Nt=Ct.toString,Rt=wt("^"+jt(Nt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Et=bt.ceil,It=t.clearTimeout,St=bt.floor,At=mt.prototype.toString,Dt=cn(Dt=_t.getPrototypeOf)&&Dt,Tt=Ct.hasOwnProperty,$t=xt.push,Ft=t.setTimeout,Bt=xt.splice,Wt=xt.unshift,qt=function(){try{var n={},r=cn(r=_t.defineProperty)&&r,t=r(n,n,n)&&r}catch(e){}return t}(),zt=cn(zt=_t.create)&&zt,Lt=cn(Lt=ht.isArray)&&Lt,Pt=t.isFinite,Kt=t.isNaN,Ut=cn(Ut=_t.keys)&&Ut,Mt=bt.max,Vt=bt.min,Gt=t.parseInt,Ht=bt.random,Jt={};Jt[$]=ht,Jt[F]=gt,Jt[B]=yt,Jt[W]=mt,Jt[z]=_t,Jt[q]=dt,Jt[L]=wt,Jt[P]=jt,g.prototype=h.prototype;var Qt=h.support={};Qt.funcDecomp=!cn(t.WinRTError)&&I.test(s),Qt.funcNames="string"==typeof mt.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:h}},zt||(J=function(){function n(){}return function(r){if(Sn(r)){n.prototype=r;var e=new n;n.prototype=null}return e||t.Object()}}());var Xt=qt?function(n,r){M.value=r,qt(n,"__bindData__",M)}:rt,Yt=Lt||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Nt.call(n)==$||!1},Zt=function(n){var r,t=n,e=[];if(!t)return e;if(!V[typeof n])return e;for(r in t)Tt.call(t,r)&&e.push(r);return e},ne=Ut?function(n){return Sn(n)?Ut(n):[]}:Zt,re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te=kn(re),ee=wt("("+ne(te).join("|")+")","g"),ue=wt("["+ne(re).join("")+"]","g"),oe=function(n,r,t){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof t?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&V[typeof u])for(var c=-1,p=V[typeof u]&&ne(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ae=function(n,r,t){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof t?2:a.length;++i<f;)if(u=a[i],u&&V[typeof u])for(var l=-1,c=V[typeof u]&&ne(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},ie=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(e in u)if(r(u[e],e,n)===!1)return o;return o},fe=function(n,r,t){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;r=r&&"undefined"==typeof t?r:Q(r,t,3);for(var a=-1,i=V[typeof u]&&ne(u),f=i?i.length:0;++a<f;)if(e=i[a],r(u[e],e,n)===!1)return o;return o},le=Dt?function(n){if(!n||Nt.call(n)!=z)return!1;var r=n.valueOf,t=cn(r)&&(t=Dt(r))&&Dt(t);return t?n==t||Dt(n)==t:pn(n)}:pn,ce=on(function(n,r,t){Tt.call(n,t)?n[t]++:n[t]=1}),pe=on(function(n,r,t){(Tt.call(n,t)?n[t]:n[t]=[]).push(r)}),se=on(function(n,r,t){n[t]=r}),ve=nr,he=Hn,ge=cn(ge=yt.now)&&ge||function(){return(new yt).getTime()},ye=8==Gt(_+"08")?Gt:function(n,r){return Gt(Fn(n)?n.replace(R,""):n,r||0)};return h.after=Tr,h.assign=oe,h.at=Mn,h.bind=$r,h.bindAll=Fr,h.bindKey=Br,h.chain=lt,h.compact=sr,h.compose=Wr,h.constant=Jr,h.countBy=ce,h.create=yn,h.createCallback=Qr,h.curry=qr,h.debounce=zr,h.defaults=ae,h.defer=Lr,h.delay=Pr,h.difference=vr,h.filter=Hn,h.flatten=mr,h.forEach=Xn,h.forEachRight=Yn,h.forIn=ie,h.forInRight=dn,h.forOwn=fe,h.forOwnRight=_n,h.functions=wn,h.groupBy=pe,h.indexBy=se,h.initial=dr,h.intersection=_r,h.invert=kn,h.invoke=Zn,h.keys=ne,h.map=nr,h.mapValues=Wn,h.max=rr,h.memoize=Kr,h.merge=qn,h.min=tr,h.omit=zn,h.once=Ur,h.pairs=Ln,h.partial=Mr,h.partialRight=Vr,h.pick=Pn,h.pluck=ve,h.property=tt,h.pull=kr,h.range=xr,h.reject=or,h.remove=Cr,h.rest=Or,h.shuffle=ir,h.sortBy=cr,h.tap=ct,h.throttle=Gr,h.times=at,h.toArray=pr,h.transform=Kn,h.union=Rr,h.uniq=Er,h.values=Un,h.where=he,h.without=Ir,h.wrap=Hr,h.xor=Sr,h.zip=Ar,h.zipObject=Dr,h.collect=nr,h.drop=Or,h.each=Xn,h.eachRight=Yn,h.extend=oe,h.methods=wn,h.object=Dr,h.select=Hn,h.tail=Or,h.unique=Er,h.unzip=Ar,Zr(h),h.clone=hn,h.cloneDeep=gn,h.contains=Vn,h.escape=Xr,h.every=Gn,h.find=Jn,h.findIndex=hr,h.findKey=mn,h.findLast=Qn,h.findLastIndex=gr,h.findLastKey=bn,h.has=jn,h.identity=Yr,h.indexOf=br,h.isArguments=vn,h.isArray=Yt,h.isBoolean=xn,h.isDate=Cn,h.isElement=On,h.isEmpty=Nn,h.isEqual=Rn,h.isFinite=En,h.isFunction=In,h.isNaN=An,h.isNull=Dn,h.isNumber=Tn,h.isObject=Sn,h.isPlainObject=le,h.isRegExp=$n,h.isString=Fn,h.isUndefined=Bn,h.lastIndexOf=jr,h.mixin=Zr,h.noConflict=nt,h.noop=rt,h.now=ge,h.parseInt=ye,h.random=et,h.reduce=er,h.reduceRight=ur,h.result=ut,h.runInContext=s,h.size=fr,h.some=lr,h.sortedIndex=Nr,h.template=ot,h.unescape=it,h.uniqueId=ft,h.all=Gn,h.any=lr,h.detect=Jn,h.findWhere=Jn,h.foldl=er,h.foldr=ur,h.include=Vn,h.inject=er,Zr(function(){var n={};return fe(h,function(r,t){h.prototype[t]||(n[t]=r)}),n}(),!1),h.first=yr,h.last=wr,h.sample=ar,h.take=yr,h.head=yr,fe(h,function(n,r){var t="sample"!==r;h.prototype[r]||(h.prototype[r]=function(r,e){var u=this.__chain__,o=n(this.__wrapped__,r,e);return u||null!=r&&(!e||t&&"function"==typeof r)?new g(o,u):o})}),h.VERSION="2.4.1",h.prototype.chain=pt,h.prototype.toString=st,h.prototype.value=vt,h.prototype.valueOf=vt,Xn(["join","pop","shift"],function(n){var r=xt[n];h.prototype[n]=function(){var n=this.__chain__,t=r.apply(this.__wrapped__,arguments);return n?new g(t,n):t}}),Xn(["push","reverse","sort","unshift"],function(n){var r=xt[n];h.prototype[n]=function(){return r.apply(this.__wrapped__,arguments),this}}),Xn(["concat","slice","splice"],function(n){var r=xt[n];h.prototype[n]=function(){return new g(r.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var v,h=[],g=[],y=0,m=+new Date+"",b=75,d=40,_=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,R=RegExp("^["+_+"]*0+(?=.$)"),E=/($^)/,I=/\bthis\b/,S=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],D=0,T="[object Arguments]",$="[object Array]",F="[object Boolean]",B="[object Date]",W="[object Function]",q="[object Number]",z="[object Object]",L="[object RegExp]",P="[object String]",K={};K[W]=!1,K[T]=K[$]=K[F]=K[B]=K[q]=K[z]=K[L]=K[P]=!0;var U={leading:!1,maxWait:0,trailing:!1},M={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=V[typeof window]&&window||this,J=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(H=Y);var Z=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:H._=Z}).call(this);


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],89:[function(require,module,exports){
var localforage=require("localforage"),EventEmitter=require("events").EventEmitter,muteUI=require("./ui"),extend=require("extend"),dispatchChanged=function(e,t){e.emit("change",t),e.emit(t===!0?"mute":"unmute")},updateFromLocalStorage=function(e,t){localforage.getItem("poem-mute",function(t,u){e.muted();e.muted(t||u!==!1&&u!==!0?!1:u)}.bind(this))},keyboardShortcut=function(e,t,u){u.keyCode!==!1&&window.addEventListener("keydown",function(e){e.keyCode===u.keyCode&&t()})},getSetMuted=function(e,t){return function(u){return(u===!0||u===!1)&&u!==e.muted&&(e.muted=u,localforage.setItem("poem-mute",e.muted),dispatchChanged(t,e.muted)),e.muted}},mute=function(e){var t=extend({muted:!1,keyCode:83}),u={muted:t.muted},n=new EventEmitter,o=getSetMuted(u,n),r=function(){o(!o())};keyboardShortcut(u,r,t);var d={muted:o,toggle:r,emitter:n,el:null};return updateFromLocalStorage(d,n),d.el=muteUI(d),d};module.exports=mute;


},{"./ui":94,"events":112,"extend":92,"localforage":73}],90:[function(require,module,exports){
function ClassList(n){function t(n){var t=s();indexof(t,n)>-1||(t.push(n),a(t))}function r(n){var t=s(),r=indexof(t,n);-1!==r&&(t.splice(r,1),a(t))}function e(n){return indexof(s(),n)>-1}function i(n){return e(n)?(r(n),!1):(t(n),!0)}function u(){return n.className}function o(n){var t=s();return t[n]||null}function s(){var t=n.className;return filter(t.split(" "),isTruthy)}function a(t){var r=t.length;n.className=t.join(" "),l.length=r;for(var e=0;e<t.length;e++)l[e]=t[e];delete t[r]}var f=n.classList;if(f)return f;var l={add:t,remove:r,contains:e,toggle:i,toString:u,length:0,item:o};return l}function filter(n,t){for(var r=[],e=0;e<n.length;e++)t(n[e])&&r.push(n[e]);return r}function isTruthy(n){return!!n}var indexof=require("indexof");module.exports=ClassList;


},{"indexof":91}],91:[function(require,module,exports){
var indexOf=[].indexOf;module.exports=function(e,n){if(indexOf)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1};


},{}],92:[function(require,module,exports){
var hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,undefined,isPlainObject=function(t){"use strict";if(!t||"[object Object]"!==toString.call(t))return!1;var r=hasOwn.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&hasOwn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return o===undefined||hasOwn.call(t,o)};module.exports=function t(){"use strict";var r,n,o,e,c,a,i=arguments[0],s=1,u=arguments.length,l=!1;for("boolean"==typeof i?(l=i,i=arguments[1]||{},s=2):("object"!=typeof i&&"function"!=typeof i||null==i)&&(i={});u>s;++s)if(r=arguments[s],null!=r)for(n in r)o=i[n],e=r[n],i!==e&&(l&&e&&(isPlainObject(e)||(c=Array.isArray(e)))?(c?(c=!1,a=o&&Array.isArray(o)?o:[]):a=o&&isPlainObject(o)?o:{},i[n]=t(l,a,e)):e!==undefined&&(i[n]=e));return i};


},{}],93:[function(require,module,exports){
var inserted={};module.exports=function(e,t){if(!inserted[e]){inserted[e]=!0;var n=document.createElement("style");n.setAttribute("type","text/css"),"textContent"in n?n.textContent=e:n.styleSheet.cssText=e;var s=document.getElementsByTagName("head")[0];t&&t.prepend?s.insertBefore(n,s.childNodes[0]):s.appendChild(n)}};


},{}],94:[function(require,module,exports){
(function (Buffer){
function createElement(L,M){var j=document.createElement("div");return j.innerHTML=L,j.getElementsByClassName(M)[0]}var ClassList=require("class-list"),insertCss=require("insert-css"),_html=Buffer("PGEgaHJlZj0nI211dGUnIGlkPSdwb2VtLW11dGUnIGNsYXNzPSdwb2VtLW11dGUnIHRpdGxlPSdIaXQgUyBrZXkgdG8gbXV0ZSc+Cgk8c3ZnIGNsYXNzPSdwb2VtLW11dGUtc3ZnJyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJCSB2aWV3Qm94PSIwIDAgNjQwIDQxNC40IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NDAgNDE0LjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPgoJPHBhdGggY2xhc3M9J3BvZW0tbXV0ZS1zcGVha2VyJwoJCWQ9Ik0yOTQuNCwzNzlsLTExMi41LTc4LjljLTMuOC0yLjctOC4zLTQuMS0xMy00LjFINzMuNkM2MS4xLDI5Niw1MSwyODUuOSw1MSwyNzMuNFYxNDIuNmMwLTEyLjUsMTAuMS0yMi42LDIyLjYtMjIuNmg5Ni4yCgkJYzQuNywwLDkuMi0xLjQsMTMuMS00LjFsMTExLjUtNzguN2MxNS0xMC42LDM1LjcsMC4xLDM1LjcsMTguNXYzMDQuOEMzMzAsMzc4LjgsMzA5LjQsMzg5LjUsMjk0LjQsMzc5eiIvPgoJPHBhdGggY2xhc3M9J3BvZW0tbXV0ZS14JwoJCWQ9Ik01NjUuMywyNjkuM2wtNTkuMS01OS4xbDU5LjEtNTkuMWM3LjEtNy4xLDcuMS0xOC43LDAtMjUuOGMtNy4xLTcuMS0xOC43LTcuMS0yNS44LDBsLTU5LjEsNTkuMWwtNTkuMS01OS4xCgkJYy03LjEtNy4xLTE4LjctNy4xLTI1LjgsMGwwLDBjLTcuMSw3LjEtNy4xLDE4LjcsMCwyNS44bDU5LjEsNTkuMWwtNTkuMSw1OS4xYy03LjEsNy4xLTcuMSwxOC43LDAsMjUuOGM3LjEsNy4xLDE4LjcsNy4xLDI1LjgsMAoJCWw1OS4xLTU5LjFsNTkuMSw1OS4xYzcuMSw3LjEsMTguNyw3LjEsMjUuOCwwdjBDNTcyLjQsMjg3LjksNTcyLjQsMjc2LjQsNTY1LjMsMjY5LjN6Ii8+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9J3BvZW0tbXV0ZS13YXZlJwoJCQkJZD0iTTM5NS4yLDMxNC4yYy02LjMsMC0xMi40LTMuNy0xNS4xLTkuOGMtMi44LTYuNS0xLjItMTMuNywzLjUtMTguNGMwLjUtMC42LDEtMS4yLDEuNi0xLjhjMi4yLTIuMiw0LjMtMy42LDYuMS00LjcKCQkJCWMxLTEuMSwyLTIuMiwzLTMuM2MxLjctMS44LDMuNC0zLjcsNS4zLTUuN2MxNi42LTE5LjksMjQuNC00Ni43LDIxLjYtNzMuN2MtMi44LTI2LjktMTYtNTEuMy0zNi4yLTY2LjljLTcuMi01LjYtOC41LTE1LjktMy0yMy4xCgkJCQljNS42LTcuMiwxNS45LTguNSwyMy4xLTNjMjcuMywyMS4xLDQ1LjEsNTMuNyw0OC44LDg5LjZjMy44LDM2LjEtNyw3Mi4yLTI5LjYsOTlsLTAuNCwwLjVsLTAuNSwwLjVjLTEuNiwxLjYtMy4xLDMuMi00LjcsNQoJCQkJYy0xLjgsMi0zLjcsNC4xLTUuOSw2LjNsLTEuOSwxLjlsLTIuNCwxLjJjMCwwLDAsMC0wLjEsMGMtMS40LDEuNy0zLjUsMy44LTYuOSw1LjJDMzk5LjcsMzEzLjgsMzk3LjUsMzE0LjIsMzk1LjIsMzE0LjJ6Ii8+CgkJPC9nPgoJCTxnPgoJCQk8cGF0aCBjbGFzcz0ncG9lbS1tdXRlLXdhdmUnCgkJCQlkPSJNNDM4LjYsMzU2LjJjLTYuMywwLTEyLjQtMy43LTE1LjEtOS44Yy0yLjktNi42LTEuMS0xNC4xLDMuOS0xOC44YzAuNS0wLjcsMS4yLTEuNiwyLjEtMi40YzMtMyw1LjktNC44LDguMy02LjIKCQkJCWMxLjgtMS45LDMuNi0zLjgsNS40LTUuOWMyLjQtMi43LDQuOS01LjUsNy44LTguNGMyNS43LTMwLjcsMzcuOS03Mi4xLDMzLjUtMTEzLjhjLTQuNC00MS41LTI0LjgtNzkuMS01NS45LTEwMy4yCgkJCQljLTcuMi01LjYtOC41LTE1LjktMy0yMy4xYzUuNi03LjIsMTUuOS04LjUsMjMuMS0zYzM4LjIsMjkuNiw2My4yLDc1LjQsNjguNiwxMjUuOGM1LjQsNTAuOC05LjgsMTAxLjUtNDEuNiwxMzkuMWwtMC40LDAuNQoJCQkJbC0wLjUsMC41Yy0yLjQsMi40LTQuNyw1LTcuMSw3LjZjLTIuNiwyLjktNS4yLDUuOC04LjMsOC45bC0xLjksMS45bC0yLjQsMS4yYy0wLjgsMC40LTEuNCwwLjctMS43LDAuOWMtMS4zLDEuOS0zLjgsNC44LTguMSw2LjYKCQkJCUM0NDMsMzU1LjcsNDQwLjgsMzU2LjIsNDM4LjYsMzU2LjJ6Ii8+CgkJPC9nPgoJCTxnPgoJCQk8cGF0aCBjbGFzcz0ncG9lbS1tdXRlLXdhdmUnCgkJCQlkPSJNNDgzLjYsMzk1LjZjLTYuMywwLTEyLjQtMy43LTE1LjEtOS44Yy0zLTYuNy0xLjEtMTQuNCw0LjItMTljMC42LTAuOSwxLjQtMS45LDIuNS0yLjljMy43LTMuNyw3LjMtNS45LDEwLjMtNy41CgkJCQljMi42LTIuNyw1LTUuNCw3LjYtOC4zYzMuMi0zLjUsNi40LTcuMSwxMC4xLTEwLjhjMzQuMy00MC44LDUwLjYtOTYsNDQuOC0xNTEuNmMtNS44LTU1LjItMzMtMTA1LjItNzQuNS0xMzcuMwoJCQkJYy03LjItNS42LTguNS0xNS45LTMtMjMuMWM1LjYtNy4yLDE1LjktOC41LDIzLjEtM2M0OC42LDM3LjYsODAuMyw5NS45LDg3LjEsMTYwYzYuOCw2NC43LTEyLjQsMTI5LjEtNTIuOCwxNzYuOWwtMC40LDAuNQoJCQkJbC0wLjUsMC41Yy0zLjMsMy4zLTYuMiw2LjYtOS40LDEwLjFjLTMuMywzLjctNi43LDcuNS0xMC42LDExLjNsLTEuOSwxLjlsLTIuNCwxLjJjLTEuOCwwLjktMi44LDEuNC0zLjYsMgoJCQkJYy0xLjMsMi0zLjksNS41LTguOSw3LjdDNDg4LjEsMzk1LjIsNDg1LjgsMzk1LjYsNDgzLjYsMzk1LjZ6Ii8+CgkJPC9nPgoJPC9nPgoJPC9zdmc+CjwvYT4=","base64"),_css=Buffer("LnBvZW0tbXV0ZS1zdmcgewogICAgZmlsbDogI2ZmZjsKCW9wYWNpdHk6MC44Owp9Ci5wb2VtLW11dGUtbXV0ZWQgLnBvZW0tbXV0ZS13YXZlIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KLnBvZW0tbXV0ZS11bm11dGVkIC5wb2VtLW11dGUteCB7CiAgICBkaXNwbGF5OiBub25lOwp9Ci5wb2VtLW11dGUteCB7CiAgICBmaWxsOiByZWQ7Cn0KLnBvZW0tbXV0ZS1zdmc6aG92ZXIgewogICAgb3BhY2l0eToxOwp9","base64"),_cssInserted=!1;module.exports=function(L){var M=createElement(_html,"poem-mute"),j=ClassList(M);_cssInserted||(insertCss(_css),_cssInserted=!0);var u=function(){L.muted()?(j.remove("poem-mute-unmuted"),j.add("poem-mute-muted")):(j.remove("poem-mute-muted"),j.add("poem-mute-unmuted"))};return L.emitter.on("change",u),u(),M.addEventListener("click",function(M){L.toggle(),u(),M.preventDefault(),M.stopImmediatePropagation()},!0),M};


}).call(this,require("buffer").Buffer)

},{"buffer":108,"class-list":90,"insert-css":93}],95:[function(require,module,exports){
(function (process){
(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function e(){}function o(t,n){for(var r=0,e=t.length;e>r;r++)if(t[r]===n)return r;return-1}function i(t){var n=t._promiseCallbacks;return n||(n=t._promiseCallbacks={}),n}function u(t,n){return"onerror"===t?void bt.on("error",n):2!==arguments.length?bt[t]:void(bt[t]=n)}function s(){setTimeout(function(){for(var t,n=0;n<Et.length;n++){t=Et[n];var r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),bt.trigger(t.name,t.payload)}Et.length=0},50)}function a(t,n,r){1===Et.push({name:t,payload:{key:n._guidKey,id:n._id,eventName:t,detail:n._result,childId:r&&r._id,label:n._label,timeStamp:mt(),error:bt["instrument-with-stack"]?new Error(n._label):null}})&&s()}function c(){return new TypeError("A promises callback cannot return that same promise.")}function f(){}function l(t){try{return t.then}catch(n){return kt.error=n,kt}}function h(t,n,r,e){try{t.call(n,r,e)}catch(o){return o}}function p(t,n,r){bt.async(function(t){var e=!1,o=h(r,n,function(r){e||(e=!0,n!==r?v(t,r):m(t,r))},function(n){e||(e=!0,w(t,n))},"Settle: "+(t._label||" unknown promise"));!e&&o&&(e=!0,w(t,o))},t)}function _(t,n){n._state===Tt?m(t,n._result):n._state===St?(n._onError=null,w(t,n._result)):g(n,void 0,function(r){n!==r?v(t,r):m(t,r)},function(n){w(t,n)})}function d(t,r){if(r.constructor===t.constructor)_(t,r);else{var e=l(r);e===kt?w(t,kt.error):void 0===e?m(t,r):n(e)?p(t,r,e):m(t,r)}}function v(n,r){n===r?m(n,r):t(r)?d(n,r):m(n,r)}function y(t){t._onError&&t._onError(t._result),b(t)}function m(t,n){t._state===jt&&(t._result=n,t._state=Tt,0===t._subscribers.length?bt.instrument&&At("fulfilled",t):bt.async(b,t))}function w(t,n){t._state===jt&&(t._state=St,t._result=n,bt.async(y,t))}function g(t,n,r,e){var o=t._subscribers,i=o.length;t._onError=null,o[i]=n,o[i+Tt]=r,o[i+St]=e,0===i&&t._state&&bt.async(b,t)}function b(t){var n=t._subscribers,r=t._state;if(bt.instrument&&At(r===Tt?"fulfilled":"rejected",t),0!==n.length){for(var e,o,i=t._result,u=0;u<n.length;u+=3)e=n[u],o=n[u+r],e?j(r,e,o,i):o(i);t._subscribers.length=0}}function E(){this.error=null}function A(t,n){try{return t(n)}catch(r){return Ct.error=r,Ct}}function j(t,r,e,o){var i,u,s,a,f=n(e);if(f){if(i=A(e,o),i===Ct?(a=!0,u=i.error,i=null):s=!0,r===i)return void w(r,c())}else i=o,s=!0;r._state!==jt||(f&&s?v(r,i):a?w(r,u):t===Tt?m(r,i):t===St&&w(r,i))}function T(t,n){var r=!1;try{n(function(n){r||(r=!0,v(t,n))},function(n){r||(r=!0,w(t,n))})}catch(e){w(t,e)}}function S(t,n,r){return t===Tt?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function k(t,n,r,e){this._instanceConstructor=t,this.promise=new t(f,e),this._abortOnReject=r,this._validateInput(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._init(),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&m(this.promise,this._result))):w(this.promise,this._validationError())}function C(t,n){return new Ot(this,t,!0,n).promise}function O(t,n){function r(t){v(i,t)}function e(t){w(i,t)}var o=this,i=new o(f,n);if(!yt(t))return w(i,new TypeError("You must pass an array to race.")),i;for(var u=t.length,s=0;i._state===jt&&u>s;s++)g(o.resolve(t[s]),void 0,r,e);return i}function I(t,n){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var e=new r(f,n);return v(e,t),e}function R(t,n){var r=this,e=new r(f,n);return w(e,t),e}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function x(t,r){this._id=Nt++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],bt.instrument&&At("created",this),f!==t&&(n(t)||M(),this instanceof x||P(),T(this,t))}function N(t,n,r){this._superConstructor(t,n,!1,r)}function Y(t,n){return new N(Yt,t,n).promise}function D(t,n){return Yt.all(t,n)}function K(t,n){Bt[Ft]=t,Bt[Ft+1]=n,Ft+=2,2===Ft&&Kt()}function U(){var t=process.nextTick,n=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(t=setImmediate),function(){t(V)}}function q(){return function(){Dt(V)}}function F(){var t=0,n=new Wt(V),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function G(){var t=new MessageChannel;return t.port1.onmessage=V,function(){t.port2.postMessage(0)}}function L(){return function(){setTimeout(V,1)}}function V(){for(var t=0;Ft>t;t+=2){var n=Bt[t],r=Bt[t+1];n(r),Bt[t]=void 0,Bt[t+1]=void 0}Ft=0}function W(){try{var t=require,n=t("vertx");return Dt=n.runOnLoop||n.runOnContext,q()}catch(r){return L()}}function $(t){var n={};return n.promise=new Yt(function(t,r){n.resolve=t,n.reject=r},t),n}function z(t,r,e){return Yt.all(t,e).then(function(t){if(!n(r))throw new TypeError("You must pass a function as filter's second argument.");for(var o=t.length,i=new Array(o),u=0;o>u;u++)i[u]=r(t[u]);return Yt.all(i,e).then(function(n){for(var r=new Array(o),e=0,i=0;o>i;i++)n[i]&&(r[e]=t[i],e++);return r.length=e,r})})}function B(t,n,r){this._superConstructor(t,n,!0,r)}function H(t,n,r){this._superConstructor(t,n,!1,r)}function J(t,n){return new H(Yt,t,n).promise}function Q(t,n){return new Qt(Yt,t,n).promise}function X(t,r,e){return Yt.all(t,e).then(function(t){if(!n(r))throw new TypeError("You must pass a function as map's second argument.");for(var o=t.length,i=new Array(o),u=0;o>u;u++)i[u]=r(t[u]);return Yt.all(i,e)})}function Z(){this.value=void 0}function tt(t){try{return t.then}catch(n){return nn.value=n,nn}}function nt(t,n,r){try{t.apply(n,r)}catch(e){return nn.value=e,nn}}function rt(t,n){for(var r,e,o={},i=t.length,u=new Array(i),s=0;i>s;s++)u[s]=t[s];for(e=0;e<n.length;e++)r=n[e],o[r]=u[e+1];return o}function et(t){for(var n=t.length,r=new Array(n-1),e=1;n>e;e++)r[e-1]=t[e];return r}function ot(t,n){return{then:function(r,e){return t.call(n,r,e)}}}function it(t,n){var r=function(){for(var r,e=this,o=arguments.length,i=new Array(o+1),u=!1,s=0;o>s;++s){if(r=arguments[s],!u){if(u=at(r),u===rn){var a=new Yt(f);return w(a,rn.value),a}u&&u!==!0&&(r=ot(u,r))}i[s]=r}var c=new Yt(f);return i[o]=function(t,r){t?w(c,t):void 0===n?v(c,r):n===!0?v(c,et(arguments)):yt(n)?v(c,rt(arguments,n)):v(c,r)},u?st(c,i,t,e):ut(c,i,t,e)};return r.__proto__=t,r}function ut(t,n,r,e){var o=nt(r,e,n);return o===nn&&w(t,o.value),t}function st(t,n,r,e){return Yt.all(n).then(function(n){var o=nt(r,e,n);return o===nn&&w(t,o.value),t})}function at(t){return t&&"object"==typeof t?t.constructor===Yt?!0:tt(t):!1}function ct(t,n){return Yt.race(t,n)}function ft(t,n){return Yt.reject(t,n)}function lt(t,n){return Yt.resolve(t,n)}function ht(t){throw setTimeout(function(){throw t}),t}function pt(t,n){bt.async(t,n)}function _t(){bt.on.apply(bt,arguments)}function dt(){bt.off.apply(bt,arguments)}var vt;vt=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var yt=vt,mt=Date.now||function(){return(new Date).getTime()},wt=Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return e.prototype=t,new e},gt={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,n){var r,e=i(this);r=e[t],r||(r=e[t]=[]),-1===o(r,n)&&r.push(n)},off:function(t,n){var r,e,u=i(this);return n?(r=u[t],e=o(r,n),void(-1!==e&&r.splice(e,1))):void(u[t]=[])},trigger:function(t,n){var r,e,o=i(this);if(r=o[t])for(var u=0;u<r.length;u++)(e=r[u])(n)}},bt={instrument:!1};gt.mixin(bt);var Et=[],At=a,jt=void 0,Tt=1,St=2,kt=new E,Ct=new E,Ot=k;k.prototype._validateInput=function(t){return yt(t)},k.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},k.prototype._init=function(){this._result=new Array(this.length)},k.prototype._enumerate=function(){for(var t=this.length,n=this.promise,r=this._input,e=0;n._state===jt&&t>e;e++)this._eachEntry(r[e],e)},k.prototype._eachEntry=function(t,n){var e=this._instanceConstructor;r(t)?t.constructor===e&&t._state!==jt?(t._onError=null,this._settledAt(t._state,n,t._result)):this._willSettleAt(e.resolve(t),n):(this._remaining--,this._result[n]=this._makeResult(Tt,n,t))},k.prototype._settledAt=function(t,n,r){var e=this.promise;e._state===jt&&(this._remaining--,this._abortOnReject&&t===St?w(e,r):this._result[n]=this._makeResult(t,n,r)),0===this._remaining&&m(e,this._result)},k.prototype._makeResult=function(t,n,r){return r},k.prototype._willSettleAt=function(t,n){var r=this;g(t,void 0,function(t){r._settledAt(Tt,n,t)},function(t){r._settledAt(St,n,t)})};var It=C,Rt=O,Mt=I,Pt=R,xt="rsvp_"+mt()+"-",Nt=0,Yt=x;x.cast=Mt,x.all=It,x.race=Rt,x.resolve=Mt,x.reject=Pt,x.prototype={constructor:x,_guidKey:xt,_onError:function(t){bt.async(function(n){setTimeout(function(){n._onError&&bt.trigger("error",t)},0)},this)},then:function(t,n,r){var e=this,o=e._state;if(o===Tt&&!t||o===St&&!n)return bt.instrument&&At("chained",this,this),this;e._onError=null;var i=new this.constructor(f,r),u=e._result;if(bt.instrument&&At("chained",e,i),o){var s=arguments[o-1];bt.async(function(){j(o,i,s,u)})}else g(e,i,t,n);return i},"catch":function(t,n){return this.then(null,t,n)},"finally":function(t,n){var r=this.constructor;return this.then(function(n){return r.resolve(t()).then(function(){return n})},function(n){return r.resolve(t()).then(function(){throw n})},n)}},N.prototype=wt(Ot.prototype),N.prototype._superConstructor=Ot,N.prototype._makeResult=S,N.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var Dt,Kt,Ut=Y,qt=D,Ft=0,Gt=({}.toString,K),Lt="undefined"!=typeof window?window:void 0,Vt=Lt||{},Wt=Vt.MutationObserver||Vt.WebKitMutationObserver,$t="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),zt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Bt=new Array(1e3);Kt=$t?U():Wt?F():zt?G():void 0===Lt&&"function"==typeof require?W():L();var Ht=$,Jt=z,Qt=B;B.prototype=wt(Ot.prototype),B.prototype._superConstructor=Ot,B.prototype._init=function(){this._result={}},B.prototype._validateInput=function(t){return t&&"object"==typeof t},B.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},B.prototype._enumerate=function(){var t=this.promise,n=this._input,r=[];for(var e in n)t._state===jt&&n.hasOwnProperty(e)&&r.push({position:e,entry:n[e]});var o=r.length;this._remaining=o;for(var i,u=0;t._state===jt&&o>u;u++)i=r[u],this._eachEntry(i.entry,i.position)},H.prototype=wt(Qt.prototype),H.prototype._superConstructor=Ot,H.prototype._makeResult=S,H.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var Xt=J,Zt=Q,tn=X,nn=new Z,rn=new Z,en=it,on=ct,un=ft,sn=lt,an=ht;bt.async=Gt;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var cn=window.__PROMISE_INSTRUMENTATION__;u("instrument",!0);for(var fn in cn)cn.hasOwnProperty(fn)&&_t(fn,cn[fn])}var ln={race:on,Promise:Yt,allSettled:Ut,hash:Zt,hashSettled:Xt,denodeify:en,on:_t,off:dt,map:tn,filter:Jt,resolve:sn,reject:un,all:qt,rethrow:an,defer:Ht,EventTarget:gt,configure:u,async:pt};"function"==typeof define&&define.amd?define(function(){return ln}):"undefined"!=typeof module&&module.exports?module.exports=ln:"undefined"!=typeof this&&(this.RSVP=ln)}).call(this);


}).call(this,require('_process'))

},{"_process":113}],96:[function(require,module,exports){
function noop(n){if(n)throw n}function badge(n,t){inserted||(insert(".npm-scb-wrap {\n  font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-weight: 200;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 999;\n}\n\n.npm-scb-wrap a {\n  text-decoration: none;\n  color: #000;\n}\n.npm-scb-white\n.npm-scb-wrap a {\n  color: #fff;\n}\n\n.npm-scb-inner {\n  position: absolute;\n  top: -120px; left: 0;\n  padding: 8px;\n  width: 100%;\n  height: 150px;\n  z-index: 2;\n  -webkit-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n     -moz-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n      -ms-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n       -o-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n          transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n}\n.npm-scb-wrap:hover\n.npm-scb-inner {\n  top: 0;\n}\n\n.npm-scb-artwork {\n  position: absolute;\n  top: 16px; left: 16px;\n  width: 104px; height: 104px;\n  box-shadow: 0 0 8px -3px #000;\n  outline: 1px solid rgba(0,0,0,0.1);\n  z-index: 2;\n}\n.npm-scb-white\n.npm-scb-artwork {\n  outline: 1px solid rgba(255,255,255,0.1);\n  box-shadow: 0 0 10px -2px rgba(255,255,255,0.9);\n}\n\n.npm-scb-info {\n  position: absolute;\n  top: 16px;\n  left: 120px;\n  width: 300px;\n  z-index: 1;\n}\n\n.npm-scb-info > a {\n  display: block;\n}\n\n.npm-scb-now-playing {\n  font-size: 12px;\n  line-height: 12px;\n  position: absolute;\n  width: 500px;\n  z-index: 1;\n  padding: 15px 0;\n  top: 0; left: 138px;\n  opacity: 1;\n  -webkit-transition: opacity 0.25s;\n     -moz-transition: opacity 0.25s;\n      -ms-transition: opacity 0.25s;\n       -o-transition: opacity 0.25s;\n          transition: opacity 0.25s;\n}\n\n.npm-scb-wrap:hover\n.npm-scb-now-playing {\n  opacity: 0;\n}\n\n.npm-scb-white\n.npm-scb-now-playing {\n  color: #fff;\n}\n.npm-scb-now-playing > a {\n  font-weight: bold;\n}\n\n.npm-scb-info > a > p {\n  margin: 0;\n  padding-bottom: 0.25em;\n  line-height: 1.35em;\n  margin-left: 1em;\n  font-size: 1em;\n}\n\n.npm-scb-title {\n  font-weight: bold;\n}\n\n.npm-scb-icon {\n  position: absolute;\n  top: 120px;\n  padding-top: 0.75em;\n  left: 16px;\n}\n"),inserted=!0),template||(template=minstache.compile('<div class="npm-scb-wrap">\n  <div class="npm-scb-inner">\n    <a target="_blank" href="{{urls.song}}">\n      <img class="npm-scb-icon" src="{{icon}}">\n      <img class="npm-scb-artwork" src="{{artwork}}">\n    </a>\n    <div class="npm-scb-info">\n      <a target="_blank" href="{{urls.song}}">\n        <p class="npm-scb-title">{{title}}</p>\n      </a>\n      <a target="_blank" href="{{urls.artist}}">\n        <p class="npm-scb-artist">{{artist}}</p>\n      </a>\n    </div>\n  </div>\n  <div class="npm-scb-now-playing">\n    Now Playing:\n    <a href="{{urls.song}}">{{title}}</a>\n    by\n    <a href="{{urls.artist}}">{{artist}}</a>\n  </div>\n</div>\n')),!gwfadded&&n.getFonts&&(fonts.add({"Open Sans":[300,600]}),gwfadded=!0),n=n||{},t=t||noop;var i=n.el||document.createElement("div"),e="dark"in n&&!n.dark?"white":"black",s=n.client_id,o=n.song;return resolve(s,o,function(n,o){if(n)return t(n);if("track"!==o.kind)throw new Error("soundcloud-badge only supports individual tracks at the moment");i.classList["black"===e?"remove":"add"]("npm-scb-white"),i.innerHTML=template({artwork:o.artwork_url||o.user.avatar_url,artist:o.user.username,title:o.title,icon:icons[e],urls:{song:o.permalink_url,artist:o.user.permalink_url}}),document.body.appendChild(i),t(null,o.stream_url+"?client_id="+s,o,i)}),i}var resolve=require("soundcloud-resolve"),fonts=require("google-fonts"),minstache=require("minstache"),insert=require("insert-css"),fs=require("fs"),icons={black:"http://developers.soundcloud.com/assets/logo_black.png",white:"http://developers.soundcloud.com/assets/logo_white.png"};module.exports=badge;var inserted=!1,gwfadded=!1,template=null;


},{"fs":107,"google-fonts":97,"insert-css":98,"minstache":99,"soundcloud-resolve":100}],97:[function(require,module,exports){
function asString(e){var t=getHref(e);return'<link href="'+t+'" rel="stylesheet" type="text/css">'}function asElement(e){var t=getHref(e),r=document.createElement("link");return r.setAttribute("href",t),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r}function getHref(e){var t=Object.keys(e).map(function(t){var r=e[t];return t=t.replace(/\s+/,"+"),"boolean"==typeof r?t:t+":"+makeArray(r).join(",")}).join("|");return"http://fonts.googleapis.com/css?family="+t}function append(e){var t=asElement(e);return document.head.appendChild(t),t}function makeArray(e){return Array.isArray(e)?e:[e]}module.exports=asString,module.exports.add=append;


},{}],98:[function(require,module,exports){
var inserted=[];module.exports=function(e){if(!(inserted.indexOf(e)>=0)){inserted.push(e);var d=document.createElement("style"),t=document.createTextNode(e);d.appendChild(t),document.head.childNodes.length?document.head.insertBefore(d,document.head.childNodes[0]):document.head.appendChild(d)}};


},{}],99:[function(require,module,exports){
function render(e,r){r=r||{};var t=compile(e);return t(r)}function compile(e){for(var r,t=[],n=parse(e),o=0;o<n.length;++o)if(r=n[o],o%2==0)t.push('"'+r.replace(/"/g,'\\"')+'"');else switch(r[0]){case"/":r=r.slice(1),t.push(") + ");break;case"^":r=r.slice(1),assertProperty(r),t.push(' + section(obj, "'+r+'", true, ');break;case"#":r=r.slice(1),assertProperty(r),t.push(' + section(obj, "'+r+'", false, ');break;case"!":r=r.slice(1),assertProperty(r),t.push(" + obj."+r+" + ");break;default:assertProperty(r),t.push(" + escape(obj."+r+") + ")}return t="\n"+indent(escape.toString())+";\n\n"+indent(section.toString())+";\n\n  return "+t.join("").replace(/\n/g,"\\n"),new Function("obj",t)}function assertProperty(e){if(!e.match(/^[\w.]+$/))throw new Error('invalid property "'+e+'"')}function parse(e){return e.split(/\{\{|\}\}/)}function indent(e){return e.replace(/^/gm,"  ")}function section(e,r,t,n){var o=e[r];return"function"==typeof o?o.call(e,n):(t&&(o=!o),o?n:"")}function escape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}exports=module.exports=render,exports.compile=compile;


},{}],100:[function(require,module,exports){
function resolve(r,e,o){var s="http://api.soundcloud.com/resolve.json?"+qs.stringify({url:e,client_id:r});xhr({uri:s,method:"GET"},function(r,e,s){if(r)return o(r);try{s=JSON.parse(s)}catch(n){return o(n)}return s.errors?o(new Error(s.errors[0].error_message)):o(null,s)})}var qs=require("querystring"),xhr=require("xhr");module.exports=resolve;


},{"querystring":116,"xhr":101}],101:[function(require,module,exports){
function createXHR(e,t){function o(){4===s.readyState&&n()}function n(){var e=null,o=s.statusCode=s.status,n=s.body=s.response||s.responseText||s.responseXML;if(0===o||o>=400&&600>o){var r=s.responseText||messages[String(s.status).charAt(0)];e=new Error(r),e.statusCode=s.status}if(c)try{n=s.body=JSON.parse(n)}catch(a){}t(e,s,n)}function r(e){t(e,s)}"string"==typeof e&&(e={uri:e}),e=e||{},t=once(t);var s;s=e.cors?new XDR:new XHR;var a=s.url=e.uri,i=s.method=e.method||"GET",u=e.body||e.data,d=s.headers=e.headers||{},c=!1;return"json"in e&&(c=!0,d["Content-Type"]="application/json",u=JSON.stringify(e.json)),s.onreadystatechange=o,s.onload=n,s.onerror=r,s.onprogress=function(){},s.ontimeout=noop,s.open(i,a),e.cors&&(s.withCredentials=!0),s.timeout="timeout"in e?e.timeout:5e3,s.setRequestHeader&&Object.keys(d).forEach(function(e){s.setRequestHeader(e,d[e])}),s.send(u),s}function noop(){}var window=require("global/window"),once=require("once"),messages={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},XHR=window.XMLHttpRequest||noop,XDR="withCredentials"in new XHR?window.XMLHttpRequest:window.XDomainRequest;module.exports=createXHR;


},{"global/window":102,"once":103}],102:[function(require,module,exports){
(function (global){
module.exports="undefined"!=typeof window?window:"undefined"!=typeof global?global:{};


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],103:[function(require,module,exports){
function once(n){var o=!1;return function(){return o?void 0:(o=!0,n.apply(this,arguments))}}module.exports=once,once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0})});


},{}],104:[function(require,module,exports){
var createTypes=require("./types");module.exports=function(r){var e=createTypes(r);return function(r,t){t=t||{},"string"==typeof t.colors&&(t.colors=[t.colors]);var o=e(r.uniforms,t.colors),s=e(r.attributes,t.colors);for(var a in s)s[a].value=[];return{vertexShader:r.vertex,fragmentShader:r.fragment,uniforms:o,attributes:s}}};


},{"./types":105}],105:[function(require,module,exports){
function create(e){function r(r,t){switch(r){case"float":case"int":return 0;case"vec2":case"ivec2":return new e.Vector2;case"vec3":case"ivec3":return new e.Vector3;case"vec4":case"ivec4":return new e.Vector4;case"mat4":return new e.Matrix4;case"mat3":return new e.Matrix3;case"samplerCube":case"sampler2D":return new e.Texture;default:return void 0}}function t(e,t,n){if(t){"ivec3"===e&&(n*=3);for(var a=new Array(n),c=0;c<a.length;c++)a[c]=r(e,t);return a}return r(e)}function n(e,r){return r?"int"===e?"iv1":"float"===e?"fv1":typeMap[e]+"v":typeMap[e]}return function(r,a){Array.isArray(a)||(a=Array.prototype.slice.call(arguments,1));var c={},o={};r.forEach(function(r){var i=r.name,u=/(.+)\[[0-9]+\]/.exec(i);if(a&&-1!==a.indexOf(i)){if(u)throw new Error("array of color uniforms not supported");if("vec3"!==r.type)throw new Error("ThreeJS expects vec3 for Color uniforms");return void(c[i]={type:"c",value:new e.Color})}u&&(i=u[1],i in o?o[i].count++:o[i]={count:1,type:r.type}),c[i]={type:n(r.type,u),value:u?null:t(r.type)}});for(var i in c){var u=c[i];if(i in o){var v=o[i];u.value=t(v.type,!0,v.count)}}return c}}var typeMap={"int":"i","float":"f",ivec2:"i2",ivec3:"i3",ivec4:"i4",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"m4",mat3:"m3",sampler2D:"t",samplerCube:"t"};module.exports=create;


},{}],106:[function(require,module,exports){
function offset(e,t){var n=e.clientX||0,r=e.clientY||0,o=bounds(t);return[n-o.left,r-o.top]}function getTargetTouch(e,t){return Array.prototype.slice.call(e).filter(function(e){return e.target===t})[0]||e[0]}function getTouch(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return null}function listeners(e,t){return function(n){t?e.addEventListener(n.type,n.listener):e.removeEventListener(n.type,n.listener)}}function normalize(e){return e.replace(/^(touch|mouse)/,"").replace(/up$/,"end").replace(/down$/,"start")}function bounds(e){return e===window||e===document||e===document.body?ROOT:e.getBoundingClientRect()}var Emitter=require("events/"),allEvents=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup"],ROOT={left:0,top:0};module.exports=function(e,t){function n(e,t){var n;return o&&/^touchend/.test(t)?(n=getTouch(e.changedTouches,o.identifier||0),n&&(o=null)):!o&&/^touchstart/.test(t)?o=n=getTargetTouch(e.changedTouches,r.target):o&&(n=getTouch(e.changedTouches,o.identifier||0)),n}t=t||{},e=e||window;var r=new Emitter;r.target=t.target||e;var o=null,u=t.filtered,i=allEvents;"string"==typeof t.type&&(i=allEvents.filter(function(e){return 0===e.indexOf(t.type)}));var c=i.map(function(e){var t=normalize(e),o=function(o){var i=o;if(/^touch/.test(e)&&(i=u?n(o,e):getTargetTouch(o.changedTouches,r.target)),i){var c=offset(i,r.target);r.emit(t,o,c)}};return{type:e,listener:o}});return r.enable=function(){return c.forEach(listeners(e,!0)),r},r.disable=function(){return c.forEach(listeners(e,!1)),r},r.enable(),r};


},{"events/":61}],107:[function(require,module,exports){



},{}],108:[function(require,module,exports){
function Buffer(t,e,r){if(!(this instanceof Buffer))return new Buffer(t,e,r);var n,i=typeof t;if("number"===i)n=t>0?t>>>0:0;else if("string"===i)n=Buffer.byteLength(t,e);else{if("object"!==i||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&isArray(t.data)&&(t=t.data),n=+t.length>0?Math.floor(+t.length):0}if(n>kMaxLength)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength.toString(16)+" bytes");var f;Buffer.TYPED_ARRAY_SUPPORT?f=Buffer._augment(new Uint8Array(n)):(f=this,f.length=n,f._isBuffer=!0);var o;if(Buffer.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)f._set(t);else if(isArrayish(t))if(Buffer.isBuffer(t))for(o=0;n>o;o++)f[o]=t.readUInt8(o);else for(o=0;n>o;o++)f[o]=(t[o]%256+256)%256;else if("string"===i)f.write(t,0,e);else if("number"===i&&!Buffer.TYPED_ARRAY_SUPPORT&&!r)for(o=0;n>o;o++)f[o]=0;return n>0&&n<=Buffer.poolSize&&(f.parent=rootParent),f}function SlowBuffer(t,e,r){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e,r);var n=new Buffer(t,e,r);return delete n.parent,n}function hexWrite(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var f=e.length;if(f%2!==0)throw new Error("Invalid hex string");n>f/2&&(n=f/2);for(var o=0;n>o;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){var i=blitBuffer(utf8ToBytes(e,t.length-r),t,r,n);return i}function asciiWrite(t,e,r,n){var i=blitBuffer(asciiToBytes(e),t,r,n);return i}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){var i=blitBuffer(base64ToBytes(e),t,r,n);return i}function utf16leWrite(t,e,r,n){var i=blitBuffer(utf16leToBytes(e,t.length-r),t,r,n,2);return i}function base64Slice(t,e,r){return base64.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function utf8Slice(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var f=e;r>f;f++)t[f]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(t[f]),i=""):i+="%"+t[f].toString(16);return n+decodeUtf8Char(i)}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function hexSlice(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",f=e;r>f;f++)i+=toHex(t[f]);return i}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),i="",f=0;f<n.length;f+=2)i+=String.fromCharCode(n[f]+256*n[f+1]);return i}function checkOffset(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,i,f){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||f>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,f=Math.min(t.length-r,2);f>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,f=Math.min(t.length-r,4);f>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function checkIEEE754(t,e,r,n,i,f){if(e>i||f>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,i){return i||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,i){return i||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function isArrayish(t){return isArray(t)||Buffer.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function toHex(t){return 16>t?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){var r,n=t.length,i=null;e=e||1/0;for(var f=[],o=0;n>o;o++){if(r=t.charCodeAt(o),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&f.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&f.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&f.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&f.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;f.push(r)}else if(2048>r){if((e-=2)<0)break;f.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;f.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;f.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return f}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,i,f=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,i=r%256,f.push(i),f.push(n);return f}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n,i){i&&(n-=n%i);for(var f=0;n>f&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}function decodeUtf8Char(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("is-array");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var kMaxLength=1073741823,rootParent={};Buffer.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,n=e.length,i=0,f=Math.min(r,n);f>i&&t[i]===e[i];i++);return i!==f&&(r=t[i],n=e[i]),n>r?-1:r>n?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new Buffer(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),i=0;for(r=0;r<t.length;r++){var f=t[r];f.copy(n,i),i+=f.length}return n},Buffer.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=utf8ToBytes(t).length;break;case"base64":r=base64ToBytes(t).length;break;default:r=t.length}return r},Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0,Buffer.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||r===1/0?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return Buffer.compare(this,t)},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var i=n;n=e,e=r,r=i}if(e=Number(e)||0,0>r||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-e;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var o;switch(n){case"hex":o=hexWrite(this,t,e,r);break;case"utf8":case"utf-8":o=utf8Write(this,t,e,r);break;case"ascii":o=asciiWrite(this,t,e,r);break;case"binary":o=binaryWrite(this,t,e,r);break;case"base64":o=base64Write(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=utf16leWrite(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return o},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var i=e-t;n=new Buffer(i,void 0,!0);for(var f=0;i>f;f++)n[f]=this[f+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,f=0;++f<e&&(i*=256);)n+=this[t+f]*i;return n},Buffer.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,f=0;++f<e&&(i*=256);)n+=this[t+f]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||checkOffset(t,e,this.length);for(var n=e,i=1,f=this[t+--n];n>0&&(i*=256);)f+=this[t+--n]*i;return i*=128,f>=i&&(f-=Math.pow(2,8*e)),f},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var i=1,f=0;for(this[e]=255&t;++f<r&&(i*=256);)this[e+f]=t/i>>>0&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,f=1;for(this[e+i]=255&t;--i>=0&&(f*=256);)this[e+i]=t/f>>>0&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||checkInt(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=0,f=1,o=0>t?1:0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=(t/f>>0)-o&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||checkInt(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=r-1,f=1,o=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(f*=256);)this[e+i]=(t/f>>0)-o&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===t.length||0===i.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=i.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f=n-r;if(1e3>f||!Buffer.TYPED_ARRAY_SUPPORT)for(var o=0;f>o;o++)t[o+e]=this[o+r];else t._set(this.subarray(r,r+f),e);return f},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=utf8ToBytes(t.toString()),f=i.length;for(n=e;r>n;n++)this[n]=i[n%f]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-z\-]/g;


},{"base64-js":109,"ieee754":110,"is-array":111}],109:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);


},{}],110:[function(require,module,exports){
exports.read=function(o,t,a,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,n=a?h-1:0,s=a?-1:1,N=o[t+n];for(n+=s,M=N&(1<<-i)-1,N>>=-i,i+=w;i>0;M=256*M+o[t+n],n+=s,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+o[t+n],n+=s,i-=8);if(0===M)M=1-e;else{if(M===f)return p?0/0:(N?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(N?-1:1)*p*Math.pow(2,M-r)},exports.write=function(o,t,a,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,n=i>>1,s=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=r?0:M-1,u=r?1:-1,l=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(w=isNaN(t)?1:0,p=i):(p=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-p))<1&&(p--,f*=2),t+=p+n>=1?s/f:s*Math.pow(2,1-n),t*f>=2&&(p++,f/=2),p+n>=i?(w=0,p=i):p+n>=1?(w=(t*f-1)*Math.pow(2,h),p+=n):(w=t*Math.pow(2,n-1)*Math.pow(2,h),p=0));h>=8;o[a+N]=255&w,N+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;o[a+N]=255&p,N+=u,p/=256,e-=8);o[a+N-u]|=128*l};


},{}],111:[function(require,module,exports){
var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(r){return!!r&&"[object Array]"==str.call(r)};


},{}],112:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};


},{}],113:[function(require,module,exports){
function drainQueue(){if(!draining){draining=!0;for(var e,o=queue.length;o;){e=queue,queue=[];for(var r=-1;++r<o;)e[r]();o=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(e){queue.push(e),draining||setTimeout(drainQueue,0)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};


},{}],114:[function(require,module,exports){
"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;p>y;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};


},{}],115:[function(require,module,exports){
"use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};


},{}],116:[function(require,module,exports){
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");


},{"./decode":114,"./encode":115}]},{},[26])


//# sourceMappingURL=bundle.js.map